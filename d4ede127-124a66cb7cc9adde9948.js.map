{"version":3,"file":"d4ede127-124a66cb7cc9adde9948.js","mappings":"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","sources":["webpack://@react-babylonjs/docs/../react-babylonjs/node_modules/@babylonjs/core/Engines/thinEngine.js"],"sourcesContent":["import _asyncToGenerator from \"/home/runner/work/react-babylonjs/react-babylonjs/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _createClass from \"/home/runner/work/react-babylonjs/react-babylonjs/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"/home/runner/work/react-babylonjs/react-babylonjs/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _regeneratorRuntime from \"/home/runner/work/react-babylonjs/react-babylonjs/node_modules/@babel/runtime/regenerator/index.js\";\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { EngineStore } from \"./engineStore.js\";\nimport { Effect } from \"../Materials/effect.js\";\nimport { _WarnImport } from \"../Misc/devTools.js\";\nimport { Observable } from \"../Misc/observable.js\";\nimport { DepthCullingState } from \"../States/depthCullingState.js\";\nimport { StencilState } from \"../States/stencilState.js\";\nimport { AlphaState } from \"../States/alphaCullingState.js\";\nimport { InternalTexture, InternalTextureSource } from \"../Materials/Textures/internalTexture.js\";\nimport { Logger } from \"../Misc/logger.js\";\nimport { IsDocumentAvailable, IsWindowObjectExist } from \"../Misc/domManagement.js\";\nimport { WebGLShaderProcessor } from \"./WebGL/webGLShaderProcessors.js\";\nimport { WebGL2ShaderProcessor } from \"./WebGL/webGL2ShaderProcessors.js\";\nimport { WebGLDataBuffer } from \"../Meshes/WebGL/webGLDataBuffer.js\";\nimport { WebGLPipelineContext } from \"./WebGL/webGLPipelineContext.js\";\nimport { PerformanceConfigurator } from \"./performanceConfigurator.js\";\nimport { WebGLHardwareTexture } from \"./WebGL/webGLHardwareTexture.js\";\nimport { DrawWrapper } from \"../Materials/drawWrapper.js\";\nimport { StencilStateComposer } from \"../States/stencilStateComposer.js\";\nimport { ShaderLanguage } from \"../Materials/shaderLanguage.js\";\nimport { PrecisionDate } from \"../Misc/precisionDate.js\";\n/**\n * Keeps track of all the buffer info used in engine.\n */\nvar BufferPointer = /*#__PURE__*/_createClass(function BufferPointer() {\n  _classCallCheck(this, BufferPointer);\n});\n/**\n * The base engine class (root of all engines)\n */\nexport var ThinEngine = /*#__PURE__*/function () {\n  /**\n   * Creates a new engine\n   * @param canvasOrContext defines the canvas or WebGL context to use for rendering. If you provide a WebGL context, Babylon.js will not hook events on the canvas (like pointers, keyboards, etc...) so no event observables will be available. This is mostly used when Babylon.js is used as a plugin on a system which already used the WebGL context\n   * @param antialias defines enable antialiasing (default: false)\n   * @param options defines further options to be sent to the getContext() function\n   * @param adaptToDeviceRatio defines whether to adapt to the device's viewport characteristics (default: false)\n   */\n  function ThinEngine(canvasOrContext, antialias, options, adaptToDeviceRatio) {\n    var _this = this;\n    _classCallCheck(this, ThinEngine);\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n    /** @internal */\n    this._name = \"WebGL\";\n    this._isDisposed = false;\n    /**\n     * Gets or sets a boolean that indicates if textures must be forced to power of 2 size even if not required\n     */\n    this.forcePOTTextures = false;\n    /**\n     * Gets a boolean indicating if the engine is currently rendering in fullscreen mode\n     */\n    this.isFullscreen = false;\n    /**\n     * Gets or sets a boolean indicating if back faces must be culled. If false, front faces are culled instead (true by default)\n     * If non null, this takes precedence over the value from the material\n     */\n    this.cullBackFaces = null;\n    /**\n     * Gets or sets a boolean indicating if the engine must keep rendering even if the window is not in foreground\n     */\n    this.renderEvenInBackground = true;\n    /**\n     * Gets or sets a boolean indicating that cache can be kept between frames\n     */\n    this.preventCacheWipeBetweenFrames = false;\n    /** Gets or sets a boolean indicating if the engine should validate programs after compilation */\n    this.validateShaderPrograms = false;\n    this._useReverseDepthBuffer = false;\n    /**\n     * Indicates if the z range in NDC space is 0..1 (value: true) or -1..1 (value: false)\n     */\n    this.isNDCHalfZRange = false;\n    /**\n     * Indicates that the origin of the texture/framebuffer space is the bottom left corner. If false, the origin is top left\n     */\n    this.hasOriginBottomLeft = true;\n    /**\n     * Gets or sets a boolean indicating that uniform buffers must be disabled even if they are supported\n     */\n    this.disableUniformBuffers = false;\n    /**\n     * An event triggered when the engine is disposed.\n     */\n    this.onDisposeObservable = new Observable();\n    this._frameId = 0;\n    /** @internal */\n    this._uniformBuffers = new Array();\n    /** @internal */\n    this._storageBuffers = new Array();\n    /** @internal */\n    this._webGLVersion = 1.0;\n    this._windowIsBackground = false;\n    this._highPrecisionShadersAllowed = true;\n    /** @internal */\n    this._badOS = false;\n    /** @internal */\n    this._badDesktopOS = false;\n    this._renderingQueueLaunched = false;\n    this._activeRenderLoops = new Array();\n    // Lost context\n    /**\n     * Observable signaled when a context lost event is raised\n     */\n    this.onContextLostObservable = new Observable();\n    /**\n     * Observable signaled when a context restored event is raised\n     */\n    this.onContextRestoredObservable = new Observable();\n    this._contextWasLost = false;\n    /** @internal */\n    this._doNotHandleContextLost = false;\n    /**\n     * Gets or sets a boolean indicating that vertex array object must be disabled even if they are supported\n     */\n    this.disableVertexArrayObjects = false;\n    // States\n    /** @internal */\n    this._colorWrite = true;\n    /** @internal */\n    this._colorWriteChanged = true;\n    /** @internal */\n    this._depthCullingState = new DepthCullingState();\n    /** @internal */\n    this._stencilStateComposer = new StencilStateComposer();\n    /** @internal */\n    this._stencilState = new StencilState();\n    /** @internal */\n    this._alphaState = new AlphaState();\n    /** @internal */\n    this._alphaMode = 1;\n    /** @internal */\n    this._alphaEquation = 0;\n    // Cache\n    /** @internal */\n    this._internalTexturesCache = new Array();\n    /** @internal */\n    this._renderTargetWrapperCache = new Array();\n    /** @internal */\n    this._activeChannel = 0;\n    this._currentTextureChannel = -1;\n    /** @internal */\n    this._boundTexturesCache = {};\n    this._compiledEffects = {};\n    this._vertexAttribArraysEnabled = [];\n    this._uintIndicesCurrentlySet = false;\n    this._currentBoundBuffer = new Array();\n    /** @internal */\n    this._currentFramebuffer = null;\n    /** @internal */\n    this._dummyFramebuffer = null;\n    this._currentBufferPointers = new Array();\n    this._currentInstanceLocations = new Array();\n    this._currentInstanceBuffers = new Array();\n    this._vaoRecordInProgress = false;\n    this._mustWipeVertexAttributes = false;\n    this._nextFreeTextureSlots = new Array();\n    this._maxSimultaneousTextures = 0;\n    this._maxMSAASamplesOverride = null;\n    this._activeRequests = new Array();\n    /**\n     * If set to true zooming in and out in the browser will rescale the hardware-scaling correctly.\n     */\n    this.adaptToDeviceRatio = false;\n    /** @internal */\n    this._lastDevicePixelRatio = 1.0;\n    /** @internal */\n    this._transformTextureUrl = null;\n    /**\n     * Gets information about the current host\n     */\n    this.hostInformation = {\n      isMobile: false\n    };\n    /**\n     * Defines whether the engine has been created with the premultipliedAlpha option on or not.\n     */\n    this.premultipliedAlpha = true;\n    /**\n     * Observable event triggered before each texture is initialized\n     */\n    this.onBeforeTextureInitObservable = new Observable();\n    /** @internal */\n    this._isWebGPU = false;\n    this._snapshotRenderingMode = 0;\n    this._viewportCached = {\n      x: 0,\n      y: 0,\n      z: 0,\n      w: 0\n    };\n    this._unpackFlipYCached = null;\n    /**\n     * In case you are sharing the context with other applications, it might\n     * be interested to not cache the unpack flip y state to ensure a consistent\n     * value would be set.\n     */\n    this.enableUnpackFlipYCached = true;\n    this._boundUniforms = {};\n    this.startTime = PrecisionDate.Now;\n    var canvas = null;\n    options = options || {};\n    this._creationOptions = options;\n    // Save this off for use in resize().\n    this.adaptToDeviceRatio = adaptToDeviceRatio !== null && adaptToDeviceRatio !== void 0 ? adaptToDeviceRatio : false;\n    this._stencilStateComposer.stencilGlobal = this._stencilState;\n    PerformanceConfigurator.SetMatrixPrecision(!!options.useHighPrecisionMatrix);\n    options.antialias = antialias !== null && antialias !== void 0 ? antialias : options.antialias;\n    options.deterministicLockstep = (_a = options.deterministicLockstep) !== null && _a !== void 0 ? _a : false;\n    options.lockstepMaxSteps = (_b = options.lockstepMaxSteps) !== null && _b !== void 0 ? _b : 4;\n    options.timeStep = (_c = options.timeStep) !== null && _c !== void 0 ? _c : 1 / 60;\n    options.audioEngine = (_d = options.audioEngine) !== null && _d !== void 0 ? _d : true;\n    options.stencil = (_e = options.stencil) !== null && _e !== void 0 ? _e : true;\n    this._audioContext = (_g = (_f = options.audioEngineOptions) === null || _f === void 0 ? void 0 : _f.audioContext) !== null && _g !== void 0 ? _g : null;\n    this._audioDestination = (_j = (_h = options.audioEngineOptions) === null || _h === void 0 ? void 0 : _h.audioDestination) !== null && _j !== void 0 ? _j : null;\n    this.premultipliedAlpha = (_k = options.premultipliedAlpha) !== null && _k !== void 0 ? _k : true;\n    this.useExactSrgbConversions = (_l = options.useExactSrgbConversions) !== null && _l !== void 0 ? _l : false;\n    this._doNotHandleContextLost = !!options.doNotHandleContextLost;\n    this._isStencilEnable = options.stencil ? true : false;\n    // Viewport\n    adaptToDeviceRatio = adaptToDeviceRatio || options.adaptToDeviceRatio || false;\n    var devicePixelRatio = IsWindowObjectExist() ? window.devicePixelRatio || 1.0 : 1.0;\n    var limitDeviceRatio = options.limitDeviceRatio || devicePixelRatio;\n    this._hardwareScalingLevel = adaptToDeviceRatio ? 1.0 / Math.min(limitDeviceRatio, devicePixelRatio) : 1.0;\n    this._lastDevicePixelRatio = devicePixelRatio;\n    if (!canvasOrContext) {\n      return;\n    }\n    if (canvasOrContext.getContext) {\n      canvas = canvasOrContext;\n      this._renderingCanvas = canvas;\n      if (options.preserveDrawingBuffer === undefined) {\n        options.preserveDrawingBuffer = false;\n      }\n      if (options.xrCompatible === undefined) {\n        options.xrCompatible = true;\n      }\n      // Exceptions\n      if (navigator && navigator.userAgent) {\n        this._setupMobileChecks();\n        var ua = navigator.userAgent;\n        var _iterator = _createForOfIteratorHelper(ThinEngine.ExceptionList),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var exception = _step.value;\n            var key = exception.key;\n            var targets = exception.targets;\n            var check = new RegExp(key);\n            if (check.test(ua)) {\n              if (exception.capture && exception.captureConstraint) {\n                var capture = exception.capture;\n                var constraint = exception.captureConstraint;\n                var regex = new RegExp(capture);\n                var matches = regex.exec(ua);\n                if (matches && matches.length > 0) {\n                  var capturedValue = parseInt(matches[matches.length - 1]);\n                  if (capturedValue >= constraint) {\n                    continue;\n                  }\n                }\n              }\n              var _iterator2 = _createForOfIteratorHelper(targets),\n                _step2;\n              try {\n                for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                  var target = _step2.value;\n                  switch (target) {\n                    case \"uniformBuffer\":\n                      this.disableUniformBuffers = true;\n                      break;\n                    case \"vao\":\n                      this.disableVertexArrayObjects = true;\n                      break;\n                    case \"antialias\":\n                      options.antialias = false;\n                      break;\n                    case \"maxMSAASamples\":\n                      this._maxMSAASamplesOverride = 1;\n                      break;\n                  }\n                }\n              } catch (err) {\n                _iterator2.e(err);\n              } finally {\n                _iterator2.f();\n              }\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n      // Context lost\n      if (!this._doNotHandleContextLost) {\n        this._onContextLost = function (evt) {\n          evt.preventDefault();\n          _this._contextWasLost = true;\n          Logger.Warn(\"WebGL context lost.\");\n          _this.onContextLostObservable.notifyObservers(_this);\n        };\n        this._onContextRestored = function () {\n          _this._restoreEngineAfterContextLost(_this._initGLContext.bind(_this));\n        };\n        canvas.addEventListener(\"webglcontextlost\", this._onContextLost, false);\n        canvas.addEventListener(\"webglcontextrestored\", this._onContextRestored, false);\n        options.powerPreference = options.powerPreference || \"high-performance\";\n      }\n      // Detect if we are running on a faulty buggy desktop OS.\n      this._badDesktopOS = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n      if (this._badDesktopOS) {\n        options.xrCompatible = false;\n      }\n      // GL\n      if (!options.disableWebGL2Support) {\n        try {\n          this._gl = canvas.getContext(\"webgl2\", options) || canvas.getContext(\"experimental-webgl2\", options);\n          if (this._gl) {\n            this._webGLVersion = 2.0;\n            this._shaderPlatformName = \"WEBGL2\";\n            // Prevent weird browsers to lie (yeah that happens!)\n            if (!this._gl.deleteQuery) {\n              this._webGLVersion = 1.0;\n              this._shaderPlatformName = \"WEBGL1\";\n            }\n          }\n        } catch (e) {\n          // Do nothing\n        }\n      }\n      if (!this._gl) {\n        if (!canvas) {\n          throw new Error(\"The provided canvas is null or undefined.\");\n        }\n        try {\n          this._gl = canvas.getContext(\"webgl\", options) || canvas.getContext(\"experimental-webgl\", options);\n        } catch (e) {\n          throw new Error(\"WebGL not supported\");\n        }\n      }\n      if (!this._gl) {\n        throw new Error(\"WebGL not supported\");\n      }\n    } else {\n      this._gl = canvasOrContext;\n      this._renderingCanvas = this._gl.canvas;\n      if (this._gl.renderbufferStorageMultisample) {\n        this._webGLVersion = 2.0;\n        this._shaderPlatformName = \"WEBGL2\";\n      } else {\n        this._shaderPlatformName = \"WEBGL1\";\n      }\n      var attributes = this._gl.getContextAttributes();\n      if (attributes) {\n        options.stencil = attributes.stencil;\n      }\n    }\n    // Ensures a consistent color space unpacking of textures cross browser.\n    this._gl.pixelStorei(this._gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, this._gl.NONE);\n    if (options.useHighPrecisionFloats !== undefined) {\n      this._highPrecisionShadersAllowed = options.useHighPrecisionFloats;\n    }\n    this.resize();\n    this._initGLContext();\n    this._initFeatures();\n    // Prepare buffer pointers\n    for (var i = 0; i < this._caps.maxVertexAttribs; i++) {\n      this._currentBufferPointers[i] = new BufferPointer();\n    }\n    // Shader processor\n    this._shaderProcessor = this.webGLVersion > 1 ? new WebGL2ShaderProcessor() : new WebGLShaderProcessor();\n    // Detect if we are running on a faulty buggy OS.\n    this._badOS = /iPad/i.test(navigator.userAgent) || /iPhone/i.test(navigator.userAgent);\n    // Starting with iOS 14, we can trust the browser\n    // let matches = navigator.userAgent.match(/Version\\/(\\d+)/);\n    // if (matches && matches.length === 2) {\n    //     if (parseInt(matches[1]) >= 14) {\n    //         this._badOS = false;\n    //     }\n    // }\n    var versionToLog = \"Babylon.js v\".concat(ThinEngine.Version);\n    console.log(versionToLog + \" - \".concat(this.description));\n    // Check setAttribute in case of workers\n    if (this._renderingCanvas && this._renderingCanvas.setAttribute) {\n      this._renderingCanvas.setAttribute(\"data-engine\", versionToLog);\n    }\n  }\n  _createClass(ThinEngine, [{\n    key: \"description\",\n    get:\n    /**\n     * Returns a string describing the current engine\n     */\n    function get() {\n      var description = this.name + this.webGLVersion;\n      if (this._caps.parallelShaderCompile) {\n        description += \" - Parallel shader compilation\";\n      }\n      return description;\n    }\n    /**\n     * Gets or sets the name of the engine\n     */\n  }, {\n    key: \"name\",\n    get: function get() {\n      return this._name;\n    },\n    set: function set(value) {\n      this._name = value;\n    }\n    /**\n     * Returns the version of the engine\n     */\n  }, {\n    key: \"version\",\n    get: function get() {\n      return this._webGLVersion;\n    }\n  }, {\n    key: \"isDisposed\",\n    get: function get() {\n      return this._isDisposed;\n    }\n    /**\n     * Gets or sets the relative url used to load shaders if using the engine in non-minified mode\n     */\n  }, {\n    key: \"_getShaderProcessor\",\n    value:\n    /**\n     * @internal\n     */\n    function _getShaderProcessor(shaderLanguage) {\n      return this._shaderProcessor;\n    }\n    /**\n     * Gets or sets a boolean indicating if depth buffer should be reverse, going from far to near.\n     * This can provide greater z depth for distant objects.\n     */\n  }, {\n    key: \"useReverseDepthBuffer\",\n    get: function get() {\n      return this._useReverseDepthBuffer;\n    },\n    set: function set(useReverse) {\n      if (useReverse === this._useReverseDepthBuffer) {\n        return;\n      }\n      this._useReverseDepthBuffer = useReverse;\n      if (useReverse) {\n        this._depthCullingState.depthFunc = 518;\n      } else {\n        this._depthCullingState.depthFunc = 515;\n      }\n    }\n    /**\n     * Gets the current frame id\n     */\n  }, {\n    key: \"frameId\",\n    get: function get() {\n      return this._frameId;\n    }\n    /**\n     * Gets a boolean indicating that the engine supports uniform buffers\n     * @see https://doc.babylonjs.com/setup/support/webGL2#uniform-buffer-objets\n     */\n  }, {\n    key: \"supportsUniformBuffers\",\n    get: function get() {\n      return this.webGLVersion > 1 && !this.disableUniformBuffers;\n    }\n    /**\n     * Gets the options used for engine creation\n     * @returns EngineOptions object\n     */\n  }, {\n    key: \"getCreationOptions\",\n    value: function getCreationOptions() {\n      return this._creationOptions;\n    }\n    /** @internal */\n  }, {\n    key: \"_shouldUseHighPrecisionShader\",\n    get: function get() {\n      return !!(this._caps.highPrecisionShaderSupported && this._highPrecisionShadersAllowed);\n    }\n    /**\n     * Gets a boolean indicating that only power of 2 textures are supported\n     * Please note that you can still use non power of 2 textures but in this case the engine will forcefully convert them\n     */\n  }, {\n    key: \"needPOTTextures\",\n    get: function get() {\n      return this._webGLVersion < 2 || this.forcePOTTextures;\n    }\n    /**\n     * Gets the list of current active render loop functions\n     * @returns an array with the current render loop functions\n     */\n  }, {\n    key: \"activeRenderLoops\",\n    get: function get() {\n      return this._activeRenderLoops;\n    }\n    /**\n     * Gets or sets a boolean indicating if resources should be retained to be able to handle context lost events\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/scene/optimize_your_scene#handling-webgl-context-lost\n     */\n  }, {\n    key: \"doNotHandleContextLost\",\n    get: function get() {\n      return this._doNotHandleContextLost;\n    },\n    set: function set(value) {\n      this._doNotHandleContextLost = value;\n    }\n  }, {\n    key: \"_supportsHardwareTextureRescaling\",\n    get: function get() {\n      return false;\n    }\n    /**\n     * sets the object from which width and height will be taken from when getting render width and height\n     * Will fallback to the gl object\n     * @param dimensions the framebuffer width and height that will be used.\n     */\n  }, {\n    key: \"framebufferDimensionsObject\",\n    set: function set(dimensions) {\n      this._framebufferDimensionsObject = dimensions;\n    }\n    /**\n     * Gets the current viewport\n     */\n  }, {\n    key: \"currentViewport\",\n    get: function get() {\n      return this._cachedViewport;\n    }\n    /**\n     * Gets the default empty texture\n     */\n  }, {\n    key: \"emptyTexture\",\n    get: function get() {\n      if (!this._emptyTexture) {\n        this._emptyTexture = this.createRawTexture(new Uint8Array(4), 1, 1, 5, false, false, 1);\n      }\n      return this._emptyTexture;\n    }\n    /**\n     * Gets the default empty 3D texture\n     */\n  }, {\n    key: \"emptyTexture3D\",\n    get: function get() {\n      if (!this._emptyTexture3D) {\n        this._emptyTexture3D = this.createRawTexture3D(new Uint8Array(4), 1, 1, 1, 5, false, false, 1);\n      }\n      return this._emptyTexture3D;\n    }\n    /**\n     * Gets the default empty 2D array texture\n     */\n  }, {\n    key: \"emptyTexture2DArray\",\n    get: function get() {\n      if (!this._emptyTexture2DArray) {\n        this._emptyTexture2DArray = this.createRawTexture2DArray(new Uint8Array(4), 1, 1, 1, 5, false, false, 1);\n      }\n      return this._emptyTexture2DArray;\n    }\n    /**\n     * Gets the default empty cube texture\n     */\n  }, {\n    key: \"emptyCubeTexture\",\n    get: function get() {\n      if (!this._emptyCubeTexture) {\n        var faceData = new Uint8Array(4);\n        var cubeData = [faceData, faceData, faceData, faceData, faceData, faceData];\n        this._emptyCubeTexture = this.createRawCubeTexture(cubeData, 1, 5, 0, false, false, 1);\n      }\n      return this._emptyCubeTexture;\n    }\n    /**\n     * Gets a boolean indicating if the engine runs in WebGPU or not.\n     */\n  }, {\n    key: \"isWebGPU\",\n    get: function get() {\n      return this._isWebGPU;\n    }\n    /**\n     * Gets the shader platform name used by the effects.\n     */\n  }, {\n    key: \"shaderPlatformName\",\n    get: function get() {\n      return this._shaderPlatformName;\n    }\n    /**\n     * Enables or disables the snapshot rendering mode\n     * Note that the WebGL engine does not support snapshot rendering so setting the value won't have any effect for this engine\n     */\n  }, {\n    key: \"snapshotRendering\",\n    get: function get() {\n      return false;\n    },\n    set: function set(activate) {\n      // WebGL engine does not support snapshot rendering\n    }\n    /**\n     * Gets or sets the snapshot rendering mode\n     */\n  }, {\n    key: \"snapshotRenderingMode\",\n    get: function get() {\n      return this._snapshotRenderingMode;\n    },\n    set: function set(mode) {\n      this._snapshotRenderingMode = mode;\n    }\n    /**\n     * Creates a new snapshot at the next frame using the current snapshotRenderingMode\n     */\n  }, {\n    key: \"snapshotRenderingReset\",\n    value: function snapshotRenderingReset() {\n      this.snapshotRendering = false;\n    }\n  }, {\n    key: \"createCanvas\",\n    value:\n    /**\n     * Create a canvas. This method is overridden by other engines\n     * @param width width\n     * @param height height\n     * @returns ICanvas interface\n     */\n    function createCanvas(width, height) {\n      return ThinEngine._CreateCanvas(width, height);\n    }\n    /**\n     * Create an image to use with canvas\n     * @returns IImage interface\n     */\n  }, {\n    key: \"createCanvasImage\",\n    value: function createCanvasImage() {\n      return document.createElement(\"img\");\n    }\n  }, {\n    key: \"_setupMobileChecks\",\n    value: function _setupMobileChecks() {\n      var _this2 = this;\n      if (!(navigator && navigator.userAgent)) {\n        return;\n      }\n      // Function to check if running on mobile device\n      this._checkForMobile = function () {\n        var currentUA = navigator.userAgent;\n        _this2.hostInformation.isMobile = currentUA.indexOf(\"Mobile\") !== -1 ||\n        // Needed for iOS 13+ detection on iPad (inspired by solution from https://stackoverflow.com/questions/9038625/detect-if-device-is-ios)\n        currentUA.indexOf(\"Mac\") !== -1 && IsDocumentAvailable() && \"ontouchend\" in document;\n      };\n      // Set initial isMobile value\n      this._checkForMobile();\n      // Set up event listener to check when window is resized (used to get emulator activation to work properly)\n      if (IsWindowObjectExist()) {\n        window.addEventListener(\"resize\", this._checkForMobile);\n      }\n    }\n  }, {\n    key: \"_restoreEngineAfterContextLost\",\n    value: function _restoreEngineAfterContextLost(initEngine) {\n      var _this3 = this;\n      // Adding a timeout to avoid race condition at browser level\n      setTimeout( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _a, depthTest, depthFunc, depthMask, stencilTest;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _this3._dummyFramebuffer = null;\n              depthTest = _this3._depthCullingState.depthTest; // backup those values because the call to initEngine / wipeCaches will reset them\n              depthFunc = _this3._depthCullingState.depthFunc;\n              depthMask = _this3._depthCullingState.depthMask;\n              stencilTest = _this3._stencilState.stencilTest; // Rebuild context\n              _context.next = 7;\n              return initEngine();\n            case 7:\n              // Ensure webgl and engine states are matching\n              _this3.wipeCaches(true);\n              // Rebuild effects\n              _this3._rebuildEffects();\n              (_a = _this3._rebuildComputeEffects) === null || _a === void 0 ? void 0 : _a.call(_this3);\n              // Note:\n              //  The call to _rebuildBuffers must be made before the call to _rebuildInternalTextures because in the process of _rebuildBuffers the buffers used by the post process managers will be rebuilt\n              //  and we may need to use the post process manager of the scene during _rebuildInternalTextures (in WebGL1, non-POT textures are rescaled using a post process + post process manager of the scene)\n              // Rebuild buffers\n              _this3._rebuildBuffers();\n              // Rebuild textures\n              _this3._rebuildInternalTextures();\n              // Rebuild textures\n              _this3._rebuildRenderTargetWrappers();\n              // Reset engine states after all the buffer/textures/... have been rebuilt\n              _this3.wipeCaches(true);\n              _this3._depthCullingState.depthTest = depthTest;\n              _this3._depthCullingState.depthFunc = depthFunc;\n              _this3._depthCullingState.depthMask = depthMask;\n              _this3._stencilState.stencilTest = stencilTest;\n              Logger.Warn(_this3.name + \" context successfully restored.\");\n              _this3.onContextRestoredObservable.notifyObservers(_this3);\n              _this3._contextWasLost = false;\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      })), 0);\n    }\n    /**\n     * Shared initialization across engines types.\n     * @param canvas The canvas associated with this instance of the engine.\n     */\n  }, {\n    key: \"_sharedInit\",\n    value: function _sharedInit(canvas) {\n      this._renderingCanvas = canvas;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_getShaderProcessingContext\",\n    value: function _getShaderProcessingContext(shaderLanguage) {\n      return null;\n    }\n  }, {\n    key: \"_rebuildInternalTextures\",\n    value: function _rebuildInternalTextures() {\n      var currentState = this._internalTexturesCache.slice(); // Do a copy because the rebuild will add proxies\n      var _iterator3 = _createForOfIteratorHelper(currentState),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var internalTexture = _step3.value;\n          internalTexture._rebuild();\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  }, {\n    key: \"_rebuildRenderTargetWrappers\",\n    value: function _rebuildRenderTargetWrappers() {\n      var currentState = this._renderTargetWrapperCache.slice(); // Do a copy because the rebuild will add proxies\n      var _iterator4 = _createForOfIteratorHelper(currentState),\n        _step4;\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var renderTargetWrapper = _step4.value;\n          renderTargetWrapper._rebuild();\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n    }\n  }, {\n    key: \"_rebuildEffects\",\n    value: function _rebuildEffects() {\n      for (var key in this._compiledEffects) {\n        var effect = this._compiledEffects[key];\n        effect._pipelineContext = null; // because _prepareEffect will try to dispose this pipeline before recreating it and that would lead to webgl errors\n        effect._wasPreviouslyReady = false;\n        effect._prepareEffect();\n      }\n      Effect.ResetCache();\n    }\n    /**\n     * Gets a boolean indicating if all created effects are ready\n     * @returns true if all effects are ready\n     */\n  }, {\n    key: \"areAllEffectsReady\",\n    value: function areAllEffectsReady() {\n      for (var key in this._compiledEffects) {\n        var effect = this._compiledEffects[key];\n        if (!effect.isReady()) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }, {\n    key: \"_rebuildBuffers\",\n    value: function _rebuildBuffers() {\n      // Uniforms\n      var _iterator5 = _createForOfIteratorHelper(this._uniformBuffers),\n        _step5;\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var uniformBuffer = _step5.value;\n          uniformBuffer._rebuild();\n        }\n        // Storage buffers\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n      var _iterator6 = _createForOfIteratorHelper(this._storageBuffers),\n        _step6;\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var storageBuffer = _step6.value;\n          storageBuffer._rebuild();\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n    }\n  }, {\n    key: \"_initGLContext\",\n    value: function _initGLContext() {\n      var _a;\n      // Caps\n      this._caps = {\n        maxTexturesImageUnits: this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS),\n        maxCombinedTexturesImageUnits: this._gl.getParameter(this._gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),\n        maxVertexTextureImageUnits: this._gl.getParameter(this._gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),\n        maxTextureSize: this._gl.getParameter(this._gl.MAX_TEXTURE_SIZE),\n        maxSamples: this._webGLVersion > 1 ? this._gl.getParameter(this._gl.MAX_SAMPLES) : 1,\n        maxCubemapTextureSize: this._gl.getParameter(this._gl.MAX_CUBE_MAP_TEXTURE_SIZE),\n        maxRenderTextureSize: this._gl.getParameter(this._gl.MAX_RENDERBUFFER_SIZE),\n        maxVertexAttribs: this._gl.getParameter(this._gl.MAX_VERTEX_ATTRIBS),\n        maxVaryingVectors: this._gl.getParameter(this._gl.MAX_VARYING_VECTORS),\n        maxFragmentUniformVectors: this._gl.getParameter(this._gl.MAX_FRAGMENT_UNIFORM_VECTORS),\n        maxVertexUniformVectors: this._gl.getParameter(this._gl.MAX_VERTEX_UNIFORM_VECTORS),\n        parallelShaderCompile: this._gl.getExtension(\"KHR_parallel_shader_compile\") || undefined,\n        standardDerivatives: this._webGLVersion > 1 || this._gl.getExtension(\"OES_standard_derivatives\") !== null,\n        maxAnisotropy: 1,\n        astc: this._gl.getExtension(\"WEBGL_compressed_texture_astc\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_astc\"),\n        bptc: this._gl.getExtension(\"EXT_texture_compression_bptc\") || this._gl.getExtension(\"WEBKIT_EXT_texture_compression_bptc\"),\n        s3tc: this._gl.getExtension(\"WEBGL_compressed_texture_s3tc\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc\"),\n        // eslint-disable-next-line @typescript-eslint/naming-convention\n        s3tc_srgb: this._gl.getExtension(\"WEBGL_compressed_texture_s3tc_srgb\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc_srgb\"),\n        pvrtc: this._gl.getExtension(\"WEBGL_compressed_texture_pvrtc\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\"),\n        etc1: this._gl.getExtension(\"WEBGL_compressed_texture_etc1\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_etc1\"),\n        etc2: this._gl.getExtension(\"WEBGL_compressed_texture_etc\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_etc\") || this._gl.getExtension(\"WEBGL_compressed_texture_es3_0\"),\n        textureAnisotropicFilterExtension: this._gl.getExtension(\"EXT_texture_filter_anisotropic\") || this._gl.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\") || this._gl.getExtension(\"MOZ_EXT_texture_filter_anisotropic\"),\n        uintIndices: this._webGLVersion > 1 || this._gl.getExtension(\"OES_element_index_uint\") !== null,\n        fragmentDepthSupported: this._webGLVersion > 1 || this._gl.getExtension(\"EXT_frag_depth\") !== null,\n        highPrecisionShaderSupported: false,\n        timerQuery: this._gl.getExtension(\"EXT_disjoint_timer_query_webgl2\") || this._gl.getExtension(\"EXT_disjoint_timer_query\"),\n        supportOcclusionQuery: this._webGLVersion > 1,\n        canUseTimestampForTimerQuery: false,\n        drawBuffersExtension: false,\n        maxMSAASamples: 1,\n        colorBufferFloat: !!(this._webGLVersion > 1 && this._gl.getExtension(\"EXT_color_buffer_float\")),\n        textureFloat: this._webGLVersion > 1 || this._gl.getExtension(\"OES_texture_float\") ? true : false,\n        textureHalfFloat: this._webGLVersion > 1 || this._gl.getExtension(\"OES_texture_half_float\") ? true : false,\n        textureHalfFloatRender: false,\n        textureFloatLinearFiltering: false,\n        textureFloatRender: false,\n        textureHalfFloatLinearFiltering: false,\n        vertexArrayObject: false,\n        instancedArrays: false,\n        textureLOD: this._webGLVersion > 1 || this._gl.getExtension(\"EXT_shader_texture_lod\") ? true : false,\n        texelFetch: this._webGLVersion !== 1,\n        blendMinMax: false,\n        multiview: this._gl.getExtension(\"OVR_multiview2\"),\n        oculusMultiview: this._gl.getExtension(\"OCULUS_multiview\"),\n        depthTextureExtension: false,\n        canUseGLInstanceID: this._webGLVersion > 1,\n        canUseGLVertexID: this._webGLVersion > 1,\n        supportComputeShaders: false,\n        supportSRGBBuffers: false,\n        supportTransformFeedbacks: this._webGLVersion > 1,\n        textureMaxLevel: this._webGLVersion > 1,\n        texture2DArrayMaxLayerCount: this._webGLVersion > 1 ? this._gl.getParameter(this._gl.MAX_ARRAY_TEXTURE_LAYERS) : 128,\n        disableMorphTargetTexture: false\n      };\n      // Infos\n      this._glVersion = this._gl.getParameter(this._gl.VERSION);\n      var rendererInfo = this._gl.getExtension(\"WEBGL_debug_renderer_info\");\n      if (rendererInfo != null) {\n        this._glRenderer = this._gl.getParameter(rendererInfo.UNMASKED_RENDERER_WEBGL);\n        this._glVendor = this._gl.getParameter(rendererInfo.UNMASKED_VENDOR_WEBGL);\n      }\n      if (!this._glVendor) {\n        this._glVendor = this._gl.getParameter(this._gl.VENDOR) || \"Unknown vendor\";\n      }\n      if (!this._glRenderer) {\n        this._glRenderer = this._gl.getParameter(this._gl.RENDERER) || \"Unknown renderer\";\n      }\n      // Constants\n      if (this._gl.HALF_FLOAT_OES !== 0x8d61) {\n        this._gl.HALF_FLOAT_OES = 0x8d61; // Half floating-point type (16-bit).\n      }\n\n      if (this._gl.RGBA16F !== 0x881a) {\n        this._gl.RGBA16F = 0x881a; // RGBA 16-bit floating-point color-renderable internal sized format.\n      }\n\n      if (this._gl.RGBA32F !== 0x8814) {\n        this._gl.RGBA32F = 0x8814; // RGBA 32-bit floating-point color-renderable internal sized format.\n      }\n\n      if (this._gl.DEPTH24_STENCIL8 !== 35056) {\n        this._gl.DEPTH24_STENCIL8 = 35056;\n      }\n      // Extensions\n      if (this._caps.timerQuery) {\n        if (this._webGLVersion === 1) {\n          this._gl.getQuery = this._caps.timerQuery.getQueryEXT.bind(this._caps.timerQuery);\n        }\n        this._caps.canUseTimestampForTimerQuery = ((_a = this._gl.getQuery(this._caps.timerQuery.TIMESTAMP_EXT, this._caps.timerQuery.QUERY_COUNTER_BITS_EXT)) !== null && _a !== void 0 ? _a : 0) > 0;\n      }\n      this._caps.maxAnisotropy = this._caps.textureAnisotropicFilterExtension ? this._gl.getParameter(this._caps.textureAnisotropicFilterExtension.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0;\n      this._caps.textureFloatLinearFiltering = this._caps.textureFloat && this._gl.getExtension(\"OES_texture_float_linear\") ? true : false;\n      this._caps.textureFloatRender = this._caps.textureFloat && this._canRenderToFloatFramebuffer() ? true : false;\n      this._caps.textureHalfFloatLinearFiltering = this._webGLVersion > 1 || this._caps.textureHalfFloat && this._gl.getExtension(\"OES_texture_half_float_linear\") ? true : false;\n      // Compressed formats\n      if (this._caps.astc) {\n        this._gl.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR = this._caps.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR;\n      }\n      if (this._caps.bptc) {\n        this._gl.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT = this._caps.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT;\n      }\n      if (this._caps.s3tc_srgb) {\n        this._gl.COMPRESSED_SRGB_S3TC_DXT1_EXT = this._caps.s3tc_srgb.COMPRESSED_SRGB_S3TC_DXT1_EXT;\n        this._gl.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT = this._caps.s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;\n        this._gl.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT = this._caps.s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;\n      }\n      if (this._caps.etc2) {\n        this._gl.COMPRESSED_SRGB8_ETC2 = this._caps.etc2.COMPRESSED_SRGB8_ETC2;\n        this._gl.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC = this._caps.etc2.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC;\n      }\n      // Checks if some of the format renders first to allow the use of webgl inspector.\n      if (this._webGLVersion > 1) {\n        if (this._gl.HALF_FLOAT_OES !== 0x140b) {\n          this._gl.HALF_FLOAT_OES = 0x140b;\n        }\n      }\n      this._caps.textureHalfFloatRender = this._caps.textureHalfFloat && this._canRenderToHalfFloatFramebuffer();\n      // Draw buffers\n      if (this._webGLVersion > 1) {\n        this._caps.drawBuffersExtension = true;\n        this._caps.maxMSAASamples = this._maxMSAASamplesOverride !== null ? this._maxMSAASamplesOverride : this._gl.getParameter(this._gl.MAX_SAMPLES);\n      } else {\n        var drawBuffersExtension = this._gl.getExtension(\"WEBGL_draw_buffers\");\n        if (drawBuffersExtension !== null) {\n          this._caps.drawBuffersExtension = true;\n          this._gl.drawBuffers = drawBuffersExtension.drawBuffersWEBGL.bind(drawBuffersExtension);\n          this._gl.DRAW_FRAMEBUFFER = this._gl.FRAMEBUFFER;\n          for (var i = 0; i < 16; i++) {\n            this._gl[\"COLOR_ATTACHMENT\" + i + \"_WEBGL\"] = drawBuffersExtension[\"COLOR_ATTACHMENT\" + i + \"_WEBGL\"];\n          }\n        }\n      }\n      // Depth Texture\n      if (this._webGLVersion > 1) {\n        this._caps.depthTextureExtension = true;\n      } else {\n        var depthTextureExtension = this._gl.getExtension(\"WEBGL_depth_texture\");\n        if (depthTextureExtension != null) {\n          this._caps.depthTextureExtension = true;\n          this._gl.UNSIGNED_INT_24_8 = depthTextureExtension.UNSIGNED_INT_24_8_WEBGL;\n        }\n      }\n      // Vertex array object\n      if (this.disableVertexArrayObjects) {\n        this._caps.vertexArrayObject = false;\n      } else if (this._webGLVersion > 1) {\n        this._caps.vertexArrayObject = true;\n      } else {\n        var vertexArrayObjectExtension = this._gl.getExtension(\"OES_vertex_array_object\");\n        if (vertexArrayObjectExtension != null) {\n          this._caps.vertexArrayObject = true;\n          this._gl.createVertexArray = vertexArrayObjectExtension.createVertexArrayOES.bind(vertexArrayObjectExtension);\n          this._gl.bindVertexArray = vertexArrayObjectExtension.bindVertexArrayOES.bind(vertexArrayObjectExtension);\n          this._gl.deleteVertexArray = vertexArrayObjectExtension.deleteVertexArrayOES.bind(vertexArrayObjectExtension);\n        }\n      }\n      // Instances count\n      if (this._webGLVersion > 1) {\n        this._caps.instancedArrays = true;\n      } else {\n        var instanceExtension = this._gl.getExtension(\"ANGLE_instanced_arrays\");\n        if (instanceExtension != null) {\n          this._caps.instancedArrays = true;\n          this._gl.drawArraysInstanced = instanceExtension.drawArraysInstancedANGLE.bind(instanceExtension);\n          this._gl.drawElementsInstanced = instanceExtension.drawElementsInstancedANGLE.bind(instanceExtension);\n          this._gl.vertexAttribDivisor = instanceExtension.vertexAttribDivisorANGLE.bind(instanceExtension);\n        } else {\n          this._caps.instancedArrays = false;\n        }\n      }\n      if (this._gl.getShaderPrecisionFormat) {\n        var vertexhighp = this._gl.getShaderPrecisionFormat(this._gl.VERTEX_SHADER, this._gl.HIGH_FLOAT);\n        var fragmenthighp = this._gl.getShaderPrecisionFormat(this._gl.FRAGMENT_SHADER, this._gl.HIGH_FLOAT);\n        if (vertexhighp && fragmenthighp) {\n          this._caps.highPrecisionShaderSupported = vertexhighp.precision !== 0 && fragmenthighp.precision !== 0;\n        }\n      }\n      if (this._webGLVersion > 1) {\n        this._caps.blendMinMax = true;\n      } else {\n        var blendMinMaxExtension = this._gl.getExtension(\"EXT_blend_minmax\");\n        if (blendMinMaxExtension != null) {\n          this._caps.blendMinMax = true;\n          this._gl.MAX = blendMinMaxExtension.MAX_EXT;\n          this._gl.MIN = blendMinMaxExtension.MIN_EXT;\n        }\n      }\n      // sRGB buffers\n      // only run this if not already set to true (in the constructor, for example)\n      if (!this._caps.supportSRGBBuffers) {\n        if (this._webGLVersion > 1) {\n          this._caps.supportSRGBBuffers = true;\n        } else {\n          var sRGBExtension = this._gl.getExtension(\"EXT_sRGB\");\n          if (sRGBExtension != null) {\n            this._caps.supportSRGBBuffers = true;\n            this._gl.SRGB = sRGBExtension.SRGB_EXT;\n            this._gl.SRGB8 = sRGBExtension.SRGB_ALPHA_EXT;\n            this._gl.SRGB8_ALPHA8 = sRGBExtension.SRGB_ALPHA_EXT;\n          }\n        }\n        // take into account the forced state that was provided in options\n        // When the issue in angle/chrome is fixed the flag should be taken into account only when it is explicitly defined\n        this._caps.supportSRGBBuffers = this._caps.supportSRGBBuffers && !!(this._creationOptions && this._creationOptions.forceSRGBBufferSupportState);\n      }\n      // Depth buffer\n      this._depthCullingState.depthTest = true;\n      this._depthCullingState.depthFunc = this._gl.LEQUAL;\n      this._depthCullingState.depthMask = true;\n      // Texture maps\n      this._maxSimultaneousTextures = this._caps.maxCombinedTexturesImageUnits;\n      for (var slot = 0; slot < this._maxSimultaneousTextures; slot++) {\n        this._nextFreeTextureSlots.push(slot);\n      }\n      if (this._glRenderer === \"Mali-G72\") {\n        // Overcome a bug when using a texture to store morph targets on Mali-G72\n        this._caps.disableMorphTargetTexture = true;\n      }\n    }\n  }, {\n    key: \"_initFeatures\",\n    value: function _initFeatures() {\n      this._features = {\n        forceBitmapOverHTMLImageElement: false,\n        supportRenderAndCopyToLodForFloatTextures: this._webGLVersion !== 1,\n        supportDepthStencilTexture: this._webGLVersion !== 1,\n        supportShadowSamplers: this._webGLVersion !== 1,\n        uniformBufferHardCheckMatrix: false,\n        allowTexturePrefiltering: this._webGLVersion !== 1,\n        trackUbosInFrame: false,\n        checkUbosContentBeforeUpload: false,\n        supportCSM: this._webGLVersion !== 1,\n        basisNeedsPOT: this._webGLVersion === 1,\n        support3DTextures: this._webGLVersion !== 1,\n        needTypeSuffixInShaderConstants: this._webGLVersion !== 1,\n        supportMSAA: this._webGLVersion !== 1,\n        supportSSAO2: this._webGLVersion !== 1,\n        supportExtendedTextureFormats: this._webGLVersion !== 1,\n        supportSwitchCaseInShader: this._webGLVersion !== 1,\n        supportSyncTextureRead: true,\n        needsInvertingBitmap: true,\n        useUBOBindingCache: true,\n        needShaderCodeInlining: false,\n        needToAlwaysBindUniformBuffers: false,\n        supportRenderPasses: false,\n        supportSpriteInstancing: true,\n        _collectUbosUpdatedInFrame: false\n      };\n    }\n    /**\n     * Gets version of the current webGL context\n     * Keep it for back compat - use version instead\n     */\n  }, {\n    key: \"webGLVersion\",\n    get: function get() {\n      return this._webGLVersion;\n    }\n    /**\n     * Gets a string identifying the name of the class\n     * @returns \"Engine\" string\n     */\n  }, {\n    key: \"getClassName\",\n    value: function getClassName() {\n      return \"ThinEngine\";\n    }\n    /**\n     * Returns true if the stencil buffer has been enabled through the creation option of the context.\n     */\n  }, {\n    key: \"isStencilEnable\",\n    get: function get() {\n      return this._isStencilEnable;\n    }\n    /** @internal */\n  }, {\n    key: \"_prepareWorkingCanvas\",\n    value: function _prepareWorkingCanvas() {\n      if (this._workingCanvas) {\n        return;\n      }\n      this._workingCanvas = this.createCanvas(1, 1);\n      var context = this._workingCanvas.getContext(\"2d\");\n      if (context) {\n        this._workingContext = context;\n      }\n    }\n    /**\n     * Reset the texture cache to empty state\n     */\n  }, {\n    key: \"resetTextureCache\",\n    value: function resetTextureCache() {\n      for (var key in this._boundTexturesCache) {\n        if (!Object.prototype.hasOwnProperty.call(this._boundTexturesCache, key)) {\n          continue;\n        }\n        this._boundTexturesCache[key] = null;\n      }\n      this._currentTextureChannel = -1;\n    }\n    /**\n     * Gets an object containing information about the current engine context\n     * @returns an object containing the vendor, the renderer and the version of the current engine context\n     */\n  }, {\n    key: \"getInfo\",\n    value: function getInfo() {\n      return this.getGlInfo();\n    }\n    /**\n     * Gets an object containing information about the current webGL context\n     * @returns an object containing the vendor, the renderer and the version of the current webGL context\n     */\n  }, {\n    key: \"getGlInfo\",\n    value: function getGlInfo() {\n      return {\n        vendor: this._glVendor,\n        renderer: this._glRenderer,\n        version: this._glVersion\n      };\n    }\n    /**\n     * Defines the hardware scaling level.\n     * By default the hardware scaling level is computed from the window device ratio.\n     * if level = 1 then the engine will render at the exact resolution of the canvas. If level = 0.5 then the engine will render at twice the size of the canvas.\n     * @param level defines the level to use\n     */\n  }, {\n    key: \"setHardwareScalingLevel\",\n    value: function setHardwareScalingLevel(level) {\n      this._hardwareScalingLevel = level;\n      this.resize();\n    }\n    /**\n     * Gets the current hardware scaling level.\n     * By default the hardware scaling level is computed from the window device ratio.\n     * if level = 1 then the engine will render at the exact resolution of the canvas. If level = 0.5 then the engine will render at twice the size of the canvas.\n     * @returns a number indicating the current hardware scaling level\n     */\n  }, {\n    key: \"getHardwareScalingLevel\",\n    value: function getHardwareScalingLevel() {\n      return this._hardwareScalingLevel;\n    }\n    /**\n     * Gets the list of loaded textures\n     * @returns an array containing all loaded textures\n     */\n  }, {\n    key: \"getLoadedTexturesCache\",\n    value: function getLoadedTexturesCache() {\n      return this._internalTexturesCache;\n    }\n    /**\n     * Gets the object containing all engine capabilities\n     * @returns the EngineCapabilities object\n     */\n  }, {\n    key: \"getCaps\",\n    value: function getCaps() {\n      return this._caps;\n    }\n    /**\n     * stop executing a render loop function and remove it from the execution array\n     * @param renderFunction defines the function to be removed. If not provided all functions will be removed.\n     */\n  }, {\n    key: \"stopRenderLoop\",\n    value: function stopRenderLoop(renderFunction) {\n      if (!renderFunction) {\n        this._activeRenderLoops.length = 0;\n        return;\n      }\n      var index = this._activeRenderLoops.indexOf(renderFunction);\n      if (index >= 0) {\n        this._activeRenderLoops.splice(index, 1);\n      }\n    }\n    /** @internal */\n  }, {\n    key: \"_renderLoop\",\n    value: function _renderLoop() {\n      if (!this._contextWasLost) {\n        var shouldRender = true;\n        if (this._isDisposed || !this.renderEvenInBackground && this._windowIsBackground) {\n          shouldRender = false;\n        }\n        if (shouldRender) {\n          // Start new frame\n          this.beginFrame();\n          for (var index = 0; index < this._activeRenderLoops.length; index++) {\n            var renderFunction = this._activeRenderLoops[index];\n            renderFunction();\n          }\n          // Present\n          this.endFrame();\n        }\n      }\n      if (this._activeRenderLoops.length > 0) {\n        this._frameHandler = this._queueNewFrame(this._boundRenderFunction, this.getHostWindow());\n      } else {\n        this._renderingQueueLaunched = false;\n      }\n    }\n    /**\n     * Gets the HTML canvas attached with the current webGL context\n     * @returns a HTML canvas\n     */\n  }, {\n    key: \"getRenderingCanvas\",\n    value: function getRenderingCanvas() {\n      return this._renderingCanvas;\n    }\n    /**\n     * Gets the audio context specified in engine initialization options\n     * @returns an Audio Context\n     */\n  }, {\n    key: \"getAudioContext\",\n    value: function getAudioContext() {\n      return this._audioContext;\n    }\n    /**\n     * Gets the audio destination specified in engine initialization options\n     * @returns an audio destination node\n     */\n  }, {\n    key: \"getAudioDestination\",\n    value: function getAudioDestination() {\n      return this._audioDestination;\n    }\n    /**\n     * Gets host window\n     * @returns the host window object\n     */\n  }, {\n    key: \"getHostWindow\",\n    value: function getHostWindow() {\n      if (!IsWindowObjectExist()) {\n        return null;\n      }\n      if (this._renderingCanvas && this._renderingCanvas.ownerDocument && this._renderingCanvas.ownerDocument.defaultView) {\n        return this._renderingCanvas.ownerDocument.defaultView;\n      }\n      return window;\n    }\n    /**\n     * Gets the current render width\n     * @param useScreen defines if screen size must be used (or the current render target if any)\n     * @returns a number defining the current render width\n     */\n  }, {\n    key: \"getRenderWidth\",\n    value: function getRenderWidth() {\n      var useScreen = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (!useScreen && this._currentRenderTarget) {\n        return this._currentRenderTarget.width;\n      }\n      return this._framebufferDimensionsObject ? this._framebufferDimensionsObject.framebufferWidth : this._gl.drawingBufferWidth;\n    }\n    /**\n     * Gets the current render height\n     * @param useScreen defines if screen size must be used (or the current render target if any)\n     * @returns a number defining the current render height\n     */\n  }, {\n    key: \"getRenderHeight\",\n    value: function getRenderHeight() {\n      var useScreen = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (!useScreen && this._currentRenderTarget) {\n        return this._currentRenderTarget.height;\n      }\n      return this._framebufferDimensionsObject ? this._framebufferDimensionsObject.framebufferHeight : this._gl.drawingBufferHeight;\n    }\n    /**\n     * Can be used to override the current requestAnimationFrame requester.\n     * @internal\n     */\n  }, {\n    key: \"_queueNewFrame\",\n    value: function _queueNewFrame(bindedRenderFunction, requester) {\n      return ThinEngine.QueueNewFrame(bindedRenderFunction, requester);\n    }\n    /**\n     * Register and execute a render loop. The engine can have more than one render function\n     * @param renderFunction defines the function to continuously execute\n     */\n  }, {\n    key: \"runRenderLoop\",\n    value: function runRenderLoop(renderFunction) {\n      if (this._activeRenderLoops.indexOf(renderFunction) !== -1) {\n        return;\n      }\n      this._activeRenderLoops.push(renderFunction);\n      if (!this._renderingQueueLaunched) {\n        this._renderingQueueLaunched = true;\n        this._boundRenderFunction = this._renderLoop.bind(this);\n        this._frameHandler = this._queueNewFrame(this._boundRenderFunction, this.getHostWindow());\n      }\n    }\n    /**\n     * Clear the current render buffer or the current render target (if any is set up)\n     * @param color defines the color to use\n     * @param backBuffer defines if the back buffer must be cleared\n     * @param depth defines if the depth buffer must be cleared\n     * @param stencil defines if the stencil buffer must be cleared\n     */\n  }, {\n    key: \"clear\",\n    value: function clear(color, backBuffer, depth) {\n      var stencil = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var useStencilGlobalOnly = this.stencilStateComposer.useStencilGlobalOnly;\n      this.stencilStateComposer.useStencilGlobalOnly = true; // make sure the stencil mask is coming from the global stencil and not from a material (effect) which would currently be in effect\n      this.applyStates();\n      this.stencilStateComposer.useStencilGlobalOnly = useStencilGlobalOnly;\n      var mode = 0;\n      if (backBuffer && color) {\n        this._gl.clearColor(color.r, color.g, color.b, color.a !== undefined ? color.a : 1.0);\n        mode |= this._gl.COLOR_BUFFER_BIT;\n      }\n      if (depth) {\n        if (this.useReverseDepthBuffer) {\n          this._depthCullingState.depthFunc = this._gl.GEQUAL;\n          this._gl.clearDepth(0.0);\n        } else {\n          this._gl.clearDepth(1.0);\n        }\n        mode |= this._gl.DEPTH_BUFFER_BIT;\n      }\n      if (stencil) {\n        this._gl.clearStencil(0);\n        mode |= this._gl.STENCIL_BUFFER_BIT;\n      }\n      this._gl.clear(mode);\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_viewport\",\n    value: function _viewport(x, y, width, height) {\n      if (x !== this._viewportCached.x || y !== this._viewportCached.y || width !== this._viewportCached.z || height !== this._viewportCached.w) {\n        this._viewportCached.x = x;\n        this._viewportCached.y = y;\n        this._viewportCached.z = width;\n        this._viewportCached.w = height;\n        this._gl.viewport(x, y, width, height);\n      }\n    }\n    /**\n     * Set the WebGL's viewport\n     * @param viewport defines the viewport element to be used\n     * @param requiredWidth defines the width required for rendering. If not provided the rendering canvas' width is used\n     * @param requiredHeight defines the height required for rendering. If not provided the rendering canvas' height is used\n     */\n  }, {\n    key: \"setViewport\",\n    value: function setViewport(viewport, requiredWidth, requiredHeight) {\n      var width = requiredWidth || this.getRenderWidth();\n      var height = requiredHeight || this.getRenderHeight();\n      var x = viewport.x || 0;\n      var y = viewport.y || 0;\n      this._cachedViewport = viewport;\n      this._viewport(x * width, y * height, width * viewport.width, height * viewport.height);\n    }\n    /**\n     * Begin a new frame\n     */\n  }, {\n    key: \"beginFrame\",\n    value: function beginFrame() {}\n    /**\n     * Enf the current frame\n     */\n  }, {\n    key: \"endFrame\",\n    value: function endFrame() {\n      // Force a flush in case we are using a bad OS.\n      if (this._badOS) {\n        this.flushFramebuffer();\n      }\n      this._frameId++;\n    }\n    /**\n     * Resize the view according to the canvas' size\n     * @param forceSetSize true to force setting the sizes of the underlying canvas\n     */\n  }, {\n    key: \"resize\",\n    value: function resize() {\n      var forceSetSize = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var width;\n      var height;\n      // Requery hardware scaling level to handle zoomed-in resizing.\n      if (this.adaptToDeviceRatio) {\n        var devicePixelRatio = IsWindowObjectExist() ? window.devicePixelRatio || 1.0 : 1.0;\n        var changeRatio = this._lastDevicePixelRatio / devicePixelRatio;\n        this._lastDevicePixelRatio = devicePixelRatio;\n        this._hardwareScalingLevel *= changeRatio;\n      }\n      if (IsWindowObjectExist()) {\n        width = this._renderingCanvas ? this._renderingCanvas.clientWidth || this._renderingCanvas.width : window.innerWidth;\n        height = this._renderingCanvas ? this._renderingCanvas.clientHeight || this._renderingCanvas.height : window.innerHeight;\n      } else {\n        width = this._renderingCanvas ? this._renderingCanvas.width : 100;\n        height = this._renderingCanvas ? this._renderingCanvas.height : 100;\n      }\n      this.setSize(width / this._hardwareScalingLevel, height / this._hardwareScalingLevel, forceSetSize);\n    }\n    /**\n     * Force a specific size of the canvas\n     * @param width defines the new canvas' width\n     * @param height defines the new canvas' height\n     * @param forceSetSize true to force setting the sizes of the underlying canvas\n     * @returns true if the size was changed\n     */\n  }, {\n    key: \"setSize\",\n    value: function setSize(width, height) {\n      var forceSetSize = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      if (!this._renderingCanvas) {\n        return false;\n      }\n      width = width | 0;\n      height = height | 0;\n      if (!forceSetSize && this._renderingCanvas.width === width && this._renderingCanvas.height === height) {\n        return false;\n      }\n      this._renderingCanvas.width = width;\n      this._renderingCanvas.height = height;\n      return true;\n    }\n    /**\n     * Binds the frame buffer to the specified texture.\n     * @param rtWrapper The render target wrapper to render to\n     * @param faceIndex The face of the texture to render to in case of cube texture and if the render target wrapper is not a multi render target\n     * @param requiredWidth The width of the target to render to\n     * @param requiredHeight The height of the target to render to\n     * @param forceFullscreenViewport Forces the viewport to be the entire texture/screen if true\n     * @param lodLevel Defines the lod level to bind to the frame buffer\n     * @param layer Defines the 2d array index to bind to the frame buffer if the render target wrapper is not a multi render target\n     */\n  }, {\n    key: \"bindFramebuffer\",\n    value: function bindFramebuffer(rtWrapper) {\n      var faceIndex = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var requiredWidth = arguments.length > 2 ? arguments[2] : undefined;\n      var requiredHeight = arguments.length > 3 ? arguments[3] : undefined;\n      var forceFullscreenViewport = arguments.length > 4 ? arguments[4] : undefined;\n      var lodLevel = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n      var layer = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n      var _a, _b, _c, _d, _e;\n      var webglRTWrapper = rtWrapper;\n      if (this._currentRenderTarget) {\n        this.unBindFramebuffer(this._currentRenderTarget);\n      }\n      this._currentRenderTarget = rtWrapper;\n      this._bindUnboundFramebuffer(webglRTWrapper._MSAAFramebuffer ? webglRTWrapper._MSAAFramebuffer : webglRTWrapper._framebuffer);\n      var gl = this._gl;\n      if (!rtWrapper.isMulti) {\n        if (rtWrapper.is2DArray) {\n          gl.framebufferTextureLayer(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, (_a = rtWrapper.texture._hardwareTexture) === null || _a === void 0 ? void 0 : _a.underlyingResource, lodLevel, layer);\n        } else if (rtWrapper.isCube) {\n          gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex, (_b = rtWrapper.texture._hardwareTexture) === null || _b === void 0 ? void 0 : _b.underlyingResource, lodLevel);\n        }\n      }\n      var depthStencilTexture = rtWrapper._depthStencilTexture;\n      if (depthStencilTexture) {\n        var attachment = rtWrapper._depthStencilTextureWithStencil ? gl.DEPTH_STENCIL_ATTACHMENT : gl.DEPTH_ATTACHMENT;\n        if (rtWrapper.is2DArray) {\n          gl.framebufferTextureLayer(gl.FRAMEBUFFER, attachment, (_c = depthStencilTexture._hardwareTexture) === null || _c === void 0 ? void 0 : _c.underlyingResource, lodLevel, layer);\n        } else if (rtWrapper.isCube) {\n          gl.framebufferTexture2D(gl.FRAMEBUFFER, attachment, gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex, (_d = depthStencilTexture._hardwareTexture) === null || _d === void 0 ? void 0 : _d.underlyingResource, lodLevel);\n        } else {\n          gl.framebufferTexture2D(gl.FRAMEBUFFER, attachment, gl.TEXTURE_2D, (_e = depthStencilTexture._hardwareTexture) === null || _e === void 0 ? void 0 : _e.underlyingResource, lodLevel);\n        }\n      }\n      if (this._cachedViewport && !forceFullscreenViewport) {\n        this.setViewport(this._cachedViewport, requiredWidth, requiredHeight);\n      } else {\n        if (!requiredWidth) {\n          requiredWidth = rtWrapper.width;\n          if (lodLevel) {\n            requiredWidth = requiredWidth / Math.pow(2, lodLevel);\n          }\n        }\n        if (!requiredHeight) {\n          requiredHeight = rtWrapper.height;\n          if (lodLevel) {\n            requiredHeight = requiredHeight / Math.pow(2, lodLevel);\n          }\n        }\n        this._viewport(0, 0, requiredWidth, requiredHeight);\n      }\n      this.wipeCaches();\n    }\n    /**\n     * Set various states to the webGL context\n     * @param culling defines culling state: true to enable culling, false to disable it\n     * @param zOffset defines the value to apply to zOffset (0 by default)\n     * @param force defines if states must be applied even if cache is up to date\n     * @param reverseSide defines if culling must be reversed (CCW if false, CW if true)\n     * @param cullBackFaces true to cull back faces, false to cull front faces (if culling is enabled)\n     * @param stencil stencil states to set\n     * @param zOffsetUnits defines the value to apply to zOffsetUnits (0 by default)\n     */\n  }, {\n    key: \"setState\",\n    value: function setState(culling) {\n      var zOffset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var force = arguments.length > 2 ? arguments[2] : undefined;\n      var reverseSide = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var cullBackFaces = arguments.length > 4 ? arguments[4] : undefined;\n      var stencil = arguments.length > 5 ? arguments[5] : undefined;\n      var zOffsetUnits = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n      var _a, _b;\n      // Culling\n      if (this._depthCullingState.cull !== culling || force) {\n        this._depthCullingState.cull = culling;\n      }\n      // Cull face\n      var cullFace = ((_b = (_a = this.cullBackFaces) !== null && _a !== void 0 ? _a : cullBackFaces) !== null && _b !== void 0 ? _b : true) ? this._gl.BACK : this._gl.FRONT;\n      if (this._depthCullingState.cullFace !== cullFace || force) {\n        this._depthCullingState.cullFace = cullFace;\n      }\n      // Z offset\n      this.setZOffset(zOffset);\n      this.setZOffsetUnits(zOffsetUnits);\n      // Front face\n      var frontFace = reverseSide ? this._gl.CW : this._gl.CCW;\n      if (this._depthCullingState.frontFace !== frontFace || force) {\n        this._depthCullingState.frontFace = frontFace;\n      }\n      this._stencilStateComposer.stencilMaterial = stencil;\n    }\n    /**\n     * Gets a boolean indicating if depth testing is enabled\n     * @returns the current state\n     */\n  }, {\n    key: \"getDepthBuffer\",\n    value: function getDepthBuffer() {\n      return this._depthCullingState.depthTest;\n    }\n    /**\n     * Enable or disable depth buffering\n     * @param enable defines the state to set\n     */\n  }, {\n    key: \"setDepthBuffer\",\n    value: function setDepthBuffer(enable) {\n      this._depthCullingState.depthTest = enable;\n    }\n    /**\n     * Set the z offset Factor to apply to current rendering\n     * @param value defines the offset to apply\n     */\n  }, {\n    key: \"setZOffset\",\n    value: function setZOffset(value) {\n      this._depthCullingState.zOffset = this.useReverseDepthBuffer ? -value : value;\n    }\n    /**\n     * Gets the current value of the zOffset Factor\n     * @returns the current zOffset Factor state\n     */\n  }, {\n    key: \"getZOffset\",\n    value: function getZOffset() {\n      var zOffset = this._depthCullingState.zOffset;\n      return this.useReverseDepthBuffer ? -zOffset : zOffset;\n    }\n    /**\n     * Set the z offset Units to apply to current rendering\n     * @param value defines the offset to apply\n     */\n  }, {\n    key: \"setZOffsetUnits\",\n    value: function setZOffsetUnits(value) {\n      this._depthCullingState.zOffsetUnits = this.useReverseDepthBuffer ? -value : value;\n    }\n    /**\n     * Gets the current value of the zOffset Units\n     * @returns the current zOffset Units state\n     */\n  }, {\n    key: \"getZOffsetUnits\",\n    value: function getZOffsetUnits() {\n      var zOffsetUnits = this._depthCullingState.zOffsetUnits;\n      return this.useReverseDepthBuffer ? -zOffsetUnits : zOffsetUnits;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_bindUnboundFramebuffer\",\n    value: function _bindUnboundFramebuffer(framebuffer) {\n      if (this._currentFramebuffer !== framebuffer) {\n        this._gl.bindFramebuffer(this._gl.FRAMEBUFFER, framebuffer);\n        this._currentFramebuffer = framebuffer;\n      }\n    }\n    /** @internal */\n  }, {\n    key: \"_currentFrameBufferIsDefaultFrameBuffer\",\n    value: function _currentFrameBufferIsDefaultFrameBuffer() {\n      return this._currentFramebuffer === null;\n    }\n    /**\n     * Generates the mipmaps for a texture\n     * @param texture texture to generate the mipmaps for\n     */\n  }, {\n    key: \"generateMipmaps\",\n    value: function generateMipmaps(texture) {\n      this._bindTextureDirectly(this._gl.TEXTURE_2D, texture, true);\n      this._gl.generateMipmap(this._gl.TEXTURE_2D);\n      this._bindTextureDirectly(this._gl.TEXTURE_2D, null);\n    }\n    /**\n     * Unbind the current render target texture from the webGL context\n     * @param texture defines the render target wrapper to unbind\n     * @param disableGenerateMipMaps defines a boolean indicating that mipmaps must not be generated\n     * @param onBeforeUnbind defines a function which will be called before the effective unbind\n     */\n  }, {\n    key: \"unBindFramebuffer\",\n    value: function unBindFramebuffer(texture) {\n      var disableGenerateMipMaps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var onBeforeUnbind = arguments.length > 2 ? arguments[2] : undefined;\n      var _a;\n      var webglRTWrapper = texture;\n      this._currentRenderTarget = null;\n      // If MSAA, we need to bitblt back to main texture\n      var gl = this._gl;\n      if (webglRTWrapper._MSAAFramebuffer) {\n        if (texture.isMulti) {\n          // This texture is part of a MRT texture, we need to treat all attachments\n          this.unBindMultiColorAttachmentFramebuffer(texture, disableGenerateMipMaps, onBeforeUnbind);\n          return;\n        }\n        gl.bindFramebuffer(gl.READ_FRAMEBUFFER, webglRTWrapper._MSAAFramebuffer);\n        gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, webglRTWrapper._framebuffer);\n        gl.blitFramebuffer(0, 0, texture.width, texture.height, 0, 0, texture.width, texture.height, gl.COLOR_BUFFER_BIT, gl.NEAREST);\n      }\n      if (((_a = texture.texture) === null || _a === void 0 ? void 0 : _a.generateMipMaps) && !disableGenerateMipMaps && !texture.isCube) {\n        this.generateMipmaps(texture.texture);\n      }\n      if (onBeforeUnbind) {\n        if (webglRTWrapper._MSAAFramebuffer) {\n          // Bind the correct framebuffer\n          this._bindUnboundFramebuffer(webglRTWrapper._framebuffer);\n        }\n        onBeforeUnbind();\n      }\n      this._bindUnboundFramebuffer(null);\n    }\n    /**\n     * Force a webGL flush (ie. a flush of all waiting webGL commands)\n     */\n  }, {\n    key: \"flushFramebuffer\",\n    value: function flushFramebuffer() {\n      this._gl.flush();\n    }\n    /**\n     * Unbind the current render target and bind the default framebuffer\n     */\n  }, {\n    key: \"restoreDefaultFramebuffer\",\n    value: function restoreDefaultFramebuffer() {\n      if (this._currentRenderTarget) {\n        this.unBindFramebuffer(this._currentRenderTarget);\n      } else {\n        this._bindUnboundFramebuffer(null);\n      }\n      if (this._cachedViewport) {\n        this.setViewport(this._cachedViewport);\n      }\n      this.wipeCaches();\n    }\n    // VBOs\n    /** @internal */\n  }, {\n    key: \"_resetVertexBufferBinding\",\n    value: function _resetVertexBufferBinding() {\n      this.bindArrayBuffer(null);\n      this._cachedVertexBuffers = null;\n    }\n    /**\n     * Creates a vertex buffer\n     * @param data the data for the vertex buffer\n     * @returns the new WebGL static buffer\n     */\n  }, {\n    key: \"createVertexBuffer\",\n    value: function createVertexBuffer(data) {\n      return this._createVertexBuffer(data, this._gl.STATIC_DRAW);\n    }\n  }, {\n    key: \"_createVertexBuffer\",\n    value: function _createVertexBuffer(data, usage) {\n      var vbo = this._gl.createBuffer();\n      if (!vbo) {\n        throw new Error(\"Unable to create vertex buffer\");\n      }\n      var dataBuffer = new WebGLDataBuffer(vbo);\n      this.bindArrayBuffer(dataBuffer);\n      if (data instanceof Array) {\n        this._gl.bufferData(this._gl.ARRAY_BUFFER, new Float32Array(data), usage);\n      } else {\n        this._gl.bufferData(this._gl.ARRAY_BUFFER, data, usage);\n      }\n      this._resetVertexBufferBinding();\n      dataBuffer.references = 1;\n      return dataBuffer;\n    }\n    /**\n     * Creates a dynamic vertex buffer\n     * @param data the data for the dynamic vertex buffer\n     * @returns the new WebGL dynamic buffer\n     */\n  }, {\n    key: \"createDynamicVertexBuffer\",\n    value: function createDynamicVertexBuffer(data) {\n      return this._createVertexBuffer(data, this._gl.DYNAMIC_DRAW);\n    }\n  }, {\n    key: \"_resetIndexBufferBinding\",\n    value: function _resetIndexBufferBinding() {\n      this.bindIndexBuffer(null);\n      this._cachedIndexBuffer = null;\n    }\n    /**\n     * Creates a new index buffer\n     * @param indices defines the content of the index buffer\n     * @param updatable defines if the index buffer must be updatable\n     * @returns a new webGL buffer\n     */\n  }, {\n    key: \"createIndexBuffer\",\n    value: function createIndexBuffer(indices, updatable) {\n      var vbo = this._gl.createBuffer();\n      var dataBuffer = new WebGLDataBuffer(vbo);\n      if (!vbo) {\n        throw new Error(\"Unable to create index buffer\");\n      }\n      this.bindIndexBuffer(dataBuffer);\n      var data = this._normalizeIndexData(indices);\n      this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER, data, updatable ? this._gl.DYNAMIC_DRAW : this._gl.STATIC_DRAW);\n      this._resetIndexBufferBinding();\n      dataBuffer.references = 1;\n      dataBuffer.is32Bits = data.BYTES_PER_ELEMENT === 4;\n      return dataBuffer;\n    }\n  }, {\n    key: \"_normalizeIndexData\",\n    value: function _normalizeIndexData(indices) {\n      var bytesPerElement = indices.BYTES_PER_ELEMENT;\n      if (bytesPerElement === 2) {\n        return indices;\n      }\n      // Check 32 bit support\n      if (this._caps.uintIndices) {\n        if (indices instanceof Uint32Array) {\n          return indices;\n        } else {\n          // number[] or Int32Array, check if 32 bit is necessary\n          for (var index = 0; index < indices.length; index++) {\n            if (indices[index] >= 65535) {\n              return new Uint32Array(indices);\n            }\n          }\n          return new Uint16Array(indices);\n        }\n      }\n      // No 32 bit support, force conversion to 16 bit (values greater 16 bit are lost)\n      return new Uint16Array(indices);\n    }\n    /**\n     * Bind a webGL buffer to the webGL context\n     * @param buffer defines the buffer to bind\n     */\n  }, {\n    key: \"bindArrayBuffer\",\n    value: function bindArrayBuffer(buffer) {\n      if (!this._vaoRecordInProgress) {\n        this._unbindVertexArrayObject();\n      }\n      this._bindBuffer(buffer, this._gl.ARRAY_BUFFER);\n    }\n    /**\n     * Bind a specific block at a given index in a specific shader program\n     * @param pipelineContext defines the pipeline context to use\n     * @param blockName defines the block name\n     * @param index defines the index where to bind the block\n     */\n  }, {\n    key: \"bindUniformBlock\",\n    value: function bindUniformBlock(pipelineContext, blockName, index) {\n      var program = pipelineContext.program;\n      var uniformLocation = this._gl.getUniformBlockIndex(program, blockName);\n      this._gl.uniformBlockBinding(program, uniformLocation, index);\n    }\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n  }, {\n    key: \"bindIndexBuffer\",\n    value: function bindIndexBuffer(buffer) {\n      if (!this._vaoRecordInProgress) {\n        this._unbindVertexArrayObject();\n      }\n      this._bindBuffer(buffer, this._gl.ELEMENT_ARRAY_BUFFER);\n    }\n  }, {\n    key: \"_bindBuffer\",\n    value: function _bindBuffer(buffer, target) {\n      if (this._vaoRecordInProgress || this._currentBoundBuffer[target] !== buffer) {\n        this._gl.bindBuffer(target, buffer ? buffer.underlyingResource : null);\n        this._currentBoundBuffer[target] = buffer;\n      }\n    }\n    /**\n     * update the bound buffer with the given data\n     * @param data defines the data to update\n     */\n  }, {\n    key: \"updateArrayBuffer\",\n    value: function updateArrayBuffer(data) {\n      this._gl.bufferSubData(this._gl.ARRAY_BUFFER, 0, data);\n    }\n  }, {\n    key: \"_vertexAttribPointer\",\n    value: function _vertexAttribPointer(buffer, indx, size, type, normalized, stride, offset) {\n      var pointer = this._currentBufferPointers[indx];\n      if (!pointer) {\n        return;\n      }\n      var changed = false;\n      if (!pointer.active) {\n        changed = true;\n        pointer.active = true;\n        pointer.index = indx;\n        pointer.size = size;\n        pointer.type = type;\n        pointer.normalized = normalized;\n        pointer.stride = stride;\n        pointer.offset = offset;\n        pointer.buffer = buffer;\n      } else {\n        if (pointer.buffer !== buffer) {\n          pointer.buffer = buffer;\n          changed = true;\n        }\n        if (pointer.size !== size) {\n          pointer.size = size;\n          changed = true;\n        }\n        if (pointer.type !== type) {\n          pointer.type = type;\n          changed = true;\n        }\n        if (pointer.normalized !== normalized) {\n          pointer.normalized = normalized;\n          changed = true;\n        }\n        if (pointer.stride !== stride) {\n          pointer.stride = stride;\n          changed = true;\n        }\n        if (pointer.offset !== offset) {\n          pointer.offset = offset;\n          changed = true;\n        }\n      }\n      if (changed || this._vaoRecordInProgress) {\n        this.bindArrayBuffer(buffer);\n        if (type === this._gl.UNSIGNED_INT || type === this._gl.INT) {\n          this._gl.vertexAttribIPointer(indx, size, type, stride, offset);\n        } else {\n          this._gl.vertexAttribPointer(indx, size, type, normalized, stride, offset);\n        }\n      }\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_bindIndexBufferWithCache\",\n    value: function _bindIndexBufferWithCache(indexBuffer) {\n      if (indexBuffer == null) {\n        return;\n      }\n      if (this._cachedIndexBuffer !== indexBuffer) {\n        this._cachedIndexBuffer = indexBuffer;\n        this.bindIndexBuffer(indexBuffer);\n        this._uintIndicesCurrentlySet = indexBuffer.is32Bits;\n      }\n    }\n  }, {\n    key: \"_bindVertexBuffersAttributes\",\n    value: function _bindVertexBuffersAttributes(vertexBuffers, effect, overrideVertexBuffers) {\n      var attributes = effect.getAttributesNames();\n      if (!this._vaoRecordInProgress) {\n        this._unbindVertexArrayObject();\n      }\n      this.unbindAllAttributes();\n      for (var index = 0; index < attributes.length; index++) {\n        var order = effect.getAttributeLocation(index);\n        if (order >= 0) {\n          var ai = attributes[index];\n          var vertexBuffer = null;\n          if (overrideVertexBuffers) {\n            vertexBuffer = overrideVertexBuffers[ai];\n          }\n          if (!vertexBuffer) {\n            vertexBuffer = vertexBuffers[ai];\n          }\n          if (!vertexBuffer) {\n            continue;\n          }\n          this._gl.enableVertexAttribArray(order);\n          if (!this._vaoRecordInProgress) {\n            this._vertexAttribArraysEnabled[order] = true;\n          }\n          var buffer = vertexBuffer.getBuffer();\n          if (buffer) {\n            this._vertexAttribPointer(buffer, order, vertexBuffer.getSize(), vertexBuffer.type, vertexBuffer.normalized, vertexBuffer.byteStride, vertexBuffer.byteOffset);\n            if (vertexBuffer.getIsInstanced()) {\n              this._gl.vertexAttribDivisor(order, vertexBuffer.getInstanceDivisor());\n              if (!this._vaoRecordInProgress) {\n                this._currentInstanceLocations.push(order);\n                this._currentInstanceBuffers.push(buffer);\n              }\n            }\n          }\n        }\n      }\n    }\n    /**\n     * Records a vertex array object\n     * @see https://doc.babylonjs.com/setup/support/webGL2#vertex-array-objects\n     * @param vertexBuffers defines the list of vertex buffers to store\n     * @param indexBuffer defines the index buffer to store\n     * @param effect defines the effect to store\n     * @param overrideVertexBuffers defines optional list of avertex buffers that overrides the entries in vertexBuffers\n     * @returns the new vertex array object\n     */\n  }, {\n    key: \"recordVertexArrayObject\",\n    value: function recordVertexArrayObject(vertexBuffers, indexBuffer, effect, overrideVertexBuffers) {\n      var vao = this._gl.createVertexArray();\n      if (!vao) {\n        throw new Error(\"Unable to create VAO\");\n      }\n      this._vaoRecordInProgress = true;\n      this._gl.bindVertexArray(vao);\n      this._mustWipeVertexAttributes = true;\n      this._bindVertexBuffersAttributes(vertexBuffers, effect, overrideVertexBuffers);\n      this.bindIndexBuffer(indexBuffer);\n      this._vaoRecordInProgress = false;\n      this._gl.bindVertexArray(null);\n      return vao;\n    }\n    /**\n     * Bind a specific vertex array object\n     * @see https://doc.babylonjs.com/setup/support/webGL2#vertex-array-objects\n     * @param vertexArrayObject defines the vertex array object to bind\n     * @param indexBuffer defines the index buffer to bind\n     */\n  }, {\n    key: \"bindVertexArrayObject\",\n    value: function bindVertexArrayObject(vertexArrayObject, indexBuffer) {\n      if (this._cachedVertexArrayObject !== vertexArrayObject) {\n        this._cachedVertexArrayObject = vertexArrayObject;\n        this._gl.bindVertexArray(vertexArrayObject);\n        this._cachedVertexBuffers = null;\n        this._cachedIndexBuffer = null;\n        this._uintIndicesCurrentlySet = indexBuffer != null && indexBuffer.is32Bits;\n        this._mustWipeVertexAttributes = true;\n      }\n    }\n    /**\n     * Bind webGl buffers directly to the webGL context\n     * @param vertexBuffer defines the vertex buffer to bind\n     * @param indexBuffer defines the index buffer to bind\n     * @param vertexDeclaration defines the vertex declaration to use with the vertex buffer\n     * @param vertexStrideSize defines the vertex stride of the vertex buffer\n     * @param effect defines the effect associated with the vertex buffer\n     */\n  }, {\n    key: \"bindBuffersDirectly\",\n    value: function bindBuffersDirectly(vertexBuffer, indexBuffer, vertexDeclaration, vertexStrideSize, effect) {\n      if (this._cachedVertexBuffers !== vertexBuffer || this._cachedEffectForVertexBuffers !== effect) {\n        this._cachedVertexBuffers = vertexBuffer;\n        this._cachedEffectForVertexBuffers = effect;\n        var attributesCount = effect.getAttributesCount();\n        this._unbindVertexArrayObject();\n        this.unbindAllAttributes();\n        var offset = 0;\n        for (var index = 0; index < attributesCount; index++) {\n          if (index < vertexDeclaration.length) {\n            var order = effect.getAttributeLocation(index);\n            if (order >= 0) {\n              this._gl.enableVertexAttribArray(order);\n              this._vertexAttribArraysEnabled[order] = true;\n              this._vertexAttribPointer(vertexBuffer, order, vertexDeclaration[index], this._gl.FLOAT, false, vertexStrideSize, offset);\n            }\n            offset += vertexDeclaration[index] * 4;\n          }\n        }\n      }\n      this._bindIndexBufferWithCache(indexBuffer);\n    }\n  }, {\n    key: \"_unbindVertexArrayObject\",\n    value: function _unbindVertexArrayObject() {\n      if (!this._cachedVertexArrayObject) {\n        return;\n      }\n      this._cachedVertexArrayObject = null;\n      this._gl.bindVertexArray(null);\n    }\n    /**\n     * Bind a list of vertex buffers to the webGL context\n     * @param vertexBuffers defines the list of vertex buffers to bind\n     * @param indexBuffer defines the index buffer to bind\n     * @param effect defines the effect associated with the vertex buffers\n     * @param overrideVertexBuffers defines optional list of avertex buffers that overrides the entries in vertexBuffers\n     */\n  }, {\n    key: \"bindBuffers\",\n    value: function bindBuffers(vertexBuffers, indexBuffer, effect, overrideVertexBuffers) {\n      if (this._cachedVertexBuffers !== vertexBuffers || this._cachedEffectForVertexBuffers !== effect) {\n        this._cachedVertexBuffers = vertexBuffers;\n        this._cachedEffectForVertexBuffers = effect;\n        this._bindVertexBuffersAttributes(vertexBuffers, effect, overrideVertexBuffers);\n      }\n      this._bindIndexBufferWithCache(indexBuffer);\n    }\n    /**\n     * Unbind all instance attributes\n     */\n  }, {\n    key: \"unbindInstanceAttributes\",\n    value: function unbindInstanceAttributes() {\n      var boundBuffer;\n      for (var i = 0, ul = this._currentInstanceLocations.length; i < ul; i++) {\n        var instancesBuffer = this._currentInstanceBuffers[i];\n        if (boundBuffer != instancesBuffer && instancesBuffer.references) {\n          boundBuffer = instancesBuffer;\n          this.bindArrayBuffer(instancesBuffer);\n        }\n        var offsetLocation = this._currentInstanceLocations[i];\n        this._gl.vertexAttribDivisor(offsetLocation, 0);\n      }\n      this._currentInstanceBuffers.length = 0;\n      this._currentInstanceLocations.length = 0;\n    }\n    /**\n     * Release and free the memory of a vertex array object\n     * @param vao defines the vertex array object to delete\n     */\n  }, {\n    key: \"releaseVertexArrayObject\",\n    value: function releaseVertexArrayObject(vao) {\n      this._gl.deleteVertexArray(vao);\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_releaseBuffer\",\n    value: function _releaseBuffer(buffer) {\n      buffer.references--;\n      if (buffer.references === 0) {\n        this._deleteBuffer(buffer);\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: \"_deleteBuffer\",\n    value: function _deleteBuffer(buffer) {\n      this._gl.deleteBuffer(buffer.underlyingResource);\n    }\n    /**\n     * Update the content of a webGL buffer used with instantiation and bind it to the webGL context\n     * @param instancesBuffer defines the webGL buffer to update and bind\n     * @param data defines the data to store in the buffer\n     * @param offsetLocations defines the offsets or attributes information used to determine where data must be stored in the buffer\n     */\n  }, {\n    key: \"updateAndBindInstancesBuffer\",\n    value: function updateAndBindInstancesBuffer(instancesBuffer, data, offsetLocations) {\n      this.bindArrayBuffer(instancesBuffer);\n      if (data) {\n        this._gl.bufferSubData(this._gl.ARRAY_BUFFER, 0, data);\n      }\n      if (offsetLocations[0].index !== undefined) {\n        this.bindInstancesBuffer(instancesBuffer, offsetLocations, true);\n      } else {\n        for (var index = 0; index < 4; index++) {\n          var offsetLocation = offsetLocations[index];\n          if (!this._vertexAttribArraysEnabled[offsetLocation]) {\n            this._gl.enableVertexAttribArray(offsetLocation);\n            this._vertexAttribArraysEnabled[offsetLocation] = true;\n          }\n          this._vertexAttribPointer(instancesBuffer, offsetLocation, 4, this._gl.FLOAT, false, 64, index * 16);\n          this._gl.vertexAttribDivisor(offsetLocation, 1);\n          this._currentInstanceLocations.push(offsetLocation);\n          this._currentInstanceBuffers.push(instancesBuffer);\n        }\n      }\n    }\n    /**\n     * Bind the content of a webGL buffer used with instantiation\n     * @param instancesBuffer defines the webGL buffer to bind\n     * @param attributesInfo defines the offsets or attributes information used to determine where data must be stored in the buffer\n     * @param computeStride defines Whether to compute the strides from the info or use the default 0\n     */\n  }, {\n    key: \"bindInstancesBuffer\",\n    value: function bindInstancesBuffer(instancesBuffer, attributesInfo) {\n      var computeStride = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      this.bindArrayBuffer(instancesBuffer);\n      var stride = 0;\n      if (computeStride) {\n        for (var i = 0; i < attributesInfo.length; i++) {\n          var ai = attributesInfo[i];\n          stride += ai.attributeSize * 4;\n        }\n      }\n      for (var _i = 0; _i < attributesInfo.length; _i++) {\n        var _ai = attributesInfo[_i];\n        if (_ai.index === undefined) {\n          _ai.index = this._currentEffect.getAttributeLocationByName(_ai.attributeName);\n        }\n        if (_ai.index < 0) {\n          continue;\n        }\n        if (!this._vertexAttribArraysEnabled[_ai.index]) {\n          this._gl.enableVertexAttribArray(_ai.index);\n          this._vertexAttribArraysEnabled[_ai.index] = true;\n        }\n        this._vertexAttribPointer(instancesBuffer, _ai.index, _ai.attributeSize, _ai.attributeType || this._gl.FLOAT, _ai.normalized || false, stride, _ai.offset);\n        this._gl.vertexAttribDivisor(_ai.index, _ai.divisor === undefined ? 1 : _ai.divisor);\n        this._currentInstanceLocations.push(_ai.index);\n        this._currentInstanceBuffers.push(instancesBuffer);\n      }\n    }\n    /**\n     * Disable the instance attribute corresponding to the name in parameter\n     * @param name defines the name of the attribute to disable\n     */\n  }, {\n    key: \"disableInstanceAttributeByName\",\n    value: function disableInstanceAttributeByName(name) {\n      if (!this._currentEffect) {\n        return;\n      }\n      var attributeLocation = this._currentEffect.getAttributeLocationByName(name);\n      this.disableInstanceAttribute(attributeLocation);\n    }\n    /**\n     * Disable the instance attribute corresponding to the location in parameter\n     * @param attributeLocation defines the attribute location of the attribute to disable\n     */\n  }, {\n    key: \"disableInstanceAttribute\",\n    value: function disableInstanceAttribute(attributeLocation) {\n      var shouldClean = false;\n      var index;\n      while ((index = this._currentInstanceLocations.indexOf(attributeLocation)) !== -1) {\n        this._currentInstanceLocations.splice(index, 1);\n        this._currentInstanceBuffers.splice(index, 1);\n        shouldClean = true;\n        index = this._currentInstanceLocations.indexOf(attributeLocation);\n      }\n      if (shouldClean) {\n        this._gl.vertexAttribDivisor(attributeLocation, 0);\n        this.disableAttributeByIndex(attributeLocation);\n      }\n    }\n    /**\n     * Disable the attribute corresponding to the location in parameter\n     * @param attributeLocation defines the attribute location of the attribute to disable\n     */\n  }, {\n    key: \"disableAttributeByIndex\",\n    value: function disableAttributeByIndex(attributeLocation) {\n      this._gl.disableVertexAttribArray(attributeLocation);\n      this._vertexAttribArraysEnabled[attributeLocation] = false;\n      this._currentBufferPointers[attributeLocation].active = false;\n    }\n    /**\n     * Send a draw order\n     * @param useTriangles defines if triangles must be used to draw (else wireframe will be used)\n     * @param indexStart defines the starting index\n     * @param indexCount defines the number of index to draw\n     * @param instancesCount defines the number of instances to draw (if instantiation is enabled)\n     */\n  }, {\n    key: \"draw\",\n    value: function draw(useTriangles, indexStart, indexCount, instancesCount) {\n      this.drawElementsType(useTriangles ? 0 : 1, indexStart, indexCount, instancesCount);\n    }\n    /**\n     * Draw a list of points\n     * @param verticesStart defines the index of first vertex to draw\n     * @param verticesCount defines the count of vertices to draw\n     * @param instancesCount defines the number of instances to draw (if instantiation is enabled)\n     */\n  }, {\n    key: \"drawPointClouds\",\n    value: function drawPointClouds(verticesStart, verticesCount, instancesCount) {\n      this.drawArraysType(2, verticesStart, verticesCount, instancesCount);\n    }\n    /**\n     * Draw a list of unindexed primitives\n     * @param useTriangles defines if triangles must be used to draw (else wireframe will be used)\n     * @param verticesStart defines the index of first vertex to draw\n     * @param verticesCount defines the count of vertices to draw\n     * @param instancesCount defines the number of instances to draw (if instantiation is enabled)\n     */\n  }, {\n    key: \"drawUnIndexed\",\n    value: function drawUnIndexed(useTriangles, verticesStart, verticesCount, instancesCount) {\n      this.drawArraysType(useTriangles ? 0 : 1, verticesStart, verticesCount, instancesCount);\n    }\n    /**\n     * Draw a list of indexed primitives\n     * @param fillMode defines the primitive to use\n     * @param indexStart defines the starting index\n     * @param indexCount defines the number of index to draw\n     * @param instancesCount defines the number of instances to draw (if instantiation is enabled)\n     */\n  }, {\n    key: \"drawElementsType\",\n    value: function drawElementsType(fillMode, indexStart, indexCount, instancesCount) {\n      // Apply states\n      this.applyStates();\n      this._reportDrawCall();\n      // Render\n      var drawMode = this._drawMode(fillMode);\n      var indexFormat = this._uintIndicesCurrentlySet ? this._gl.UNSIGNED_INT : this._gl.UNSIGNED_SHORT;\n      var mult = this._uintIndicesCurrentlySet ? 4 : 2;\n      if (instancesCount) {\n        this._gl.drawElementsInstanced(drawMode, indexCount, indexFormat, indexStart * mult, instancesCount);\n      } else {\n        this._gl.drawElements(drawMode, indexCount, indexFormat, indexStart * mult);\n      }\n    }\n    /**\n     * Draw a list of unindexed primitives\n     * @param fillMode defines the primitive to use\n     * @param verticesStart defines the index of first vertex to draw\n     * @param verticesCount defines the count of vertices to draw\n     * @param instancesCount defines the number of instances to draw (if instantiation is enabled)\n     */\n  }, {\n    key: \"drawArraysType\",\n    value: function drawArraysType(fillMode, verticesStart, verticesCount, instancesCount) {\n      // Apply states\n      this.applyStates();\n      this._reportDrawCall();\n      var drawMode = this._drawMode(fillMode);\n      if (instancesCount) {\n        this._gl.drawArraysInstanced(drawMode, verticesStart, verticesCount, instancesCount);\n      } else {\n        this._gl.drawArrays(drawMode, verticesStart, verticesCount);\n      }\n    }\n  }, {\n    key: \"_drawMode\",\n    value: function _drawMode(fillMode) {\n      switch (fillMode) {\n        // Triangle views\n        case 0:\n          return this._gl.TRIANGLES;\n        case 2:\n          return this._gl.POINTS;\n        case 1:\n          return this._gl.LINES;\n        // Draw modes\n        case 3:\n          return this._gl.POINTS;\n        case 4:\n          return this._gl.LINES;\n        case 5:\n          return this._gl.LINE_LOOP;\n        case 6:\n          return this._gl.LINE_STRIP;\n        case 7:\n          return this._gl.TRIANGLE_STRIP;\n        case 8:\n          return this._gl.TRIANGLE_FAN;\n        default:\n          return this._gl.TRIANGLES;\n      }\n    }\n    /** @internal */\n  }, {\n    key: \"_reportDrawCall\",\n    value: function _reportDrawCall() {\n      // Will be implemented by children\n    }\n    // Shaders\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_releaseEffect\",\n    value: function _releaseEffect(effect) {\n      if (this._compiledEffects[effect._key]) {\n        delete this._compiledEffects[effect._key];\n      }\n      var pipelineContext = effect.getPipelineContext();\n      if (pipelineContext) {\n        this._deletePipelineContext(pipelineContext);\n      }\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_deletePipelineContext\",\n    value: function _deletePipelineContext(pipelineContext) {\n      var webGLPipelineContext = pipelineContext;\n      if (webGLPipelineContext && webGLPipelineContext.program) {\n        webGLPipelineContext.program.__SPECTOR_rebuildProgram = null;\n        this._gl.deleteProgram(webGLPipelineContext.program);\n      }\n    }\n    /** @internal */\n  }, {\n    key: \"_getGlobalDefines\",\n    value: function _getGlobalDefines(defines) {\n      if (defines) {\n        if (this.isNDCHalfZRange) {\n          defines[\"IS_NDC_HALF_ZRANGE\"] = \"\";\n        } else {\n          delete defines[\"IS_NDC_HALF_ZRANGE\"];\n        }\n        if (this.useReverseDepthBuffer) {\n          defines[\"USE_REVERSE_DEPTHBUFFER\"] = \"\";\n        } else {\n          delete defines[\"USE_REVERSE_DEPTHBUFFER\"];\n        }\n        if (this.useExactSrgbConversions) {\n          defines[\"USE_EXACT_SRGB_CONVERSIONS\"] = \"\";\n        } else {\n          delete defines[\"USE_EXACT_SRGB_CONVERSIONS\"];\n        }\n        return;\n      } else {\n        var s = \"\";\n        if (this.isNDCHalfZRange) {\n          s += \"#define IS_NDC_HALF_ZRANGE\";\n        }\n        if (this.useReverseDepthBuffer) {\n          if (s) {\n            s += \"\\n\";\n          }\n          s += \"#define USE_REVERSE_DEPTHBUFFER\";\n        }\n        if (this.useExactSrgbConversions) {\n          if (s) {\n            s += \"\\n\";\n          }\n          s += \"#define USE_EXACT_SRGB_CONVERSIONS\";\n        }\n        return s;\n      }\n    }\n    /**\n     * Create a new effect (used to store vertex/fragment shaders)\n     * @param baseName defines the base name of the effect (The name of file without .fragment.fx or .vertex.fx)\n     * @param attributesNamesOrOptions defines either a list of attribute names or an IEffectCreationOptions object\n     * @param uniformsNamesOrEngine defines either a list of uniform names or the engine to use\n     * @param samplers defines an array of string used to represent textures\n     * @param defines defines the string containing the defines to use to compile the shaders\n     * @param fallbacks defines the list of potential fallbacks to use if shader compilation fails\n     * @param onCompiled defines a function to call when the effect creation is successful\n     * @param onError defines a function to call when the effect creation has failed\n     * @param indexParameters defines an object containing the index values to use to compile shaders (like the maximum number of simultaneous lights)\n     * @param shaderLanguage the language the shader is written in (default: GLSL)\n     * @returns the new Effect\n     */\n  }, {\n    key: \"createEffect\",\n    value: function createEffect(baseName, attributesNamesOrOptions, uniformsNamesOrEngine, samplers, defines, fallbacks, onCompiled, onError, indexParameters) {\n      var shaderLanguage = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : ShaderLanguage.GLSL;\n      var _a;\n      var vertex = baseName.vertexElement || baseName.vertex || baseName.vertexToken || baseName.vertexSource || baseName;\n      var fragment = baseName.fragmentElement || baseName.fragment || baseName.fragmentToken || baseName.fragmentSource || baseName;\n      var globalDefines = this._getGlobalDefines();\n      var fullDefines = (_a = defines !== null && defines !== void 0 ? defines : attributesNamesOrOptions.defines) !== null && _a !== void 0 ? _a : \"\";\n      if (globalDefines) {\n        fullDefines += globalDefines;\n      }\n      var name = vertex + \"+\" + fragment + \"@\" + fullDefines;\n      if (this._compiledEffects[name]) {\n        var compiledEffect = this._compiledEffects[name];\n        if (onCompiled && compiledEffect.isReady()) {\n          onCompiled(compiledEffect);\n        }\n        return compiledEffect;\n      }\n      var effect = new Effect(baseName, attributesNamesOrOptions, uniformsNamesOrEngine, samplers, this, defines, fallbacks, onCompiled, onError, indexParameters, name, shaderLanguage);\n      this._compiledEffects[name] = effect;\n      return effect;\n    }\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n  }, {\n    key: \"_compileShader\",\n    value: function _compileShader(source, type, defines, shaderVersion) {\n      return this._compileRawShader(ThinEngine._ConcatenateShader(source, defines, shaderVersion), type);\n    }\n  }, {\n    key: \"_compileRawShader\",\n    value: function _compileRawShader(source, type) {\n      var gl = this._gl;\n      var shader = gl.createShader(type === \"vertex\" ? gl.VERTEX_SHADER : gl.FRAGMENT_SHADER);\n      if (!shader) {\n        var error = gl.NO_ERROR;\n        var tempError = gl.NO_ERROR;\n        while ((tempError = gl.getError()) !== gl.NO_ERROR) {\n          error = tempError;\n        }\n        throw new Error(\"Something went wrong while creating a gl \".concat(type, \" shader object. gl error=\").concat(error, \", gl isContextLost=\").concat(gl.isContextLost(), \", _contextWasLost=\").concat(this._contextWasLost));\n      }\n      gl.shaderSource(shader, source);\n      gl.compileShader(shader);\n      return shader;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_getShaderSource\",\n    value: function _getShaderSource(shader) {\n      return this._gl.getShaderSource(shader);\n    }\n    /**\n     * Directly creates a webGL program\n     * @param pipelineContext  defines the pipeline context to attach to\n     * @param vertexCode defines the vertex shader code to use\n     * @param fragmentCode defines the fragment shader code to use\n     * @param context defines the webGL context to use (if not set, the current one will be used)\n     * @param transformFeedbackVaryings defines the list of transform feedback varyings to use\n     * @returns the new webGL program\n     */\n  }, {\n    key: \"createRawShaderProgram\",\n    value: function createRawShaderProgram(pipelineContext, vertexCode, fragmentCode, context) {\n      var transformFeedbackVaryings = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n      context = context || this._gl;\n      var vertexShader = this._compileRawShader(vertexCode, \"vertex\");\n      var fragmentShader = this._compileRawShader(fragmentCode, \"fragment\");\n      return this._createShaderProgram(pipelineContext, vertexShader, fragmentShader, context, transformFeedbackVaryings);\n    }\n    /**\n     * Creates a webGL program\n     * @param pipelineContext  defines the pipeline context to attach to\n     * @param vertexCode  defines the vertex shader code to use\n     * @param fragmentCode defines the fragment shader code to use\n     * @param defines defines the string containing the defines to use to compile the shaders\n     * @param context defines the webGL context to use (if not set, the current one will be used)\n     * @param transformFeedbackVaryings defines the list of transform feedback varyings to use\n     * @returns the new webGL program\n     */\n  }, {\n    key: \"createShaderProgram\",\n    value: function createShaderProgram(pipelineContext, vertexCode, fragmentCode, defines, context) {\n      var transformFeedbackVaryings = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n      context = context || this._gl;\n      var shaderVersion = this._webGLVersion > 1 ? \"#version 300 es\\n#define WEBGL2 \\n\" : \"\";\n      var vertexShader = this._compileShader(vertexCode, \"vertex\", defines, shaderVersion);\n      var fragmentShader = this._compileShader(fragmentCode, \"fragment\", defines, shaderVersion);\n      return this._createShaderProgram(pipelineContext, vertexShader, fragmentShader, context, transformFeedbackVaryings);\n    }\n    /**\n     * Inline functions in shader code that are marked to be inlined\n     * @param code code to inline\n     * @returns inlined code\n     */\n  }, {\n    key: \"inlineShaderCode\",\n    value: function inlineShaderCode(code) {\n      // no inlining needed in the WebGL engine\n      return code;\n    }\n    /**\n     * Creates a new pipeline context\n     * @param shaderProcessingContext defines the shader processing context used during the processing if available\n     * @returns the new pipeline\n     */\n  }, {\n    key: \"createPipelineContext\",\n    value: function createPipelineContext(shaderProcessingContext) {\n      var pipelineContext = new WebGLPipelineContext();\n      pipelineContext.engine = this;\n      if (this._caps.parallelShaderCompile) {\n        pipelineContext.isParallelCompiled = true;\n      }\n      return pipelineContext;\n    }\n    /**\n     * Creates a new material context\n     * @returns the new context\n     */\n  }, {\n    key: \"createMaterialContext\",\n    value: function createMaterialContext() {\n      return undefined;\n    }\n    /**\n     * Creates a new draw context\n     * @returns the new context\n     */\n  }, {\n    key: \"createDrawContext\",\n    value: function createDrawContext() {\n      return undefined;\n    }\n  }, {\n    key: \"_createShaderProgram\",\n    value: function _createShaderProgram(pipelineContext, vertexShader, fragmentShader, context) {\n      var transformFeedbackVaryings = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n      var shaderProgram = context.createProgram();\n      pipelineContext.program = shaderProgram;\n      if (!shaderProgram) {\n        throw new Error(\"Unable to create program\");\n      }\n      context.attachShader(shaderProgram, vertexShader);\n      context.attachShader(shaderProgram, fragmentShader);\n      context.linkProgram(shaderProgram);\n      pipelineContext.context = context;\n      pipelineContext.vertexShader = vertexShader;\n      pipelineContext.fragmentShader = fragmentShader;\n      if (!pipelineContext.isParallelCompiled) {\n        this._finalizePipelineContext(pipelineContext);\n      }\n      return shaderProgram;\n    }\n  }, {\n    key: \"_finalizePipelineContext\",\n    value: function _finalizePipelineContext(pipelineContext) {\n      var context = pipelineContext.context;\n      var vertexShader = pipelineContext.vertexShader;\n      var fragmentShader = pipelineContext.fragmentShader;\n      var program = pipelineContext.program;\n      var linked = context.getProgramParameter(program, context.LINK_STATUS);\n      if (!linked) {\n        // Get more info\n        // Vertex\n        if (!this._gl.getShaderParameter(vertexShader, this._gl.COMPILE_STATUS)) {\n          var log = this._gl.getShaderInfoLog(vertexShader);\n          if (log) {\n            pipelineContext.vertexCompilationError = log;\n            throw new Error(\"VERTEX SHADER \" + log);\n          }\n        }\n        // Fragment\n        if (!this._gl.getShaderParameter(fragmentShader, this._gl.COMPILE_STATUS)) {\n          var _log = this._gl.getShaderInfoLog(fragmentShader);\n          if (_log) {\n            pipelineContext.fragmentCompilationError = _log;\n            throw new Error(\"FRAGMENT SHADER \" + _log);\n          }\n        }\n        var error = context.getProgramInfoLog(program);\n        if (error) {\n          pipelineContext.programLinkError = error;\n          throw new Error(error);\n        }\n      }\n      if (this.validateShaderPrograms) {\n        context.validateProgram(program);\n        var validated = context.getProgramParameter(program, context.VALIDATE_STATUS);\n        if (!validated) {\n          var _error = context.getProgramInfoLog(program);\n          if (_error) {\n            pipelineContext.programValidationError = _error;\n            throw new Error(_error);\n          }\n        }\n      }\n      context.deleteShader(vertexShader);\n      context.deleteShader(fragmentShader);\n      pipelineContext.vertexShader = undefined;\n      pipelineContext.fragmentShader = undefined;\n      if (pipelineContext.onCompiled) {\n        pipelineContext.onCompiled();\n        pipelineContext.onCompiled = undefined;\n      }\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_preparePipelineContext\",\n    value: function _preparePipelineContext(pipelineContext, vertexSourceCode, fragmentSourceCode, createAsRaw, rawVertexSourceCode, rawFragmentSourceCode, rebuildRebind, defines, transformFeedbackVaryings, key) {\n      var webGLRenderingState = pipelineContext;\n      if (createAsRaw) {\n        webGLRenderingState.program = this.createRawShaderProgram(webGLRenderingState, vertexSourceCode, fragmentSourceCode, undefined, transformFeedbackVaryings);\n      } else {\n        webGLRenderingState.program = this.createShaderProgram(webGLRenderingState, vertexSourceCode, fragmentSourceCode, defines, undefined, transformFeedbackVaryings);\n      }\n      webGLRenderingState.program.__SPECTOR_rebuildProgram = rebuildRebind;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_isRenderingStateCompiled\",\n    value: function _isRenderingStateCompiled(pipelineContext) {\n      var webGLPipelineContext = pipelineContext;\n      if (this._gl.getProgramParameter(webGLPipelineContext.program, this._caps.parallelShaderCompile.COMPLETION_STATUS_KHR)) {\n        this._finalizePipelineContext(webGLPipelineContext);\n        return true;\n      }\n      return false;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_executeWhenRenderingStateIsCompiled\",\n    value: function _executeWhenRenderingStateIsCompiled(pipelineContext, action) {\n      var webGLPipelineContext = pipelineContext;\n      if (!webGLPipelineContext.isParallelCompiled) {\n        action();\n        return;\n      }\n      var oldHandler = webGLPipelineContext.onCompiled;\n      if (oldHandler) {\n        webGLPipelineContext.onCompiled = function () {\n          oldHandler();\n          action();\n        };\n      } else {\n        webGLPipelineContext.onCompiled = action;\n      }\n    }\n    /**\n     * Gets the list of webGL uniform locations associated with a specific program based on a list of uniform names\n     * @param pipelineContext defines the pipeline context to use\n     * @param uniformsNames defines the list of uniform names\n     * @returns an array of webGL uniform locations\n     */\n  }, {\n    key: \"getUniforms\",\n    value: function getUniforms(pipelineContext, uniformsNames) {\n      var results = new Array();\n      var webGLPipelineContext = pipelineContext;\n      for (var index = 0; index < uniformsNames.length; index++) {\n        results.push(this._gl.getUniformLocation(webGLPipelineContext.program, uniformsNames[index]));\n      }\n      return results;\n    }\n    /**\n     * Gets the list of active attributes for a given webGL program\n     * @param pipelineContext defines the pipeline context to use\n     * @param attributesNames defines the list of attribute names to get\n     * @returns an array of indices indicating the offset of each attribute\n     */\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes(pipelineContext, attributesNames) {\n      var results = [];\n      var webGLPipelineContext = pipelineContext;\n      for (var index = 0; index < attributesNames.length; index++) {\n        try {\n          results.push(this._gl.getAttribLocation(webGLPipelineContext.program, attributesNames[index]));\n        } catch (e) {\n          results.push(-1);\n        }\n      }\n      return results;\n    }\n    /**\n     * Activates an effect, making it the current one (ie. the one used for rendering)\n     * @param effect defines the effect to activate\n     */\n  }, {\n    key: \"enableEffect\",\n    value: function enableEffect(effect) {\n      effect = effect !== null && DrawWrapper.IsWrapper(effect) ? effect.effect : effect; // get only the effect, we don't need a Wrapper in the WebGL engine\n      if (!effect || effect === this._currentEffect) {\n        return;\n      }\n      this._stencilStateComposer.stencilMaterial = undefined;\n      effect = effect;\n      // Use program\n      this.bindSamplers(effect);\n      this._currentEffect = effect;\n      if (effect.onBind) {\n        effect.onBind(effect);\n      }\n      if (effect._onBindObservable) {\n        effect._onBindObservable.notifyObservers(effect);\n      }\n    }\n    /**\n     * Set the value of an uniform to a number (int)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param value defines the int number to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setInt\",\n    value: function setInt(uniform, value) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform1i(uniform, value);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a int2\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setInt2\",\n    value: function setInt2(uniform, x, y) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform2i(uniform, x, y);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a int3\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @param z defines the 3rd component of the value\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setInt3\",\n    value: function setInt3(uniform, x, y, z) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform3i(uniform, x, y, z);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a int4\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @param z defines the 3rd component of the value\n     * @param w defines the 4th component of the value\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setInt4\",\n    value: function setInt4(uniform, x, y, z, w) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform4i(uniform, x, y, z, w);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of int32\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of int32 to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setIntArray\",\n    value: function setIntArray(uniform, array) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform1iv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of int32 (stored as vec2)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of int32 to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setIntArray2\",\n    value: function setIntArray2(uniform, array) {\n      if (!uniform || array.length % 2 !== 0) {\n        return false;\n      }\n      this._gl.uniform2iv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of int32 (stored as vec3)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of int32 to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setIntArray3\",\n    value: function setIntArray3(uniform, array) {\n      if (!uniform || array.length % 3 !== 0) {\n        return false;\n      }\n      this._gl.uniform3iv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of int32 (stored as vec4)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of int32 to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setIntArray4\",\n    value: function setIntArray4(uniform, array) {\n      if (!uniform || array.length % 4 !== 0) {\n        return false;\n      }\n      this._gl.uniform4iv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a number (unsigned int)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param value defines the unsigned int number to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setUInt\",\n    value: function setUInt(uniform, value) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform1ui(uniform, value);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a unsigned int2\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setUInt2\",\n    value: function setUInt2(uniform, x, y) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform2ui(uniform, x, y);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a unsigned int3\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @param z defines the 3rd component of the value\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setUInt3\",\n    value: function setUInt3(uniform, x, y, z) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform3ui(uniform, x, y, z);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a unsigned int4\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @param z defines the 3rd component of the value\n     * @param w defines the 4th component of the value\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setUInt4\",\n    value: function setUInt4(uniform, x, y, z, w) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform4ui(uniform, x, y, z, w);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of unsigned int32\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of unsigned int32 to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setUIntArray\",\n    value: function setUIntArray(uniform, array) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform1uiv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of unsigned int32 (stored as vec2)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of unsigned int32 to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setUIntArray2\",\n    value: function setUIntArray2(uniform, array) {\n      if (!uniform || array.length % 2 !== 0) {\n        return false;\n      }\n      this._gl.uniform2uiv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of unsigned int32 (stored as vec3)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of unsigned int32 to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setUIntArray3\",\n    value: function setUIntArray3(uniform, array) {\n      if (!uniform || array.length % 3 !== 0) {\n        return false;\n      }\n      this._gl.uniform3uiv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of unsigned int32 (stored as vec4)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of unsigned int32 to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setUIntArray4\",\n    value: function setUIntArray4(uniform, array) {\n      if (!uniform || array.length % 4 !== 0) {\n        return false;\n      }\n      this._gl.uniform4uiv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of number\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of number to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setArray\",\n    value: function setArray(uniform, array) {\n      if (!uniform) {\n        return false;\n      }\n      if (array.length < 1) {\n        return false;\n      }\n      this._gl.uniform1fv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of number (stored as vec2)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of number to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setArray2\",\n    value: function setArray2(uniform, array) {\n      if (!uniform || array.length % 2 !== 0) {\n        return false;\n      }\n      this._gl.uniform2fv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of number (stored as vec3)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of number to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setArray3\",\n    value: function setArray3(uniform, array) {\n      if (!uniform || array.length % 3 !== 0) {\n        return false;\n      }\n      this._gl.uniform3fv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of number (stored as vec4)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param array defines the array of number to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setArray4\",\n    value: function setArray4(uniform, array) {\n      if (!uniform || array.length % 4 !== 0) {\n        return false;\n      }\n      this._gl.uniform4fv(uniform, array);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to an array of float32 (stored as matrices)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param matrices defines the array of float32 to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setMatrices\",\n    value: function setMatrices(uniform, matrices) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniformMatrix4fv(uniform, false, matrices);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a matrix (3x3)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param matrix defines the Float32Array representing the 3x3 matrix to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setMatrix3x3\",\n    value: function setMatrix3x3(uniform, matrix) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniformMatrix3fv(uniform, false, matrix);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a matrix (2x2)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param matrix defines the Float32Array representing the 2x2 matrix to store\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setMatrix2x2\",\n    value: function setMatrix2x2(uniform, matrix) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniformMatrix2fv(uniform, false, matrix);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a number (float)\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param value defines the float number to store\n     * @returns true if the value was transferred\n     */\n  }, {\n    key: \"setFloat\",\n    value: function setFloat(uniform, value) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform1f(uniform, value);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a vec2\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setFloat2\",\n    value: function setFloat2(uniform, x, y) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform2f(uniform, x, y);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a vec3\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @param z defines the 3rd component of the value\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setFloat3\",\n    value: function setFloat3(uniform, x, y, z) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform3f(uniform, x, y, z);\n      return true;\n    }\n    /**\n     * Set the value of an uniform to a vec4\n     * @param uniform defines the webGL uniform location where to store the value\n     * @param x defines the 1st component of the value\n     * @param y defines the 2nd component of the value\n     * @param z defines the 3rd component of the value\n     * @param w defines the 4th component of the value\n     * @returns true if the value was set\n     */\n  }, {\n    key: \"setFloat4\",\n    value: function setFloat4(uniform, x, y, z, w) {\n      if (!uniform) {\n        return false;\n      }\n      this._gl.uniform4f(uniform, x, y, z, w);\n      return true;\n    }\n    // States\n    /**\n     * Apply all cached states (depth, culling, stencil and alpha)\n     */\n  }, {\n    key: \"applyStates\",\n    value: function applyStates() {\n      this._depthCullingState.apply(this._gl);\n      this._stencilStateComposer.apply(this._gl);\n      this._alphaState.apply(this._gl);\n      if (this._colorWriteChanged) {\n        this._colorWriteChanged = false;\n        var enable = this._colorWrite;\n        this._gl.colorMask(enable, enable, enable, enable);\n      }\n    }\n    /**\n     * Enable or disable color writing\n     * @param enable defines the state to set\n     */\n  }, {\n    key: \"setColorWrite\",\n    value: function setColorWrite(enable) {\n      if (enable !== this._colorWrite) {\n        this._colorWriteChanged = true;\n        this._colorWrite = enable;\n      }\n    }\n    /**\n     * Gets a boolean indicating if color writing is enabled\n     * @returns the current color writing state\n     */\n  }, {\n    key: \"getColorWrite\",\n    value: function getColorWrite() {\n      return this._colorWrite;\n    }\n    /**\n     * Gets the depth culling state manager\n     */\n  }, {\n    key: \"depthCullingState\",\n    get: function get() {\n      return this._depthCullingState;\n    }\n    /**\n     * Gets the alpha state manager\n     */\n  }, {\n    key: \"alphaState\",\n    get: function get() {\n      return this._alphaState;\n    }\n    /**\n     * Gets the stencil state manager\n     */\n  }, {\n    key: \"stencilState\",\n    get: function get() {\n      return this._stencilState;\n    }\n    /**\n     * Gets the stencil state composer\n     */\n  }, {\n    key: \"stencilStateComposer\",\n    get: function get() {\n      return this._stencilStateComposer;\n    }\n    // Textures\n    /**\n     * Clears the list of texture accessible through engine.\n     * This can help preventing texture load conflict due to name collision.\n     */\n  }, {\n    key: \"clearInternalTexturesCache\",\n    value: function clearInternalTexturesCache() {\n      this._internalTexturesCache.length = 0;\n    }\n    /**\n     * Force the entire cache to be cleared\n     * You should not have to use this function unless your engine needs to share the webGL context with another engine\n     * @param bruteForce defines a boolean to force clearing ALL caches (including stencil, detoh and alpha states)\n     */\n  }, {\n    key: \"wipeCaches\",\n    value: function wipeCaches(bruteForce) {\n      if (this.preventCacheWipeBetweenFrames && !bruteForce) {\n        return;\n      }\n      this._currentEffect = null;\n      this._viewportCached.x = 0;\n      this._viewportCached.y = 0;\n      this._viewportCached.z = 0;\n      this._viewportCached.w = 0;\n      // Done before in case we clean the attributes\n      this._unbindVertexArrayObject();\n      if (bruteForce) {\n        this._currentProgram = null;\n        this.resetTextureCache();\n        this._stencilStateComposer.reset();\n        this._depthCullingState.reset();\n        this._depthCullingState.depthFunc = this._gl.LEQUAL;\n        this._alphaState.reset();\n        this._alphaMode = 1;\n        this._alphaEquation = 0;\n        this._colorWrite = true;\n        this._colorWriteChanged = true;\n        this._unpackFlipYCached = null;\n        this._gl.pixelStorei(this._gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, this._gl.NONE);\n        this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 0);\n        this._mustWipeVertexAttributes = true;\n        this.unbindAllAttributes();\n      }\n      this._resetVertexBufferBinding();\n      this._cachedIndexBuffer = null;\n      this._cachedEffectForVertexBuffers = null;\n      this.bindIndexBuffer(null);\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_getSamplingParameters\",\n    value: function _getSamplingParameters(samplingMode, generateMipMaps) {\n      var gl = this._gl;\n      var magFilter = gl.NEAREST;\n      var minFilter = gl.NEAREST;\n      switch (samplingMode) {\n        case 11:\n          magFilter = gl.LINEAR;\n          if (generateMipMaps) {\n            minFilter = gl.LINEAR_MIPMAP_NEAREST;\n          } else {\n            minFilter = gl.LINEAR;\n          }\n          break;\n        case 3:\n          magFilter = gl.LINEAR;\n          if (generateMipMaps) {\n            minFilter = gl.LINEAR_MIPMAP_LINEAR;\n          } else {\n            minFilter = gl.LINEAR;\n          }\n          break;\n        case 8:\n          magFilter = gl.NEAREST;\n          if (generateMipMaps) {\n            minFilter = gl.NEAREST_MIPMAP_LINEAR;\n          } else {\n            minFilter = gl.NEAREST;\n          }\n          break;\n        case 4:\n          magFilter = gl.NEAREST;\n          if (generateMipMaps) {\n            minFilter = gl.NEAREST_MIPMAP_NEAREST;\n          } else {\n            minFilter = gl.NEAREST;\n          }\n          break;\n        case 5:\n          magFilter = gl.NEAREST;\n          if (generateMipMaps) {\n            minFilter = gl.LINEAR_MIPMAP_NEAREST;\n          } else {\n            minFilter = gl.LINEAR;\n          }\n          break;\n        case 6:\n          magFilter = gl.NEAREST;\n          if (generateMipMaps) {\n            minFilter = gl.LINEAR_MIPMAP_LINEAR;\n          } else {\n            minFilter = gl.LINEAR;\n          }\n          break;\n        case 7:\n          magFilter = gl.NEAREST;\n          minFilter = gl.LINEAR;\n          break;\n        case 1:\n          magFilter = gl.NEAREST;\n          minFilter = gl.NEAREST;\n          break;\n        case 9:\n          magFilter = gl.LINEAR;\n          if (generateMipMaps) {\n            minFilter = gl.NEAREST_MIPMAP_NEAREST;\n          } else {\n            minFilter = gl.NEAREST;\n          }\n          break;\n        case 10:\n          magFilter = gl.LINEAR;\n          if (generateMipMaps) {\n            minFilter = gl.NEAREST_MIPMAP_LINEAR;\n          } else {\n            minFilter = gl.NEAREST;\n          }\n          break;\n        case 2:\n          magFilter = gl.LINEAR;\n          minFilter = gl.LINEAR;\n          break;\n        case 12:\n          magFilter = gl.LINEAR;\n          minFilter = gl.NEAREST;\n          break;\n      }\n      return {\n        min: minFilter,\n        mag: magFilter\n      };\n    }\n    /** @internal */\n  }, {\n    key: \"_createTexture\",\n    value: function _createTexture() {\n      var texture = this._gl.createTexture();\n      if (!texture) {\n        throw new Error(\"Unable to create texture\");\n      }\n      return texture;\n    }\n    /** @internal */\n  }, {\n    key: \"_createHardwareTexture\",\n    value: function _createHardwareTexture() {\n      return new WebGLHardwareTexture(this._createTexture(), this._gl);\n    }\n    /**\n     * Creates an internal texture without binding it to a framebuffer\n     * @internal\n     * @param size defines the size of the texture\n     * @param options defines the options used to create the texture\n     * @param delayGPUTextureCreation true to delay the texture creation the first time it is really needed. false to create it right away\n     * @param source source type of the texture\n     * @returns a new internal texture\n     */\n  }, {\n    key: \"_createInternalTexture\",\n    value: function _createInternalTexture(size, options) {\n      var delayGPUTextureCreation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      var source = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : InternalTextureSource.Unknown;\n      var _a;\n      var generateMipMaps = false;\n      var type = 0;\n      var samplingMode = 3;\n      var format = 5;\n      var useSRGBBuffer = false;\n      var samples = 1;\n      var label;\n      if (options !== undefined && typeof options === \"object\") {\n        generateMipMaps = !!options.generateMipMaps;\n        type = options.type === undefined ? 0 : options.type;\n        samplingMode = options.samplingMode === undefined ? 3 : options.samplingMode;\n        format = options.format === undefined ? 5 : options.format;\n        useSRGBBuffer = options.useSRGBBuffer === undefined ? false : options.useSRGBBuffer;\n        samples = (_a = options.samples) !== null && _a !== void 0 ? _a : 1;\n        label = options.label;\n      } else {\n        generateMipMaps = !!options;\n      }\n      useSRGBBuffer && (useSRGBBuffer = this._caps.supportSRGBBuffers && (this.webGLVersion > 1 || this.isWebGPU));\n      if (type === 1 && !this._caps.textureFloatLinearFiltering) {\n        // if floating point linear (gl.FLOAT) then force to NEAREST_SAMPLINGMODE\n        samplingMode = 1;\n      } else if (type === 2 && !this._caps.textureHalfFloatLinearFiltering) {\n        // if floating point linear (HALF_FLOAT) then force to NEAREST_SAMPLINGMODE\n        samplingMode = 1;\n      }\n      if (type === 1 && !this._caps.textureFloat) {\n        type = 0;\n        Logger.Warn(\"Float textures are not supported. Type forced to TEXTURETYPE_UNSIGNED_BYTE\");\n      }\n      var gl = this._gl;\n      var texture = new InternalTexture(this, source);\n      var width = size.width || size;\n      var height = size.height || size;\n      var layers = size.layers || 0;\n      var filters = this._getSamplingParameters(samplingMode, generateMipMaps);\n      var target = layers !== 0 ? gl.TEXTURE_2D_ARRAY : gl.TEXTURE_2D;\n      var sizedFormat = this._getRGBABufferInternalSizedFormat(type, format, useSRGBBuffer);\n      var internalFormat = this._getInternalFormat(format);\n      var textureType = this._getWebGLTextureType(type);\n      // Bind\n      this._bindTextureDirectly(target, texture);\n      if (layers !== 0) {\n        texture.is2DArray = true;\n        gl.texImage3D(target, 0, sizedFormat, width, height, layers, 0, internalFormat, textureType, null);\n      } else {\n        gl.texImage2D(target, 0, sizedFormat, width, height, 0, internalFormat, textureType, null);\n      }\n      gl.texParameteri(target, gl.TEXTURE_MAG_FILTER, filters.mag);\n      gl.texParameteri(target, gl.TEXTURE_MIN_FILTER, filters.min);\n      gl.texParameteri(target, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(target, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      // MipMaps\n      if (generateMipMaps) {\n        this._gl.generateMipmap(target);\n      }\n      this._bindTextureDirectly(target, null);\n      texture._useSRGBBuffer = useSRGBBuffer;\n      texture.baseWidth = width;\n      texture.baseHeight = height;\n      texture.width = width;\n      texture.height = height;\n      texture.depth = layers;\n      texture.isReady = true;\n      texture.samples = samples;\n      texture.generateMipMaps = generateMipMaps;\n      texture.samplingMode = samplingMode;\n      texture.type = type;\n      texture.format = format;\n      texture.label = label;\n      this._internalTexturesCache.push(texture);\n      return texture;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_getUseSRGBBuffer\",\n    value: function _getUseSRGBBuffer(useSRGBBuffer, noMipmap) {\n      // Generating mipmaps for sRGB textures is not supported in WebGL1 so we must disable the support if mipmaps is enabled\n      return useSRGBBuffer && this._caps.supportSRGBBuffers && (this.webGLVersion > 1 || this.isWebGPU || noMipmap);\n    }\n  }, {\n    key: \"_createTextureBase\",\n    value: function _createTextureBase(url, noMipmap, invertY, scene) {\n      var _this4 = this;\n      var samplingMode = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 3;\n      var onLoad = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n      var onError = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : null;\n      var prepareTexture = arguments.length > 7 ? arguments[7] : undefined;\n      var prepareTextureProcessFunction = arguments.length > 8 ? arguments[8] : undefined;\n      var buffer = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : null;\n      var fallback = arguments.length > 10 && arguments[10] !== undefined ? arguments[10] : null;\n      var format = arguments.length > 11 && arguments[11] !== undefined ? arguments[11] : null;\n      var forcedExtension = arguments.length > 12 && arguments[12] !== undefined ? arguments[12] : null;\n      var mimeType = arguments.length > 13 ? arguments[13] : undefined;\n      var loaderOptions = arguments.length > 14 ? arguments[14] : undefined;\n      var useSRGBBuffer = arguments.length > 15 ? arguments[15] : undefined;\n      url = url || \"\";\n      var fromData = url.substr(0, 5) === \"data:\";\n      var fromBlob = url.substr(0, 5) === \"blob:\";\n      var isBase64 = fromData && url.indexOf(\";base64,\") !== -1;\n      var texture = fallback ? fallback : new InternalTexture(this, InternalTextureSource.Url);\n      if (texture !== fallback) {\n        texture.label = url.substring(0, 60); // default label, can be overriden by the caller\n      }\n\n      var originalUrl = url;\n      if (this._transformTextureUrl && !isBase64 && !fallback && !buffer) {\n        url = this._transformTextureUrl(url);\n      }\n      if (originalUrl !== url) {\n        texture._originalUrl = originalUrl;\n      }\n      // establish the file extension, if possible\n      var lastDot = url.lastIndexOf(\".\");\n      var extension = forcedExtension ? forcedExtension : lastDot > -1 ? url.substring(lastDot).toLowerCase() : \"\";\n      var loader = null;\n      // Remove query string\n      var queryStringIndex = extension.indexOf(\"?\");\n      if (queryStringIndex > -1) {\n        extension = extension.split(\"?\")[0];\n      }\n      var _iterator7 = _createForOfIteratorHelper(ThinEngine._TextureLoaders),\n        _step7;\n      try {\n        for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n          var availableLoader = _step7.value;\n          if (availableLoader.canLoad(extension, mimeType)) {\n            loader = availableLoader;\n            break;\n          }\n        }\n      } catch (err) {\n        _iterator7.e(err);\n      } finally {\n        _iterator7.f();\n      }\n      if (scene) {\n        scene.addPendingData(texture);\n      }\n      texture.url = url;\n      texture.generateMipMaps = !noMipmap;\n      texture.samplingMode = samplingMode;\n      texture.invertY = invertY;\n      texture._useSRGBBuffer = this._getUseSRGBBuffer(!!useSRGBBuffer, noMipmap);\n      if (!this._doNotHandleContextLost) {\n        // Keep a link to the buffer only if we plan to handle context lost\n        texture._buffer = buffer;\n      }\n      var onLoadObserver = null;\n      if (onLoad && !fallback) {\n        onLoadObserver = texture.onLoadedObservable.add(onLoad);\n      }\n      if (!fallback) {\n        this._internalTexturesCache.push(texture);\n      }\n      var onInternalError = function onInternalError(message, exception) {\n        if (scene) {\n          scene.removePendingData(texture);\n        }\n        if (url === originalUrl) {\n          if (onLoadObserver) {\n            texture.onLoadedObservable.remove(onLoadObserver);\n          }\n          if (EngineStore.UseFallbackTexture) {\n            _this4._createTextureBase(EngineStore.FallbackTexture, noMipmap, texture.invertY, scene, samplingMode, null, onError, prepareTexture, prepareTextureProcessFunction, buffer, texture);\n          }\n          message = (message || \"Unknown error\") + (EngineStore.UseFallbackTexture ? \" - Fallback texture was used\" : \"\");\n          texture.onErrorObservable.notifyObservers({\n            message: message,\n            exception: exception\n          });\n          if (onError) {\n            onError(message, exception);\n          }\n        } else {\n          // fall back to the original url if the transformed url fails to load\n          Logger.Warn(\"Failed to load \".concat(url, \", falling back to \").concat(originalUrl));\n          _this4._createTextureBase(originalUrl, noMipmap, texture.invertY, scene, samplingMode, onLoad, onError, prepareTexture, prepareTextureProcessFunction, buffer, texture, format, forcedExtension, mimeType, loaderOptions, useSRGBBuffer);\n        }\n      };\n      // processing for non-image formats\n      if (loader) {\n        var callback = function callback(data) {\n          loader.loadData(data, texture, function (width, height, loadMipmap, isCompressed, done, loadFailed) {\n            if (loadFailed) {\n              onInternalError(\"TextureLoader failed to load data\");\n            } else {\n              prepareTexture(texture, extension, scene, {\n                width: width,\n                height: height\n              }, texture.invertY, !loadMipmap, isCompressed, function () {\n                done();\n                return false;\n              }, samplingMode);\n            }\n          }, loaderOptions);\n        };\n        if (!buffer) {\n          this._loadFile(url, function (data) {\n            return callback(new Uint8Array(data));\n          }, undefined, scene ? scene.offlineProvider : undefined, true, function (request, exception) {\n            onInternalError(\"Unable to load \" + (request ? request.responseURL : url, exception));\n          });\n        } else {\n          if (buffer instanceof ArrayBuffer) {\n            callback(new Uint8Array(buffer));\n          } else if (ArrayBuffer.isView(buffer)) {\n            callback(buffer);\n          } else {\n            if (onError) {\n              onError(\"Unable to load: only ArrayBuffer or ArrayBufferView is supported\", null);\n            }\n          }\n        }\n      } else {\n        var onload = function onload(img) {\n          if (fromBlob && !_this4._doNotHandleContextLost) {\n            // We need to store the image if we need to rebuild the texture\n            // in case of a webgl context lost\n            texture._buffer = img;\n          }\n          prepareTexture(texture, extension, scene, img, texture.invertY, noMipmap, false, prepareTextureProcessFunction, samplingMode);\n        };\n        // According to the WebGL spec section 6.10, ImageBitmaps must be inverted on creation.\n        // So, we pass imageOrientation to _FileToolsLoadImage() as it may create an ImageBitmap.\n        if (!fromData || isBase64) {\n          if (buffer && (typeof buffer.decoding === \"string\" || buffer.close)) {\n            onload(buffer);\n          } else {\n            ThinEngine._FileToolsLoadImage(url, onload, onInternalError, scene ? scene.offlineProvider : null, mimeType, texture.invertY && this._features.needsInvertingBitmap ? {\n              imageOrientation: \"flipY\"\n            } : undefined);\n          }\n        } else if (typeof buffer === \"string\" || buffer instanceof ArrayBuffer || ArrayBuffer.isView(buffer) || buffer instanceof Blob) {\n          ThinEngine._FileToolsLoadImage(buffer, onload, onInternalError, scene ? scene.offlineProvider : null, mimeType, texture.invertY && this._features.needsInvertingBitmap ? {\n            imageOrientation: \"flipY\"\n          } : undefined);\n        } else if (buffer) {\n          onload(buffer);\n        }\n      }\n      return texture;\n    }\n    /**\n     * Usually called from Texture.ts.\n     * Passed information to create a WebGLTexture\n     * @param url defines a value which contains one of the following:\n     * * A conventional http URL, e.g. 'http://...' or 'file://...'\n     * * A base64 string of in-line texture data, e.g. 'data:image/jpg;base64,/...'\n     * * An indicator that data being passed using the buffer parameter, e.g. 'data:mytexture.jpg'\n     * @param noMipmap defines a boolean indicating that no mipmaps shall be generated.  Ignored for compressed textures.  They must be in the file\n     * @param invertY when true, image is flipped when loaded.  You probably want true. Certain compressed textures may invert this if their default is inverted (eg. ktx)\n     * @param scene needed for loading to the correct scene\n     * @param samplingMode mode with should be used sample / access the texture (Default: Texture.TRILINEAR_SAMPLINGMODE)\n     * @param onLoad optional callback to be called upon successful completion\n     * @param onError optional callback to be called upon failure\n     * @param buffer a source of a file previously fetched as either a base64 string, an ArrayBuffer (compressed or image format), HTMLImageElement (image format), or a Blob\n     * @param fallback an internal argument in case the function must be called again, due to etc1 not having alpha capabilities\n     * @param format internal format.  Default: RGB when extension is '.jpg' else RGBA.  Ignored for compressed textures\n     * @param forcedExtension defines the extension to use to pick the right loader\n     * @param mimeType defines an optional mime type\n     * @param loaderOptions options to be passed to the loader\n     * @param creationFlags specific flags to use when creating the texture (1 for storage textures, for eg)\n     * @param useSRGBBuffer defines if the texture must be loaded in a sRGB GPU buffer (if supported by the GPU).\n     * @returns a InternalTexture for assignment back into BABYLON.Texture\n     */\n  }, {\n    key: \"createTexture\",\n    value: function createTexture(url, noMipmap, invertY, scene) {\n      var _this5 = this;\n      var samplingMode = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 3;\n      var onLoad = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n      var onError = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : null;\n      var buffer = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : null;\n      var fallback = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : null;\n      var format = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : null;\n      var forcedExtension = arguments.length > 10 && arguments[10] !== undefined ? arguments[10] : null;\n      var mimeType = arguments.length > 11 ? arguments[11] : undefined;\n      var loaderOptions = arguments.length > 12 ? arguments[12] : undefined;\n      var creationFlags = arguments.length > 13 ? arguments[13] : undefined;\n      var useSRGBBuffer = arguments.length > 14 ? arguments[14] : undefined;\n      return this._createTextureBase(url, noMipmap, invertY, scene, samplingMode, onLoad, onError, this._prepareWebGLTexture.bind(this), function (potWidth, potHeight, img, extension, texture, continuationCallback) {\n        var gl = _this5._gl;\n        var isPot = img.width === potWidth && img.height === potHeight;\n        var internalFormat = format ? _this5._getInternalFormat(format, texture._useSRGBBuffer) : extension === \".jpg\" && !texture._useSRGBBuffer ? gl.RGB : texture._useSRGBBuffer ? gl.SRGB8_ALPHA8 : gl.RGBA;\n        var texelFormat = format ? _this5._getInternalFormat(format) : extension === \".jpg\" && !texture._useSRGBBuffer ? gl.RGB : gl.RGBA;\n        if (texture._useSRGBBuffer && _this5.webGLVersion === 1) {\n          texelFormat = internalFormat;\n        }\n        if (isPot) {\n          gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat, texelFormat, gl.UNSIGNED_BYTE, img);\n          return false;\n        }\n        var maxTextureSize = _this5._caps.maxTextureSize;\n        if (img.width > maxTextureSize || img.height > maxTextureSize || !_this5._supportsHardwareTextureRescaling) {\n          _this5._prepareWorkingCanvas();\n          if (!_this5._workingCanvas || !_this5._workingContext) {\n            return false;\n          }\n          _this5._workingCanvas.width = potWidth;\n          _this5._workingCanvas.height = potHeight;\n          _this5._workingContext.drawImage(img, 0, 0, img.width, img.height, 0, 0, potWidth, potHeight);\n          gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat, texelFormat, gl.UNSIGNED_BYTE, _this5._workingCanvas);\n          texture.width = potWidth;\n          texture.height = potHeight;\n          return false;\n        } else {\n          // Using shaders when possible to rescale because canvas.drawImage is lossy\n          var source = new InternalTexture(_this5, InternalTextureSource.Temp);\n          _this5._bindTextureDirectly(gl.TEXTURE_2D, source, true);\n          gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat, texelFormat, gl.UNSIGNED_BYTE, img);\n          _this5._rescaleTexture(source, texture, scene, internalFormat, function () {\n            _this5._releaseTexture(source);\n            _this5._bindTextureDirectly(gl.TEXTURE_2D, texture, true);\n            continuationCallback();\n          });\n        }\n        return true;\n      }, buffer, fallback, format, forcedExtension, mimeType, loaderOptions, useSRGBBuffer);\n    }\n    /**\n     * Loads an image as an HTMLImageElement.\n     * @param input url string, ArrayBuffer, or Blob to load\n     * @param onLoad callback called when the image successfully loads\n     * @param onError callback called when the image fails to load\n     * @param offlineProvider offline provider for caching\n     * @param mimeType optional mime type\n     * @param imageBitmapOptions optional the options to use when creating an ImageBitmap\n     * @returns the HTMLImageElement of the loaded image\n     * @internal\n     */\n  }, {\n    key: \"_rescaleTexture\",\n    value:\n    /**\n     * @internal\n     */\n    function _rescaleTexture(source, destination, scene, internalFormat, onComplete) {}\n    /**\n     * Creates a raw texture\n     * @param data defines the data to store in the texture\n     * @param width defines the width of the texture\n     * @param height defines the height of the texture\n     * @param format defines the format of the data\n     * @param generateMipMaps defines if the engine should generate the mip levels\n     * @param invertY defines if data must be stored with Y axis inverted\n     * @param samplingMode defines the required sampling mode (Texture.NEAREST_SAMPLINGMODE by default)\n     * @param compression defines the compression used (null by default)\n     * @param type defines the type fo the data (Engine.TEXTURETYPE_UNSIGNED_INT by default)\n     * @param creationFlags specific flags to use when creating the texture (1 for storage textures, for eg)\n     * @param useSRGBBuffer defines if the texture must be loaded in a sRGB GPU buffer (if supported by the GPU).\n     * @returns the raw texture inside an InternalTexture\n     */\n  }, {\n    key: \"createRawTexture\",\n    value: function createRawTexture(data, width, height, format, generateMipMaps, invertY, samplingMode) {\n      var compression = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : null;\n      var type = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : 0;\n      var creationFlags = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : 0;\n      var useSRGBBuffer = arguments.length > 10 && arguments[10] !== undefined ? arguments[10] : false;\n      throw _WarnImport(\"Engine.RawTexture\");\n    }\n    /**\n     * Creates a new raw cube texture\n     * @param data defines the array of data to use to create each face\n     * @param size defines the size of the textures\n     * @param format defines the format of the data\n     * @param type defines the type of the data (like Engine.TEXTURETYPE_UNSIGNED_INT)\n     * @param generateMipMaps  defines if the engine should generate the mip levels\n     * @param invertY defines if data must be stored with Y axis inverted\n     * @param samplingMode defines the required sampling mode (like Texture.NEAREST_SAMPLINGMODE)\n     * @param compression defines the compression used (null by default)\n     * @returns the cube texture as an InternalTexture\n     */\n  }, {\n    key: \"createRawCubeTexture\",\n    value: function createRawCubeTexture(data, size, format, type, generateMipMaps, invertY, samplingMode) {\n      var compression = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : null;\n      throw _WarnImport(\"Engine.RawTexture\");\n    }\n    /**\n     * Creates a new raw 3D texture\n     * @param data defines the data used to create the texture\n     * @param width defines the width of the texture\n     * @param height defines the height of the texture\n     * @param depth defines the depth of the texture\n     * @param format defines the format of the texture\n     * @param generateMipMaps defines if the engine must generate mip levels\n     * @param invertY defines if data must be stored with Y axis inverted\n     * @param samplingMode defines the required sampling mode (like Texture.NEAREST_SAMPLINGMODE)\n     * @param compression defines the compressed used (can be null)\n     * @param textureType defines the compressed used (can be null)\n     * @returns a new raw 3D texture (stored in an InternalTexture)\n     */\n  }, {\n    key: \"createRawTexture3D\",\n    value: function createRawTexture3D(data, width, height, depth, format, generateMipMaps, invertY, samplingMode) {\n      var compression = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : null;\n      var textureType = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : 0;\n      throw _WarnImport(\"Engine.RawTexture\");\n    }\n    /**\n     * Creates a new raw 2D array texture\n     * @param data defines the data used to create the texture\n     * @param width defines the width of the texture\n     * @param height defines the height of the texture\n     * @param depth defines the number of layers of the texture\n     * @param format defines the format of the texture\n     * @param generateMipMaps defines if the engine must generate mip levels\n     * @param invertY defines if data must be stored with Y axis inverted\n     * @param samplingMode defines the required sampling mode (like Texture.NEAREST_SAMPLINGMODE)\n     * @param compression defines the compressed used (can be null)\n     * @param textureType defines the compressed used (can be null)\n     * @returns a new raw 2D array texture (stored in an InternalTexture)\n     */\n  }, {\n    key: \"createRawTexture2DArray\",\n    value: function createRawTexture2DArray(data, width, height, depth, format, generateMipMaps, invertY, samplingMode) {\n      var compression = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : null;\n      var textureType = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : 0;\n      throw _WarnImport(\"Engine.RawTexture\");\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_unpackFlipY\",\n    value: function _unpackFlipY(value) {\n      if (this._unpackFlipYCached !== value) {\n        this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL, value ? 1 : 0);\n        if (this.enableUnpackFlipYCached) {\n          this._unpackFlipYCached = value;\n        }\n      }\n    }\n    /** @internal */\n  }, {\n    key: \"_getUnpackAlignement\",\n    value: function _getUnpackAlignement() {\n      return this._gl.getParameter(this._gl.UNPACK_ALIGNMENT);\n    }\n  }, {\n    key: \"_getTextureTarget\",\n    value: function _getTextureTarget(texture) {\n      if (texture.isCube) {\n        return this._gl.TEXTURE_CUBE_MAP;\n      } else if (texture.is3D) {\n        return this._gl.TEXTURE_3D;\n      } else if (texture.is2DArray || texture.isMultiview) {\n        return this._gl.TEXTURE_2D_ARRAY;\n      }\n      return this._gl.TEXTURE_2D;\n    }\n    /**\n     * Update the sampling mode of a given texture\n     * @param samplingMode defines the required sampling mode\n     * @param texture defines the texture to update\n     * @param generateMipMaps defines whether to generate mipmaps for the texture\n     */\n  }, {\n    key: \"updateTextureSamplingMode\",\n    value: function updateTextureSamplingMode(samplingMode, texture) {\n      var generateMipMaps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var target = this._getTextureTarget(texture);\n      var filters = this._getSamplingParameters(samplingMode, texture.useMipMaps || generateMipMaps);\n      this._setTextureParameterInteger(target, this._gl.TEXTURE_MAG_FILTER, filters.mag, texture);\n      this._setTextureParameterInteger(target, this._gl.TEXTURE_MIN_FILTER, filters.min);\n      if (generateMipMaps) {\n        texture.generateMipMaps = true;\n        this._gl.generateMipmap(target);\n      }\n      this._bindTextureDirectly(target, null);\n      texture.samplingMode = samplingMode;\n    }\n    /**\n     * Update the dimensions of a texture\n     * @param texture texture to update\n     * @param width new width of the texture\n     * @param height new height of the texture\n     * @param depth new depth of the texture\n     */\n  }, {\n    key: \"updateTextureDimensions\",\n    value: function updateTextureDimensions(texture, width, height) {\n      var depth = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n    }\n    /**\n     * Update the sampling mode of a given texture\n     * @param texture defines the texture to update\n     * @param wrapU defines the texture wrap mode of the u coordinates\n     * @param wrapV defines the texture wrap mode of the v coordinates\n     * @param wrapR defines the texture wrap mode of the r coordinates\n     */\n  }, {\n    key: \"updateTextureWrappingMode\",\n    value: function updateTextureWrappingMode(texture, wrapU) {\n      var wrapV = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var wrapR = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n      var target = this._getTextureTarget(texture);\n      if (wrapU !== null) {\n        this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_S, this._getTextureWrapMode(wrapU), texture);\n        texture._cachedWrapU = wrapU;\n      }\n      if (wrapV !== null) {\n        this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_T, this._getTextureWrapMode(wrapV), texture);\n        texture._cachedWrapV = wrapV;\n      }\n      if ((texture.is2DArray || texture.is3D) && wrapR !== null) {\n        this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_R, this._getTextureWrapMode(wrapR), texture);\n        texture._cachedWrapR = wrapR;\n      }\n      this._bindTextureDirectly(target, null);\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_setupDepthStencilTexture\",\n    value: function _setupDepthStencilTexture(internalTexture, size, generateStencil, bilinearFiltering, comparisonFunction) {\n      var samples = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 1;\n      var width = size.width || size;\n      var height = size.height || size;\n      var layers = size.layers || 0;\n      internalTexture.baseWidth = width;\n      internalTexture.baseHeight = height;\n      internalTexture.width = width;\n      internalTexture.height = height;\n      internalTexture.is2DArray = layers > 0;\n      internalTexture.depth = layers;\n      internalTexture.isReady = true;\n      internalTexture.samples = samples;\n      internalTexture.generateMipMaps = false;\n      internalTexture.samplingMode = bilinearFiltering ? 2 : 1;\n      internalTexture.type = 0;\n      internalTexture._comparisonFunction = comparisonFunction;\n      var gl = this._gl;\n      var target = this._getTextureTarget(internalTexture);\n      var samplingParameters = this._getSamplingParameters(internalTexture.samplingMode, false);\n      gl.texParameteri(target, gl.TEXTURE_MAG_FILTER, samplingParameters.mag);\n      gl.texParameteri(target, gl.TEXTURE_MIN_FILTER, samplingParameters.min);\n      gl.texParameteri(target, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(target, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      // TEXTURE_COMPARE_FUNC/MODE are only availble in WebGL2.\n      if (this.webGLVersion > 1) {\n        if (comparisonFunction === 0) {\n          gl.texParameteri(target, gl.TEXTURE_COMPARE_FUNC, 515);\n          gl.texParameteri(target, gl.TEXTURE_COMPARE_MODE, gl.NONE);\n        } else {\n          gl.texParameteri(target, gl.TEXTURE_COMPARE_FUNC, comparisonFunction);\n          gl.texParameteri(target, gl.TEXTURE_COMPARE_MODE, gl.COMPARE_REF_TO_TEXTURE);\n        }\n      }\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_uploadCompressedDataToTextureDirectly\",\n    value: function _uploadCompressedDataToTextureDirectly(texture, internalFormat, width, height, data) {\n      var faceIndex = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n      var lod = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n      var gl = this._gl;\n      var target = gl.TEXTURE_2D;\n      if (texture.isCube) {\n        target = gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex;\n      }\n      if (texture._useSRGBBuffer) {\n        switch (internalFormat) {\n          case 37492:\n          case 36196:\n            // Note, if using ETC1 and sRGB is requested, this will use ETC2 if available.\n            if (this._caps.etc2) {\n              internalFormat = gl.COMPRESSED_SRGB8_ETC2;\n            } else {\n              texture._useSRGBBuffer = false;\n            }\n            break;\n          case 37496:\n            if (this._caps.etc2) {\n              internalFormat = gl.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC;\n            } else {\n              texture._useSRGBBuffer = false;\n            }\n            break;\n          case 36492:\n            internalFormat = gl.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT;\n            break;\n          case 37808:\n            internalFormat = gl.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR;\n            break;\n          case 33776:\n            if (this._caps.s3tc_srgb) {\n              internalFormat = gl.COMPRESSED_SRGB_S3TC_DXT1_EXT;\n            } else {\n              // S3TC sRGB extension not supported\n              texture._useSRGBBuffer = false;\n            }\n            break;\n          case 33777:\n            if (this._caps.s3tc_srgb) {\n              internalFormat = gl.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;\n            } else {\n              // S3TC sRGB extension not supported\n              texture._useSRGBBuffer = false;\n            }\n            break;\n          case 33779:\n            if (this._caps.s3tc_srgb) {\n              internalFormat = gl.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;\n            } else {\n              // S3TC sRGB extension not supported\n              texture._useSRGBBuffer = false;\n            }\n            break;\n          default:\n            // We don't support a sRGB format corresponding to internalFormat, so revert to non sRGB format\n            texture._useSRGBBuffer = false;\n            break;\n        }\n      }\n      this._gl.compressedTexImage2D(target, lod, internalFormat, width, height, 0, data);\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_uploadDataToTextureDirectly\",\n    value: function _uploadDataToTextureDirectly(texture, imageData) {\n      var faceIndex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var lod = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var babylonInternalFormat = arguments.length > 4 ? arguments[4] : undefined;\n      var useTextureWidthAndHeight = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n      var gl = this._gl;\n      var textureType = this._getWebGLTextureType(texture.type);\n      var format = this._getInternalFormat(texture.format);\n      var internalFormat = babylonInternalFormat === undefined ? this._getRGBABufferInternalSizedFormat(texture.type, texture.format, texture._useSRGBBuffer) : this._getInternalFormat(babylonInternalFormat, texture._useSRGBBuffer);\n      this._unpackFlipY(texture.invertY);\n      var target = gl.TEXTURE_2D;\n      if (texture.isCube) {\n        target = gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex;\n      }\n      var lodMaxWidth = Math.round(Math.log(texture.width) * Math.LOG2E);\n      var lodMaxHeight = Math.round(Math.log(texture.height) * Math.LOG2E);\n      var width = useTextureWidthAndHeight ? texture.width : Math.pow(2, Math.max(lodMaxWidth - lod, 0));\n      var height = useTextureWidthAndHeight ? texture.height : Math.pow(2, Math.max(lodMaxHeight - lod, 0));\n      gl.texImage2D(target, lod, internalFormat, width, height, 0, format, textureType, imageData);\n    }\n    /**\n     * Update a portion of an internal texture\n     * @param texture defines the texture to update\n     * @param imageData defines the data to store into the texture\n     * @param xOffset defines the x coordinates of the update rectangle\n     * @param yOffset defines the y coordinates of the update rectangle\n     * @param width defines the width of the update rectangle\n     * @param height defines the height of the update rectangle\n     * @param faceIndex defines the face index if texture is a cube (0 by default)\n     * @param lod defines the lod level to update (0 by default)\n     * @param generateMipMaps defines whether to generate mipmaps or not\n     */\n  }, {\n    key: \"updateTextureData\",\n    value: function updateTextureData(texture, imageData, xOffset, yOffset, width, height) {\n      var faceIndex = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n      var lod = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 0;\n      var generateMipMaps = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : false;\n      var gl = this._gl;\n      var textureType = this._getWebGLTextureType(texture.type);\n      var format = this._getInternalFormat(texture.format);\n      this._unpackFlipY(texture.invertY);\n      var targetForBinding = gl.TEXTURE_2D;\n      var target = gl.TEXTURE_2D;\n      if (texture.isCube) {\n        target = gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex;\n        targetForBinding = gl.TEXTURE_CUBE_MAP;\n      }\n      this._bindTextureDirectly(targetForBinding, texture, true);\n      gl.texSubImage2D(target, lod, xOffset, yOffset, width, height, format, textureType, imageData);\n      if (generateMipMaps) {\n        this._gl.generateMipmap(target);\n      }\n      this._bindTextureDirectly(targetForBinding, null);\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_uploadArrayBufferViewToTexture\",\n    value: function _uploadArrayBufferViewToTexture(texture, imageData) {\n      var faceIndex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var lod = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var gl = this._gl;\n      var bindTarget = texture.isCube ? gl.TEXTURE_CUBE_MAP : gl.TEXTURE_2D;\n      this._bindTextureDirectly(bindTarget, texture, true);\n      this._uploadDataToTextureDirectly(texture, imageData, faceIndex, lod);\n      this._bindTextureDirectly(bindTarget, null, true);\n    }\n  }, {\n    key: \"_prepareWebGLTextureContinuation\",\n    value: function _prepareWebGLTextureContinuation(texture, scene, noMipmap, isCompressed, samplingMode) {\n      var gl = this._gl;\n      if (!gl) {\n        return;\n      }\n      var filters = this._getSamplingParameters(samplingMode, !noMipmap);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, filters.mag);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, filters.min);\n      if (!noMipmap && !isCompressed) {\n        gl.generateMipmap(gl.TEXTURE_2D);\n      }\n      this._bindTextureDirectly(gl.TEXTURE_2D, null);\n      // this.resetTextureCache();\n      if (scene) {\n        scene.removePendingData(texture);\n      }\n      texture.onLoadedObservable.notifyObservers(texture);\n      texture.onLoadedObservable.clear();\n    }\n  }, {\n    key: \"_prepareWebGLTexture\",\n    value: function _prepareWebGLTexture(texture, extension, scene, img, invertY, noMipmap, isCompressed, processFunction) {\n      var _this6 = this;\n      var samplingMode = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : 3;\n      var maxTextureSize = this.getCaps().maxTextureSize;\n      var potWidth = Math.min(maxTextureSize, this.needPOTTextures ? ThinEngine.GetExponentOfTwo(img.width, maxTextureSize) : img.width);\n      var potHeight = Math.min(maxTextureSize, this.needPOTTextures ? ThinEngine.GetExponentOfTwo(img.height, maxTextureSize) : img.height);\n      var gl = this._gl;\n      if (!gl) {\n        return;\n      }\n      if (!texture._hardwareTexture) {\n        //  this.resetTextureCache();\n        if (scene) {\n          scene.removePendingData(texture);\n        }\n        return;\n      }\n      this._bindTextureDirectly(gl.TEXTURE_2D, texture, true);\n      this._unpackFlipY(invertY === undefined ? true : invertY ? true : false);\n      texture.baseWidth = img.width;\n      texture.baseHeight = img.height;\n      texture.width = potWidth;\n      texture.height = potHeight;\n      texture.isReady = true;\n      if (processFunction(potWidth, potHeight, img, extension, texture, function () {\n        _this6._prepareWebGLTextureContinuation(texture, scene, noMipmap, isCompressed, samplingMode);\n      })) {\n        // Returning as texture needs extra async steps\n        return;\n      }\n      this._prepareWebGLTextureContinuation(texture, scene, noMipmap, isCompressed, samplingMode);\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_setupFramebufferDepthAttachments\",\n    value: function _setupFramebufferDepthAttachments(generateStencilBuffer, generateDepthBuffer, width, height) {\n      var samples = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n      var gl = this._gl;\n      // Create the depth/stencil buffer\n      if (generateStencilBuffer && generateDepthBuffer) {\n        return this._createRenderBuffer(width, height, samples, gl.DEPTH_STENCIL, gl.DEPTH24_STENCIL8, gl.DEPTH_STENCIL_ATTACHMENT);\n      }\n      if (generateDepthBuffer) {\n        var depthFormat = gl.DEPTH_COMPONENT16;\n        if (this._webGLVersion > 1) {\n          depthFormat = gl.DEPTH_COMPONENT32F;\n        }\n        return this._createRenderBuffer(width, height, samples, depthFormat, depthFormat, gl.DEPTH_ATTACHMENT);\n      }\n      if (generateStencilBuffer) {\n        return this._createRenderBuffer(width, height, samples, gl.STENCIL_INDEX8, gl.STENCIL_INDEX8, gl.STENCIL_ATTACHMENT);\n      }\n      return null;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_createRenderBuffer\",\n    value: function _createRenderBuffer(width, height, samples, internalFormat, msInternalFormat, attachment) {\n      var unbindBuffer = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : true;\n      var gl = this._gl;\n      var renderBuffer = gl.createRenderbuffer();\n      return this._updateRenderBuffer(renderBuffer, width, height, samples, internalFormat, msInternalFormat, attachment, unbindBuffer);\n    }\n  }, {\n    key: \"_updateRenderBuffer\",\n    value: function _updateRenderBuffer(renderBuffer, width, height, samples, internalFormat, msInternalFormat, attachment) {\n      var unbindBuffer = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : true;\n      var gl = this._gl;\n      gl.bindRenderbuffer(gl.RENDERBUFFER, renderBuffer);\n      if (samples > 1 && gl.renderbufferStorageMultisample) {\n        gl.renderbufferStorageMultisample(gl.RENDERBUFFER, samples, msInternalFormat, width, height);\n      } else {\n        gl.renderbufferStorage(gl.RENDERBUFFER, internalFormat, width, height);\n      }\n      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, attachment, gl.RENDERBUFFER, renderBuffer);\n      if (unbindBuffer) {\n        gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n      }\n      return renderBuffer;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_releaseTexture\",\n    value: function _releaseTexture(texture) {\n      var _a;\n      this._deleteTexture((_a = texture._hardwareTexture) === null || _a === void 0 ? void 0 : _a.underlyingResource);\n      // Unbind channels\n      this.unbindAllTextures();\n      var index = this._internalTexturesCache.indexOf(texture);\n      if (index !== -1) {\n        this._internalTexturesCache.splice(index, 1);\n      }\n      // Integrated fixed lod samplers.\n      if (texture._lodTextureHigh) {\n        texture._lodTextureHigh.dispose();\n      }\n      if (texture._lodTextureMid) {\n        texture._lodTextureMid.dispose();\n      }\n      if (texture._lodTextureLow) {\n        texture._lodTextureLow.dispose();\n      }\n      // Integrated irradiance map.\n      if (texture._irradianceTexture) {\n        texture._irradianceTexture.dispose();\n      }\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_releaseRenderTargetWrapper\",\n    value: function _releaseRenderTargetWrapper(rtWrapper) {\n      var index = this._renderTargetWrapperCache.indexOf(rtWrapper);\n      if (index !== -1) {\n        this._renderTargetWrapperCache.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"_deleteTexture\",\n    value: function _deleteTexture(texture) {\n      if (texture) {\n        this._gl.deleteTexture(texture);\n      }\n    }\n  }, {\n    key: \"_setProgram\",\n    value: function _setProgram(program) {\n      if (this._currentProgram !== program) {\n        this._gl.useProgram(program);\n        this._currentProgram = program;\n      }\n    }\n    /**\n     * Binds an effect to the webGL context\n     * @param effect defines the effect to bind\n     */\n  }, {\n    key: \"bindSamplers\",\n    value: function bindSamplers(effect) {\n      var webGLPipelineContext = effect.getPipelineContext();\n      this._setProgram(webGLPipelineContext.program);\n      var samplers = effect.getSamplers();\n      for (var index = 0; index < samplers.length; index++) {\n        var uniform = effect.getUniform(samplers[index]);\n        if (uniform) {\n          this._boundUniforms[index] = uniform;\n        }\n      }\n      this._currentEffect = null;\n    }\n  }, {\n    key: \"_activateCurrentTexture\",\n    value: function _activateCurrentTexture() {\n      if (this._currentTextureChannel !== this._activeChannel) {\n        this._gl.activeTexture(this._gl.TEXTURE0 + this._activeChannel);\n        this._currentTextureChannel = this._activeChannel;\n      }\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_bindTextureDirectly\",\n    value: function _bindTextureDirectly(target, texture) {\n      var forTextureDataUpdate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var force = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var _a, _b;\n      var wasPreviouslyBound = false;\n      var isTextureForRendering = texture && texture._associatedChannel > -1;\n      if (forTextureDataUpdate && isTextureForRendering) {\n        this._activeChannel = texture._associatedChannel;\n      }\n      var currentTextureBound = this._boundTexturesCache[this._activeChannel];\n      if (currentTextureBound !== texture || force) {\n        this._activateCurrentTexture();\n        if (texture && texture.isMultiview) {\n          //this._gl.bindTexture(target, texture ? texture._colorTextureArray : null);\n          console.error(target, texture);\n          throw \"_bindTextureDirectly called with a multiview texture!\";\n        } else {\n          this._gl.bindTexture(target, (_b = (_a = texture === null || texture === void 0 ? void 0 : texture._hardwareTexture) === null || _a === void 0 ? void 0 : _a.underlyingResource) !== null && _b !== void 0 ? _b : null);\n        }\n        this._boundTexturesCache[this._activeChannel] = texture;\n        if (texture) {\n          texture._associatedChannel = this._activeChannel;\n        }\n      } else if (forTextureDataUpdate) {\n        wasPreviouslyBound = true;\n        this._activateCurrentTexture();\n      }\n      if (isTextureForRendering && !forTextureDataUpdate) {\n        this._bindSamplerUniformToChannel(texture._associatedChannel, this._activeChannel);\n      }\n      return wasPreviouslyBound;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_bindTexture\",\n    value: function _bindTexture(channel, texture, name) {\n      if (channel === undefined) {\n        return;\n      }\n      if (texture) {\n        texture._associatedChannel = channel;\n      }\n      this._activeChannel = channel;\n      var target = texture ? this._getTextureTarget(texture) : this._gl.TEXTURE_2D;\n      this._bindTextureDirectly(target, texture);\n    }\n    /**\n     * Unbind all textures from the webGL context\n     */\n  }, {\n    key: \"unbindAllTextures\",\n    value: function unbindAllTextures() {\n      for (var channel = 0; channel < this._maxSimultaneousTextures; channel++) {\n        this._activeChannel = channel;\n        this._bindTextureDirectly(this._gl.TEXTURE_2D, null);\n        this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP, null);\n        if (this.webGLVersion > 1) {\n          this._bindTextureDirectly(this._gl.TEXTURE_3D, null);\n          this._bindTextureDirectly(this._gl.TEXTURE_2D_ARRAY, null);\n        }\n      }\n    }\n    /**\n     * Sets a texture to the according uniform.\n     * @param channel The texture channel\n     * @param uniform The uniform to set\n     * @param texture The texture to apply\n     * @param name The name of the uniform in the effect\n     */\n  }, {\n    key: \"setTexture\",\n    value: function setTexture(channel, uniform, texture, name) {\n      if (channel === undefined) {\n        return;\n      }\n      if (uniform) {\n        this._boundUniforms[channel] = uniform;\n      }\n      this._setTexture(channel, texture);\n    }\n  }, {\n    key: \"_bindSamplerUniformToChannel\",\n    value: function _bindSamplerUniformToChannel(sourceSlot, destination) {\n      var uniform = this._boundUniforms[sourceSlot];\n      if (!uniform || uniform._currentState === destination) {\n        return;\n      }\n      this._gl.uniform1i(uniform, destination);\n      uniform._currentState = destination;\n    }\n  }, {\n    key: \"_getTextureWrapMode\",\n    value: function _getTextureWrapMode(mode) {\n      switch (mode) {\n        case 1:\n          return this._gl.REPEAT;\n        case 0:\n          return this._gl.CLAMP_TO_EDGE;\n        case 2:\n          return this._gl.MIRRORED_REPEAT;\n      }\n      return this._gl.REPEAT;\n    }\n  }, {\n    key: \"_setTexture\",\n    value: function _setTexture(channel, texture) {\n      var isPartOfTextureArray = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var depthStencilTexture = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var name = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : \"\";\n      // Not ready?\n      if (!texture) {\n        if (this._boundTexturesCache[channel] != null) {\n          this._activeChannel = channel;\n          this._bindTextureDirectly(this._gl.TEXTURE_2D, null);\n          this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP, null);\n          if (this.webGLVersion > 1) {\n            this._bindTextureDirectly(this._gl.TEXTURE_3D, null);\n            this._bindTextureDirectly(this._gl.TEXTURE_2D_ARRAY, null);\n          }\n        }\n        return false;\n      }\n      // Video\n      if (texture.video) {\n        this._activeChannel = channel;\n        texture.update();\n      } else if (texture.delayLoadState === 4) {\n        // Delay loading\n        texture.delayLoad();\n        return false;\n      }\n      var internalTexture;\n      if (depthStencilTexture) {\n        internalTexture = texture.depthStencilTexture;\n      } else if (texture.isReady()) {\n        internalTexture = texture.getInternalTexture();\n      } else if (texture.isCube) {\n        internalTexture = this.emptyCubeTexture;\n      } else if (texture.is3D) {\n        internalTexture = this.emptyTexture3D;\n      } else if (texture.is2DArray) {\n        internalTexture = this.emptyTexture2DArray;\n      } else {\n        internalTexture = this.emptyTexture;\n      }\n      if (!isPartOfTextureArray && internalTexture) {\n        internalTexture._associatedChannel = channel;\n      }\n      var needToBind = true;\n      if (this._boundTexturesCache[channel] === internalTexture) {\n        if (!isPartOfTextureArray) {\n          this._bindSamplerUniformToChannel(internalTexture._associatedChannel, channel);\n        }\n        needToBind = false;\n      }\n      this._activeChannel = channel;\n      var target = this._getTextureTarget(internalTexture);\n      if (needToBind) {\n        this._bindTextureDirectly(target, internalTexture, isPartOfTextureArray);\n      }\n      if (internalTexture && !internalTexture.isMultiview) {\n        // CUBIC_MODE and SKYBOX_MODE both require CLAMP_TO_EDGE.  All other modes use REPEAT.\n        if (internalTexture.isCube && internalTexture._cachedCoordinatesMode !== texture.coordinatesMode) {\n          internalTexture._cachedCoordinatesMode = texture.coordinatesMode;\n          var textureWrapMode = texture.coordinatesMode !== 3 && texture.coordinatesMode !== 5 ? 1 : 0;\n          texture.wrapU = textureWrapMode;\n          texture.wrapV = textureWrapMode;\n        }\n        if (internalTexture._cachedWrapU !== texture.wrapU) {\n          internalTexture._cachedWrapU = texture.wrapU;\n          this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_S, this._getTextureWrapMode(texture.wrapU), internalTexture);\n        }\n        if (internalTexture._cachedWrapV !== texture.wrapV) {\n          internalTexture._cachedWrapV = texture.wrapV;\n          this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_T, this._getTextureWrapMode(texture.wrapV), internalTexture);\n        }\n        if (internalTexture.is3D && internalTexture._cachedWrapR !== texture.wrapR) {\n          internalTexture._cachedWrapR = texture.wrapR;\n          this._setTextureParameterInteger(target, this._gl.TEXTURE_WRAP_R, this._getTextureWrapMode(texture.wrapR), internalTexture);\n        }\n        this._setAnisotropicLevel(target, internalTexture, texture.anisotropicFilteringLevel);\n      }\n      return true;\n    }\n    /**\n     * Sets an array of texture to the webGL context\n     * @param channel defines the channel where the texture array must be set\n     * @param uniform defines the associated uniform location\n     * @param textures defines the array of textures to bind\n     * @param name name of the channel\n     */\n  }, {\n    key: \"setTextureArray\",\n    value: function setTextureArray(channel, uniform, textures, name) {\n      if (channel === undefined || !uniform) {\n        return;\n      }\n      if (!this._textureUnits || this._textureUnits.length !== textures.length) {\n        this._textureUnits = new Int32Array(textures.length);\n      }\n      for (var i = 0; i < textures.length; i++) {\n        var texture = textures[i].getInternalTexture();\n        if (texture) {\n          this._textureUnits[i] = channel + i;\n          texture._associatedChannel = channel + i;\n        } else {\n          this._textureUnits[i] = -1;\n        }\n      }\n      this._gl.uniform1iv(uniform, this._textureUnits);\n      for (var index = 0; index < textures.length; index++) {\n        this._setTexture(this._textureUnits[index], textures[index], true);\n      }\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_setAnisotropicLevel\",\n    value: function _setAnisotropicLevel(target, internalTexture, anisotropicFilteringLevel) {\n      var anisotropicFilterExtension = this._caps.textureAnisotropicFilterExtension;\n      if (internalTexture.samplingMode !== 11 && internalTexture.samplingMode !== 3 && internalTexture.samplingMode !== 2) {\n        anisotropicFilteringLevel = 1; // Forcing the anisotropic to 1 because else webgl will force filters to linear\n      }\n\n      if (anisotropicFilterExtension && internalTexture._cachedAnisotropicFilteringLevel !== anisotropicFilteringLevel) {\n        this._setTextureParameterFloat(target, anisotropicFilterExtension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(anisotropicFilteringLevel, this._caps.maxAnisotropy), internalTexture);\n        internalTexture._cachedAnisotropicFilteringLevel = anisotropicFilteringLevel;\n      }\n    }\n  }, {\n    key: \"_setTextureParameterFloat\",\n    value: function _setTextureParameterFloat(target, parameter, value, texture) {\n      this._bindTextureDirectly(target, texture, true, true);\n      this._gl.texParameterf(target, parameter, value);\n    }\n  }, {\n    key: \"_setTextureParameterInteger\",\n    value: function _setTextureParameterInteger(target, parameter, value, texture) {\n      if (texture) {\n        this._bindTextureDirectly(target, texture, true, true);\n      }\n      this._gl.texParameteri(target, parameter, value);\n    }\n    /**\n     * Unbind all vertex attributes from the webGL context\n     */\n  }, {\n    key: \"unbindAllAttributes\",\n    value: function unbindAllAttributes() {\n      if (this._mustWipeVertexAttributes) {\n        this._mustWipeVertexAttributes = false;\n        for (var i = 0; i < this._caps.maxVertexAttribs; i++) {\n          this.disableAttributeByIndex(i);\n        }\n        return;\n      }\n      for (var _i2 = 0, ul = this._vertexAttribArraysEnabled.length; _i2 < ul; _i2++) {\n        if (_i2 >= this._caps.maxVertexAttribs || !this._vertexAttribArraysEnabled[_i2]) {\n          continue;\n        }\n        this.disableAttributeByIndex(_i2);\n      }\n    }\n    /**\n     * Force the engine to release all cached effects. This means that next effect compilation will have to be done completely even if a similar effect was already compiled\n     */\n  }, {\n    key: \"releaseEffects\",\n    value: function releaseEffects() {\n      for (var name in this._compiledEffects) {\n        var webGLPipelineContext = this._compiledEffects[name].getPipelineContext();\n        this._deletePipelineContext(webGLPipelineContext);\n      }\n      this._compiledEffects = {};\n    }\n    /**\n     * Dispose and release all associated resources\n     */\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var _a;\n      this._isDisposed = true;\n      this.stopRenderLoop();\n      // Clear observables\n      if (this.onBeforeTextureInitObservable) {\n        this.onBeforeTextureInitObservable.clear();\n      }\n      // Empty texture\n      if (this._emptyTexture) {\n        this._releaseTexture(this._emptyTexture);\n        this._emptyTexture = null;\n      }\n      if (this._emptyCubeTexture) {\n        this._releaseTexture(this._emptyCubeTexture);\n        this._emptyCubeTexture = null;\n      }\n      if (this._dummyFramebuffer) {\n        this._gl.deleteFramebuffer(this._dummyFramebuffer);\n      }\n      // Release effects\n      this.releaseEffects();\n      (_a = this.releaseComputeEffects) === null || _a === void 0 ? void 0 : _a.call(this);\n      // Unbind\n      this.unbindAllAttributes();\n      this._boundUniforms = {};\n      // Events\n      if (IsWindowObjectExist()) {\n        if (this._renderingCanvas) {\n          if (!this._doNotHandleContextLost) {\n            this._renderingCanvas.removeEventListener(\"webglcontextlost\", this._onContextLost);\n            this._renderingCanvas.removeEventListener(\"webglcontextrestored\", this._onContextRestored);\n          }\n          window.removeEventListener(\"resize\", this._checkForMobile);\n        }\n      }\n      this._workingCanvas = null;\n      this._workingContext = null;\n      this._currentBufferPointers.length = 0;\n      this._renderingCanvas = null;\n      this._currentProgram = null;\n      this._boundRenderFunction = null;\n      Effect.ResetCache();\n      // Abort active requests\n      var _iterator8 = _createForOfIteratorHelper(this._activeRequests),\n        _step8;\n      try {\n        for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n          var request = _step8.value;\n          request.abort();\n        }\n      } catch (err) {\n        _iterator8.e(err);\n      } finally {\n        _iterator8.f();\n      }\n      this.onDisposeObservable.notifyObservers(this);\n      this.onDisposeObservable.clear();\n    }\n    /**\n     * Attach a new callback raised when context lost event is fired\n     * @param callback defines the callback to call\n     */\n  }, {\n    key: \"attachContextLostEvent\",\n    value: function attachContextLostEvent(callback) {\n      if (this._renderingCanvas) {\n        this._renderingCanvas.addEventListener(\"webglcontextlost\", callback, false);\n      }\n    }\n    /**\n     * Attach a new callback raised when context restored event is fired\n     * @param callback defines the callback to call\n     */\n  }, {\n    key: \"attachContextRestoredEvent\",\n    value: function attachContextRestoredEvent(callback) {\n      if (this._renderingCanvas) {\n        this._renderingCanvas.addEventListener(\"webglcontextrestored\", callback, false);\n      }\n    }\n    /**\n     * Get the current error code of the webGL context\n     * @returns the error code\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/getError\n     */\n  }, {\n    key: \"getError\",\n    value: function getError() {\n      return this._gl.getError();\n    }\n  }, {\n    key: \"_canRenderToFloatFramebuffer\",\n    value: function _canRenderToFloatFramebuffer() {\n      if (this._webGLVersion > 1) {\n        return this._caps.colorBufferFloat;\n      }\n      return this._canRenderToFramebuffer(1);\n    }\n  }, {\n    key: \"_canRenderToHalfFloatFramebuffer\",\n    value: function _canRenderToHalfFloatFramebuffer() {\n      if (this._webGLVersion > 1) {\n        return this._caps.colorBufferFloat;\n      }\n      return this._canRenderToFramebuffer(2);\n    }\n    // Thank you : http://stackoverflow.com/questions/28827511/webgl-ios-render-to-floating-point-texture\n  }, {\n    key: \"_canRenderToFramebuffer\",\n    value: function _canRenderToFramebuffer(type) {\n      var gl = this._gl;\n      //clear existing errors\n      // eslint-disable-next-line no-empty\n      while (gl.getError() !== gl.NO_ERROR) {}\n      var successful = true;\n      var texture = gl.createTexture();\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n      gl.texImage2D(gl.TEXTURE_2D, 0, this._getRGBABufferInternalSizedFormat(type), 1, 1, 0, gl.RGBA, this._getWebGLTextureType(type), null);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n      var fb = gl.createFramebuffer();\n      gl.bindFramebuffer(gl.FRAMEBUFFER, fb);\n      gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n      var status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n      successful = successful && status === gl.FRAMEBUFFER_COMPLETE;\n      successful = successful && gl.getError() === gl.NO_ERROR;\n      //try render by clearing frame buffer's color buffer\n      if (successful) {\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        successful = successful && gl.getError() === gl.NO_ERROR;\n      }\n      //try reading from frame to ensure render occurs (just creating the FBO is not sufficient to determine if rendering is supported)\n      if (successful) {\n        //in practice it's sufficient to just read from the backbuffer rather than handle potentially issues reading from the texture\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        var readFormat = gl.RGBA;\n        var readType = gl.UNSIGNED_BYTE;\n        var buffer = new Uint8Array(4);\n        gl.readPixels(0, 0, 1, 1, readFormat, readType, buffer);\n        successful = successful && gl.getError() === gl.NO_ERROR;\n      }\n      //clean up\n      gl.deleteTexture(texture);\n      gl.deleteFramebuffer(fb);\n      gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n      //clear accumulated errors\n      // eslint-disable-next-line no-empty\n      while (!successful && gl.getError() !== gl.NO_ERROR) {}\n      return successful;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_getWebGLTextureType\",\n    value: function _getWebGLTextureType(type) {\n      if (this._webGLVersion === 1) {\n        switch (type) {\n          case 1:\n            return this._gl.FLOAT;\n          case 2:\n            return this._gl.HALF_FLOAT_OES;\n          case 0:\n            return this._gl.UNSIGNED_BYTE;\n          case 8:\n            return this._gl.UNSIGNED_SHORT_4_4_4_4;\n          case 9:\n            return this._gl.UNSIGNED_SHORT_5_5_5_1;\n          case 10:\n            return this._gl.UNSIGNED_SHORT_5_6_5;\n        }\n        return this._gl.UNSIGNED_BYTE;\n      }\n      switch (type) {\n        case 3:\n          return this._gl.BYTE;\n        case 0:\n          return this._gl.UNSIGNED_BYTE;\n        case 4:\n          return this._gl.SHORT;\n        case 5:\n          return this._gl.UNSIGNED_SHORT;\n        case 6:\n          return this._gl.INT;\n        case 7:\n          // Refers to UNSIGNED_INT\n          return this._gl.UNSIGNED_INT;\n        case 1:\n          return this._gl.FLOAT;\n        case 2:\n          return this._gl.HALF_FLOAT;\n        case 8:\n          return this._gl.UNSIGNED_SHORT_4_4_4_4;\n        case 9:\n          return this._gl.UNSIGNED_SHORT_5_5_5_1;\n        case 10:\n          return this._gl.UNSIGNED_SHORT_5_6_5;\n        case 11:\n          return this._gl.UNSIGNED_INT_2_10_10_10_REV;\n        case 12:\n          return this._gl.UNSIGNED_INT_24_8;\n        case 13:\n          return this._gl.UNSIGNED_INT_10F_11F_11F_REV;\n        case 14:\n          return this._gl.UNSIGNED_INT_5_9_9_9_REV;\n        case 15:\n          return this._gl.FLOAT_32_UNSIGNED_INT_24_8_REV;\n      }\n      return this._gl.UNSIGNED_BYTE;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_getInternalFormat\",\n    value: function _getInternalFormat(format) {\n      var useSRGBBuffer = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var internalFormat = useSRGBBuffer ? this._gl.SRGB8_ALPHA8 : this._gl.RGBA;\n      switch (format) {\n        case 0:\n          internalFormat = this._gl.ALPHA;\n          break;\n        case 1:\n          internalFormat = this._gl.LUMINANCE;\n          break;\n        case 2:\n          internalFormat = this._gl.LUMINANCE_ALPHA;\n          break;\n        case 6:\n          internalFormat = this._gl.RED;\n          break;\n        case 7:\n          internalFormat = this._gl.RG;\n          break;\n        case 4:\n          internalFormat = useSRGBBuffer ? this._gl.SRGB : this._gl.RGB;\n          break;\n        case 5:\n          internalFormat = useSRGBBuffer ? this._gl.SRGB8_ALPHA8 : this._gl.RGBA;\n          break;\n      }\n      if (this._webGLVersion > 1) {\n        switch (format) {\n          case 8:\n            internalFormat = this._gl.RED_INTEGER;\n            break;\n          case 9:\n            internalFormat = this._gl.RG_INTEGER;\n            break;\n          case 10:\n            internalFormat = this._gl.RGB_INTEGER;\n            break;\n          case 11:\n            internalFormat = this._gl.RGBA_INTEGER;\n            break;\n        }\n      }\n      return internalFormat;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_getRGBABufferInternalSizedFormat\",\n    value: function _getRGBABufferInternalSizedFormat(type, format) {\n      var useSRGBBuffer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      if (this._webGLVersion === 1) {\n        if (format !== undefined) {\n          switch (format) {\n            case 0:\n              return this._gl.ALPHA;\n            case 1:\n              return this._gl.LUMINANCE;\n            case 2:\n              return this._gl.LUMINANCE_ALPHA;\n            case 4:\n              return useSRGBBuffer ? this._gl.SRGB : this._gl.RGB;\n          }\n        }\n        return this._gl.RGBA;\n      }\n      switch (type) {\n        case 3:\n          switch (format) {\n            case 6:\n              return this._gl.R8_SNORM;\n            case 7:\n              return this._gl.RG8_SNORM;\n            case 4:\n              return this._gl.RGB8_SNORM;\n            case 8:\n              return this._gl.R8I;\n            case 9:\n              return this._gl.RG8I;\n            case 10:\n              return this._gl.RGB8I;\n            case 11:\n              return this._gl.RGBA8I;\n            default:\n              return this._gl.RGBA8_SNORM;\n          }\n        case 0:\n          switch (format) {\n            case 6:\n              return this._gl.R8;\n            case 7:\n              return this._gl.RG8;\n            case 4:\n              return useSRGBBuffer ? this._gl.SRGB8 : this._gl.RGB8;\n            // By default. Other possibilities are RGB565, SRGB8.\n            case 5:\n              return useSRGBBuffer ? this._gl.SRGB8_ALPHA8 : this._gl.RGBA8;\n            // By default. Other possibilities are RGB5_A1, RGBA4, SRGB8_ALPHA8.\n            case 8:\n              return this._gl.R8UI;\n            case 9:\n              return this._gl.RG8UI;\n            case 10:\n              return this._gl.RGB8UI;\n            case 11:\n              return this._gl.RGBA8UI;\n            case 0:\n              return this._gl.ALPHA;\n            case 1:\n              return this._gl.LUMINANCE;\n            case 2:\n              return this._gl.LUMINANCE_ALPHA;\n            default:\n              return this._gl.RGBA8;\n          }\n        case 4:\n          switch (format) {\n            case 8:\n              return this._gl.R16I;\n            case 9:\n              return this._gl.RG16I;\n            case 10:\n              return this._gl.RGB16I;\n            case 11:\n              return this._gl.RGBA16I;\n            default:\n              return this._gl.RGBA16I;\n          }\n        case 5:\n          switch (format) {\n            case 8:\n              return this._gl.R16UI;\n            case 9:\n              return this._gl.RG16UI;\n            case 10:\n              return this._gl.RGB16UI;\n            case 11:\n              return this._gl.RGBA16UI;\n            default:\n              return this._gl.RGBA16UI;\n          }\n        case 6:\n          switch (format) {\n            case 8:\n              return this._gl.R32I;\n            case 9:\n              return this._gl.RG32I;\n            case 10:\n              return this._gl.RGB32I;\n            case 11:\n              return this._gl.RGBA32I;\n            default:\n              return this._gl.RGBA32I;\n          }\n        case 7:\n          // Refers to UNSIGNED_INT\n          switch (format) {\n            case 8:\n              return this._gl.R32UI;\n            case 9:\n              return this._gl.RG32UI;\n            case 10:\n              return this._gl.RGB32UI;\n            case 11:\n              return this._gl.RGBA32UI;\n            default:\n              return this._gl.RGBA32UI;\n          }\n        case 1:\n          switch (format) {\n            case 6:\n              return this._gl.R32F;\n            // By default. Other possibility is R16F.\n            case 7:\n              return this._gl.RG32F;\n            // By default. Other possibility is RG16F.\n            case 4:\n              return this._gl.RGB32F;\n            // By default. Other possibilities are RGB16F, R11F_G11F_B10F, RGB9_E5.\n            case 5:\n              return this._gl.RGBA32F;\n            // By default. Other possibility is RGBA16F.\n            default:\n              return this._gl.RGBA32F;\n          }\n        case 2:\n          switch (format) {\n            case 6:\n              return this._gl.R16F;\n            case 7:\n              return this._gl.RG16F;\n            case 4:\n              return this._gl.RGB16F;\n            // By default. Other possibilities are R11F_G11F_B10F, RGB9_E5.\n            case 5:\n              return this._gl.RGBA16F;\n            default:\n              return this._gl.RGBA16F;\n          }\n        case 10:\n          return this._gl.RGB565;\n        case 13:\n          return this._gl.R11F_G11F_B10F;\n        case 14:\n          return this._gl.RGB9_E5;\n        case 8:\n          return this._gl.RGBA4;\n        case 9:\n          return this._gl.RGB5_A1;\n        case 11:\n          switch (format) {\n            case 5:\n              return this._gl.RGB10_A2;\n            // By default. Other possibility is RGB5_A1.\n            case 11:\n              return this._gl.RGB10_A2UI;\n            default:\n              return this._gl.RGB10_A2;\n          }\n      }\n      return useSRGBBuffer ? this._gl.SRGB8_ALPHA8 : this._gl.RGBA8;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_getRGBAMultiSampleBufferFormat\",\n    value: function _getRGBAMultiSampleBufferFormat(type) {\n      if (type === 1) {\n        return this._gl.RGBA32F;\n      } else if (type === 2) {\n        return this._gl.RGBA16F;\n      }\n      return this._gl.RGBA8;\n    }\n    /**\n     * @internal\n     */\n  }, {\n    key: \"_loadFile\",\n    value: function _loadFile(url, onSuccess, onProgress, offlineProvider, useArrayBuffer, onError) {\n      var _this7 = this;\n      var request = ThinEngine._FileToolsLoadFile(url, onSuccess, onProgress, offlineProvider, useArrayBuffer, onError);\n      this._activeRequests.push(request);\n      request.onCompleteObservable.add(function (request) {\n        _this7._activeRequests.splice(_this7._activeRequests.indexOf(request), 1);\n      });\n      return request;\n    }\n    /**\n     * Loads a file from a url\n     * @param url url to load\n     * @param onSuccess callback called when the file successfully loads\n     * @param onProgress callback called while file is loading (if the server supports this mode)\n     * @param offlineProvider defines the offline provider for caching\n     * @param useArrayBuffer defines a boolean indicating that date must be returned as ArrayBuffer\n     * @param onError callback called when the file fails to load\n     * @returns a file request object\n     * @internal\n     */\n  }, {\n    key: \"readPixels\",\n    value:\n    /**\n     * Reads pixels from the current frame buffer. Please note that this function can be slow\n     * @param x defines the x coordinate of the rectangle where pixels must be read\n     * @param y defines the y coordinate of the rectangle where pixels must be read\n     * @param width defines the width of the rectangle where pixels must be read\n     * @param height defines the height of the rectangle where pixels must be read\n     * @param hasAlpha defines whether the output should have alpha or not (defaults to true)\n     * @param flushRenderer true to flush the renderer from the pending commands before reading the pixels\n     * @returns a ArrayBufferView promise (Uint8Array) containing RGBA colors\n     */\n    function readPixels(x, y, width, height) {\n      var hasAlpha = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n      var flushRenderer = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;\n      var numChannels = hasAlpha ? 4 : 3;\n      var format = hasAlpha ? this._gl.RGBA : this._gl.RGB;\n      var data = new Uint8Array(height * width * numChannels);\n      if (flushRenderer) {\n        this.flushFramebuffer();\n      }\n      this._gl.readPixels(x, y, width, height, format, this._gl.UNSIGNED_BYTE, data);\n      return Promise.resolve(data);\n    }\n    /**\n     * Gets a Promise<boolean> indicating if the engine can be instantiated (ie. if a webGL context can be found)\n     */\n  }, {\n    key: \"getHostDocument\",\n    value:\n    /**\n     * Gets host document\n     * @returns the host document object\n     */\n    function getHostDocument() {\n      if (this._renderingCanvas && this._renderingCanvas.ownerDocument) {\n        return this._renderingCanvas.ownerDocument;\n      }\n      return IsDocumentAvailable() ? document : null;\n    }\n  }], [{\n    key: \"NpmPackage\",\n    get:\n    /**\n     * Returns the current npm package of the sdk\n     */\n    // Not mixed with Version for tooling purpose.\n    function get() {\n      return \"babylonjs@6.0.0\";\n    }\n    /**\n     * Returns the current version of the framework\n     */\n  }, {\n    key: \"Version\",\n    get: function get() {\n      return \"6.0.0\";\n    }\n  }, {\n    key: \"ShadersRepository\",\n    get: function get() {\n      return Effect.ShadersRepository;\n    },\n    set: function set(value) {\n      Effect.ShadersRepository = value;\n    }\n  }, {\n    key: \"_CreateCanvas\",\n    value: function _CreateCanvas(width, height) {\n      if (typeof document === \"undefined\") {\n        return new OffscreenCanvas(width, height);\n      }\n      var canvas = document.createElement(\"canvas\");\n      canvas.width = width;\n      canvas.height = height;\n      return canvas;\n    }\n  }, {\n    key: \"_ConcatenateShader\",\n    value: function _ConcatenateShader(source, defines) {\n      var shaderVersion = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"\";\n      return shaderVersion + (defines ? defines + \"\\n\" : \"\") + source;\n    }\n  }, {\n    key: \"_FileToolsLoadImage\",\n    value: function _FileToolsLoadImage(input, onLoad, onError, offlineProvider, mimeType, imageBitmapOptions) {\n      throw _WarnImport(\"FileTools\");\n    }\n  }, {\n    key: \"_FileToolsLoadFile\",\n    value: function _FileToolsLoadFile(url, onSuccess, onProgress, offlineProvider, useArrayBuffer, onError) {\n      throw _WarnImport(\"FileTools\");\n    }\n  }, {\n    key: \"IsSupportedAsync\",\n    get: function get() {\n      return Promise.resolve(this.isSupported());\n    }\n    /**\n     * Gets a boolean indicating if the engine can be instantiated (ie. if a webGL context can be found)\n     */\n  }, {\n    key: \"IsSupported\",\n    get: function get() {\n      return this.isSupported(); // Backward compat\n    }\n    /**\n     * Gets a boolean indicating if the engine can be instantiated (ie. if a webGL context can be found)\n     * @returns true if the engine can be created\n     * @ignorenaming\n     */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n  }, {\n    key: \"isSupported\",\n    value: function isSupported() {\n      if (this._HasMajorPerformanceCaveat !== null) {\n        return !this._HasMajorPerformanceCaveat; // We know it is performant so WebGL is supported\n      }\n\n      if (this._IsSupported === null) {\n        try {\n          var tempcanvas = this._CreateCanvas(1, 1);\n          var gl = tempcanvas.getContext(\"webgl\") || tempcanvas.getContext(\"experimental-webgl\");\n          this._IsSupported = gl != null && !!window.WebGLRenderingContext;\n        } catch (e) {\n          this._IsSupported = false;\n        }\n      }\n      return this._IsSupported;\n    }\n    /**\n     * Gets a boolean indicating if the engine can be instantiated on a performant device (ie. if a webGL context can be found and it does not use a slow implementation)\n     */\n  }, {\n    key: \"HasMajorPerformanceCaveat\",\n    get: function get() {\n      if (this._HasMajorPerformanceCaveat === null) {\n        try {\n          var tempcanvas = this._CreateCanvas(1, 1);\n          var gl = tempcanvas.getContext(\"webgl\", {\n            failIfMajorPerformanceCaveat: true\n          }) || tempcanvas.getContext(\"experimental-webgl\", {\n            failIfMajorPerformanceCaveat: true\n          });\n          this._HasMajorPerformanceCaveat = !gl;\n        } catch (e) {\n          this._HasMajorPerformanceCaveat = false;\n        }\n      }\n      return this._HasMajorPerformanceCaveat;\n    }\n    /**\n     * Find the next highest power of two.\n     * @param x Number to start search from.\n     * @returns Next highest power of two.\n     */\n  }, {\n    key: \"CeilingPOT\",\n    value: function CeilingPOT(x) {\n      x--;\n      x |= x >> 1;\n      x |= x >> 2;\n      x |= x >> 4;\n      x |= x >> 8;\n      x |= x >> 16;\n      x++;\n      return x;\n    }\n    /**\n     * Find the next lowest power of two.\n     * @param x Number to start search from.\n     * @returns Next lowest power of two.\n     */\n  }, {\n    key: \"FloorPOT\",\n    value: function FloorPOT(x) {\n      x = x | x >> 1;\n      x = x | x >> 2;\n      x = x | x >> 4;\n      x = x | x >> 8;\n      x = x | x >> 16;\n      return x - (x >> 1);\n    }\n    /**\n     * Find the nearest power of two.\n     * @param x Number to start search from.\n     * @returns Next nearest power of two.\n     */\n  }, {\n    key: \"NearestPOT\",\n    value: function NearestPOT(x) {\n      var c = ThinEngine.CeilingPOT(x);\n      var f = ThinEngine.FloorPOT(x);\n      return c - x > x - f ? f : c;\n    }\n    /**\n     * Get the closest exponent of two\n     * @param value defines the value to approximate\n     * @param max defines the maximum value to return\n     * @param mode defines how to define the closest value\n     * @returns closest exponent of two of the given value\n     */\n  }, {\n    key: \"GetExponentOfTwo\",\n    value: function GetExponentOfTwo(value, max) {\n      var mode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 2;\n      var pot;\n      switch (mode) {\n        case 1:\n          pot = ThinEngine.FloorPOT(value);\n          break;\n        case 2:\n          pot = ThinEngine.NearestPOT(value);\n          break;\n        case 3:\n        default:\n          pot = ThinEngine.CeilingPOT(value);\n          break;\n      }\n      return Math.min(pot, max);\n    }\n    /**\n     * Queue a new function into the requested animation frame pool (ie. this function will be executed by the browser (or the javascript engine) for the next frame)\n     * @param func - the function to be called\n     * @param requester - the object that will request the next frame. Falls back to window.\n     * @returns frame number\n     */\n  }, {\n    key: \"QueueNewFrame\",\n    value: function QueueNewFrame(func, requester) {\n      // Note that there is kind of a typing issue here, as `setTimeout` might return something else than a number (NodeJs returns a NodeJS.Timeout object).\n      // Also if the global `requestAnimationFrame`'s returnType is number, `requester.requestPostAnimationFrame` and `requester.requestAnimationFrame` types\n      // are `any`.\n      if (!IsWindowObjectExist()) {\n        if (typeof requestAnimationFrame === \"function\") {\n          return requestAnimationFrame(func);\n        }\n      } else {\n        var _ref2 = requester || window,\n          requestPostAnimationFrame = _ref2.requestPostAnimationFrame,\n          _requestAnimationFrame = _ref2.requestAnimationFrame;\n        if (typeof requestPostAnimationFrame === \"function\") {\n          return requestPostAnimationFrame(func);\n        }\n        if (typeof _requestAnimationFrame === \"function\") {\n          return _requestAnimationFrame(func);\n        }\n      }\n      // fallback to the global `setTimeout`.\n      // In most cases (aka in the browser), `window` is the global object, so instead of calling `window.setTimeout` we could call the global `setTimeout`.\n      return setTimeout(func, 16);\n    }\n  }]);\n  return ThinEngine;\n}();\n/** Use this array to turn off some WebGL2 features on known buggy browsers version */\nThinEngine.ExceptionList = [{\n  key: \"Chrome/63.0\",\n  capture: \"63\\\\.0\\\\.3239\\\\.(\\\\d+)\",\n  captureConstraint: 108,\n  targets: [\"uniformBuffer\"]\n}, {\n  key: \"Firefox/58\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"uniformBuffer\"]\n}, {\n  key: \"Firefox/59\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"uniformBuffer\"]\n}, {\n  key: \"Chrome/72.+?Mobile\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"vao\"]\n}, {\n  key: \"Chrome/73.+?Mobile\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"vao\"]\n}, {\n  key: \"Chrome/74.+?Mobile\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"vao\"]\n}, {\n  key: \"Mac OS.+Chrome/71\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"vao\"]\n}, {\n  key: \"Mac OS.+Chrome/72\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"vao\"]\n}, {\n  key: \"Mac OS.+Chrome\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"uniformBuffer\"]\n},\n// desktop osx safari 15.4\n{\n  key: \".*AppleWebKit.*(15.4).*Safari\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"antialias\", \"maxMSAASamples\"]\n},\n// mobile browsers using safari 15.4 on ios\n{\n  key: \".*(15.4).*AppleWebKit.*Safari\",\n  capture: null,\n  captureConstraint: null,\n  targets: [\"antialias\", \"maxMSAASamples\"]\n}];\n/** @internal */\nThinEngine._TextureLoaders = [];\n// Updatable statics so stick with vars here\n/**\n * Gets or sets the epsilon value used by collision engine\n */\nThinEngine.CollisionsEpsilon = 0.001;\n// Statics\nThinEngine._IsSupported = null;\nThinEngine._HasMajorPerformanceCaveat = null;"],"names":["_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","length","i","F","s","done","value","e","_e2","f","TypeError","err","normalCompletion","didErr","step","next","_e3","return","arr","len","arr2","BufferPointer","this","ThinEngine","canvasOrContext","antialias","options","adaptToDeviceRatio","_a","_b","_c","_d","_e","_f","_g","_h","_j","_k","_l","_this","_name","_isDisposed","forcePOTTextures","isFullscreen","cullBackFaces","renderEvenInBackground","preventCacheWipeBetweenFrames","validateShaderPrograms","_useReverseDepthBuffer","isNDCHalfZRange","hasOriginBottomLeft","disableUniformBuffers","onDisposeObservable","_frameId","_uniformBuffers","_storageBuffers","_webGLVersion","_windowIsBackground","_highPrecisionShadersAllowed","_badOS","_badDesktopOS","_renderingQueueLaunched","_activeRenderLoops","onContextLostObservable","onContextRestoredObservable","_contextWasLost","_doNotHandleContextLost","disableVertexArrayObjects","_colorWrite","_colorWriteChanged","_depthCullingState","_stencilStateComposer","_stencilState","_alphaState","_alphaMode","_alphaEquation","_internalTexturesCache","_renderTargetWrapperCache","_activeChannel","_currentTextureChannel","_boundTexturesCache","_compiledEffects","_vertexAttribArraysEnabled","_uintIndicesCurrentlySet","_currentBoundBuffer","_currentFramebuffer","_dummyFramebuffer","_currentBufferPointers","_currentInstanceLocations","_currentInstanceBuffers","_vaoRecordInProgress","_mustWipeVertexAttributes","_nextFreeTextureSlots","_maxSimultaneousTextures","_maxMSAASamplesOverride","_activeRequests","_lastDevicePixelRatio","_transformTextureUrl","hostInformation","isMobile","premultipliedAlpha","onBeforeTextureInitObservable","_isWebGPU","_snapshotRenderingMode","_viewportCached","x","y","z","w","_unpackFlipYCached","enableUnpackFlipYCached","_boundUniforms","startTime","canvas","_creationOptions","stencilGlobal","useHighPrecisionMatrix","deterministicLockstep","lockstepMaxSteps","timeStep","audioEngine","stencil","_audioContext","audioEngineOptions","audioContext","_audioDestination","audioDestination","useExactSrgbConversions","doNotHandleContextLost","_isStencilEnable","devicePixelRatio","window","limitDeviceRatio","_hardwareScalingLevel","Math","min","getContext","_renderingCanvas","undefined","preserveDrawingBuffer","xrCompatible","navigator","userAgent","_setupMobileChecks","_step","ua","_iterator","ExceptionList","exception","key","targets","RegExp","capture","captureConstraint","constraint","matches","exec","parseInt","_step2","_iterator2","_onContextLost","evt","preventDefault","notifyObservers","_onContextRestored","_restoreEngineAfterContextLost","_initGLContext","bind","addEventListener","powerPreference","disableWebGL2Support","_gl","_shaderPlatformName","deleteQuery","Error","renderbufferStorageMultisample","attributes","getContextAttributes","pixelStorei","UNPACK_COLORSPACE_CONVERSION_WEBGL","NONE","useHighPrecisionFloats","resize","_initFeatures","_caps","maxVertexAttribs","_shaderProcessor","webGLVersion","versionToLog","concat","Version","console","log","description","setAttribute","get","parallelShaderCompile","set","shaderLanguage","useReverse","depthFunc","highPrecisionShaderSupported","dimensions","_framebufferDimensionsObject","_cachedViewport","_emptyTexture","createRawTexture","Uint8Array","_emptyTexture3D","createRawTexture3D","_emptyTexture2DArray","createRawTexture2DArray","_emptyCubeTexture","faceData","cubeData","createRawCubeTexture","activate","mode","snapshotRendering","width","height","_CreateCanvas","document","createElement","_this2","_checkForMobile","currentUA","indexOf","initEngine","_this3","setTimeout","_callee","depthTest","depthMask","stencilTest","_context","prev","wipeCaches","_rebuildEffects","_rebuildComputeEffects","_rebuildBuffers","_rebuildInternalTextures","_rebuildRenderTargetWrappers","stop","_step3","_iterator3","_rebuild","_step4","_iterator4","effect","_pipelineContext","_wasPreviouslyReady","_prepareEffect","isReady","_step5","_iterator5","_step6","_iterator6","maxTexturesImageUnits","getParameter","MAX_TEXTURE_IMAGE_UNITS","maxCombinedTexturesImageUnits","MAX_COMBINED_TEXTURE_IMAGE_UNITS","maxVertexTextureImageUnits","MAX_VERTEX_TEXTURE_IMAGE_UNITS","maxTextureSize","MAX_TEXTURE_SIZE","maxSamples","MAX_SAMPLES","maxCubemapTextureSize","MAX_CUBE_MAP_TEXTURE_SIZE","maxRenderTextureSize","MAX_RENDERBUFFER_SIZE","MAX_VERTEX_ATTRIBS","maxVaryingVectors","MAX_VARYING_VECTORS","maxFragmentUniformVectors","MAX_FRAGMENT_UNIFORM_VECTORS","maxVertexUniformVectors","MAX_VERTEX_UNIFORM_VECTORS","getExtension","standardDerivatives","maxAnisotropy","astc","bptc","s3tc","s3tc_srgb","pvrtc","etc1","etc2","textureAnisotropicFilterExtension","uintIndices","fragmentDepthSupported","timerQuery","supportOcclusionQuery","canUseTimestampForTimerQuery","drawBuffersExtension","maxMSAASamples","colorBufferFloat","textureFloat","textureHalfFloat","textureHalfFloatRender","textureFloatLinearFiltering","textureFloatRender","textureHalfFloatLinearFiltering","vertexArrayObject","instancedArrays","textureLOD","texelFetch","blendMinMax","multiview","oculusMultiview","depthTextureExtension","canUseGLInstanceID","canUseGLVertexID","supportComputeShaders","supportSRGBBuffers","supportTransformFeedbacks","textureMaxLevel","texture2DArrayMaxLayerCount","MAX_ARRAY_TEXTURE_LAYERS","disableMorphTargetTexture","_glVersion","VERSION","rendererInfo","_glRenderer","UNMASKED_RENDERER_WEBGL","_glVendor","UNMASKED_VENDOR_WEBGL","VENDOR","RENDERER","HALF_FLOAT_OES","RGBA16F","RGBA32F","DEPTH24_STENCIL8","getQuery","getQueryEXT","TIMESTAMP_EXT","QUERY_COUNTER_BITS_EXT","MAX_TEXTURE_MAX_ANISOTROPY_EXT","_canRenderToFloatFramebuffer","COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR","COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT","COMPRESSED_SRGB_S3TC_DXT1_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT","COMPRESSED_SRGB8_ETC2","COMPRESSED_SRGB8_ALPHA8_ETC2_EAC","_canRenderToHalfFloatFramebuffer","drawBuffers","drawBuffersWEBGL","DRAW_FRAMEBUFFER","FRAMEBUFFER","UNSIGNED_INT_24_8","UNSIGNED_INT_24_8_WEBGL","vertexArrayObjectExtension","createVertexArray","createVertexArrayOES","bindVertexArray","bindVertexArrayOES","deleteVertexArray","deleteVertexArrayOES","instanceExtension","drawArraysInstanced","drawArraysInstancedANGLE","drawElementsInstanced","drawElementsInstancedANGLE","vertexAttribDivisor","vertexAttribDivisorANGLE","getShaderPrecisionFormat","vertexhighp","VERTEX_SHADER","HIGH_FLOAT","fragmenthighp","FRAGMENT_SHADER","precision","blendMinMaxExtension","MAX","MAX_EXT","MIN","MIN_EXT","sRGBExtension","SRGB","SRGB_EXT","SRGB8","SRGB_ALPHA_EXT","SRGB8_ALPHA8","forceSRGBBufferSupportState","LEQUAL","slot","push","_features","forceBitmapOverHTMLImageElement","supportRenderAndCopyToLodForFloatTextures","supportDepthStencilTexture","supportShadowSamplers","uniformBufferHardCheckMatrix","allowTexturePrefiltering","trackUbosInFrame","checkUbosContentBeforeUpload","supportCSM","basisNeedsPOT","support3DTextures","needTypeSuffixInShaderConstants","supportMSAA","supportSSAO2","supportExtendedTextureFormats","supportSwitchCaseInShader","supportSyncTextureRead","needsInvertingBitmap","useUBOBindingCache","needShaderCodeInlining","needToAlwaysBindUniformBuffers","supportRenderPasses","supportSpriteInstancing","_collectUbosUpdatedInFrame","_workingCanvas","createCanvas","context","_workingContext","hasOwnProperty","getGlInfo","vendor","renderer","version","level","renderFunction","index","splice","shouldRender","beginFrame","endFrame","_frameHandler","_queueNewFrame","_boundRenderFunction","getHostWindow","ownerDocument","defaultView","useScreen","arguments","_currentRenderTarget","framebufferWidth","drawingBufferWidth","framebufferHeight","drawingBufferHeight","bindedRenderFunction","requester","QueueNewFrame","_renderLoop","color","backBuffer","depth","useStencilGlobalOnly","stencilStateComposer","applyStates","clearColor","r","g","b","a","COLOR_BUFFER_BIT","useReverseDepthBuffer","GEQUAL","clearDepth","DEPTH_BUFFER_BIT","clearStencil","STENCIL_BUFFER_BIT","clear","viewport","requiredWidth","requiredHeight","getRenderWidth","getRenderHeight","_viewport","flushFramebuffer","forceSetSize","changeRatio","clientWidth","innerWidth","clientHeight","innerHeight","setSize","rtWrapper","faceIndex","forceFullscreenViewport","lodLevel","layer","webglRTWrapper","unBindFramebuffer","_bindUnboundFramebuffer","_MSAAFramebuffer","_framebuffer","gl","isMulti","is2DArray","framebufferTextureLayer","COLOR_ATTACHMENT0","texture","_hardwareTexture","underlyingResource","isCube","framebufferTexture2D","TEXTURE_CUBE_MAP_POSITIVE_X","depthStencilTexture","_depthStencilTexture","attachment","_depthStencilTextureWithStencil","DEPTH_STENCIL_ATTACHMENT","DEPTH_ATTACHMENT","TEXTURE_2D","setViewport","pow","culling","zOffset","force","reverseSide","zOffsetUnits","cull","cullFace","BACK","FRONT","setZOffset","setZOffsetUnits","frontFace","CW","CCW","stencilMaterial","enable","framebuffer","bindFramebuffer","_bindTextureDirectly","generateMipmap","disableGenerateMipMaps","onBeforeUnbind","unBindMultiColorAttachmentFramebuffer","READ_FRAMEBUFFER","blitFramebuffer","NEAREST","generateMipMaps","generateMipmaps","flush","bindArrayBuffer","_cachedVertexBuffers","data","_createVertexBuffer","STATIC_DRAW","usage","vbo","createBuffer","dataBuffer","bufferData","ARRAY_BUFFER","Float32Array","_resetVertexBufferBinding","references","DYNAMIC_DRAW","bindIndexBuffer","_cachedIndexBuffer","indices","updatable","_normalizeIndexData","ELEMENT_ARRAY_BUFFER","_resetIndexBufferBinding","is32Bits","BYTES_PER_ELEMENT","Uint32Array","Uint16Array","buffer","_unbindVertexArrayObject","_bindBuffer","pipelineContext","blockName","program","uniformLocation","getUniformBlockIndex","uniformBlockBinding","target","bindBuffer","bufferSubData","indx","size","type","normalized","stride","offset","pointer","changed","active","UNSIGNED_INT","INT","vertexAttribIPointer","vertexAttribPointer","indexBuffer","vertexBuffers","overrideVertexBuffers","getAttributesNames","unbindAllAttributes","order","getAttributeLocation","ai","vertexBuffer","enableVertexAttribArray","getBuffer","_vertexAttribPointer","getSize","byteStride","byteOffset","getIsInstanced","getInstanceDivisor","vao","_bindVertexBuffersAttributes","_cachedVertexArrayObject","vertexDeclaration","vertexStrideSize","_cachedEffectForVertexBuffers","attributesCount","getAttributesCount","FLOAT","_bindIndexBufferWithCache","boundBuffer","ul","instancesBuffer","offsetLocation","_deleteBuffer","deleteBuffer","offsetLocations","bindInstancesBuffer","attributesInfo","computeStride","attributeSize","_i","_ai","_currentEffect","getAttributeLocationByName","attributeName","attributeType","divisor","attributeLocation","disableInstanceAttribute","shouldClean","disableAttributeByIndex","disableVertexAttribArray","useTriangles","indexStart","indexCount","instancesCount","drawElementsType","verticesStart","verticesCount","drawArraysType","fillMode","_reportDrawCall","drawMode","_drawMode","indexFormat","UNSIGNED_SHORT","mult","drawElements","drawArrays","TRIANGLES","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLE_STRIP","TRIANGLE_FAN","_key","getPipelineContext","_deletePipelineContext","webGLPipelineContext","__SPECTOR_rebuildProgram","deleteProgram","defines","baseName","attributesNamesOrOptions","uniformsNamesOrEngine","samplers","fallbacks","onCompiled","onError","indexParameters","vertex","vertexElement","vertexToken","vertexSource","fragment","fragmentElement","fragmentToken","fragmentSource","globalDefines","_getGlobalDefines","fullDefines","compiledEffect","source","shaderVersion","_compileRawShader","_ConcatenateShader","shader","createShader","error","NO_ERROR","tempError","getError","isContextLost","shaderSource","compileShader","getShaderSource","vertexCode","fragmentCode","transformFeedbackVaryings","vertexShader","fragmentShader","_createShaderProgram","_compileShader","code","shaderProcessingContext","engine","isParallelCompiled","shaderProgram","createProgram","attachShader","linkProgram","_finalizePipelineContext","getProgramParameter","LINK_STATUS","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","vertexCompilationError","_log","fragmentCompilationError","getProgramInfoLog","programLinkError","validateProgram","VALIDATE_STATUS","_error","programValidationError","deleteShader","vertexSourceCode","fragmentSourceCode","createAsRaw","rawVertexSourceCode","rawFragmentSourceCode","rebuildRebind","webGLRenderingState","createRawShaderProgram","createShaderProgram","COMPLETION_STATUS_KHR","action","oldHandler","uniformsNames","results","getUniformLocation","attributesNames","getAttribLocation","bindSamplers","onBind","_onBindObservable","uniform","uniform1i","uniform2i","uniform3i","uniform4i","array","uniform1iv","uniform2iv","uniform3iv","uniform4iv","uniform1ui","uniform2ui","uniform3ui","uniform4ui","uniform1uiv","uniform2uiv","uniform3uiv","uniform4uiv","uniform1fv","uniform2fv","uniform3fv","uniform4fv","matrices","uniformMatrix4fv","matrix","uniformMatrix3fv","uniformMatrix2fv","uniform1f","uniform2f","uniform3f","uniform4f","apply","colorMask","bruteForce","_currentProgram","resetTextureCache","reset","UNPACK_PREMULTIPLY_ALPHA_WEBGL","samplingMode","magFilter","minFilter","LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","NEAREST_MIPMAP_LINEAR","NEAREST_MIPMAP_NEAREST","mag","createTexture","_createTexture","label","format","useSRGBBuffer","samples","isWebGPU","layers","filters","_getSamplingParameters","TEXTURE_2D_ARRAY","sizedFormat","_getRGBABufferInternalSizedFormat","internalFormat","_getInternalFormat","textureType","_getWebGLTextureType","texImage3D","texImage2D","texParameteri","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","_useSRGBBuffer","baseWidth","baseHeight","noMipmap","url","invertY","scene","_this4","onLoad","prepareTexture","prepareTextureProcessFunction","fallback","forcedExtension","mimeType","loaderOptions","fromData","substr","fromBlob","isBase64","substring","originalUrl","_originalUrl","lastDot","lastIndexOf","extension","toLowerCase","loader","queryStringIndex","split","_step7","_iterator7","_TextureLoaders","availableLoader","canLoad","addPendingData","_getUseSRGBBuffer","_buffer","onLoadObserver","onLoadedObservable","add","onInternalError","message","removePendingData","remove","_createTextureBase","onErrorObservable","callback","loadData","loadMipmap","isCompressed","loadFailed","ArrayBuffer","isView","_loadFile","offlineProvider","request","responseURL","onload","img","decoding","close","_FileToolsLoadImage","imageOrientation","Blob","_this5","_prepareWebGLTexture","potWidth","potHeight","continuationCallback","isPot","RGBA","RGB","texelFormat","UNSIGNED_BYTE","_supportsHardwareTextureRescaling","_prepareWorkingCanvas","drawImage","_rescaleTexture","_releaseTexture","destination","onComplete","UNPACK_FLIP_Y_WEBGL","UNPACK_ALIGNMENT","TEXTURE_CUBE_MAP","is3D","TEXTURE_3D","isMultiview","_getTextureTarget","useMipMaps","_setTextureParameterInteger","wrapU","wrapV","wrapR","_getTextureWrapMode","_cachedWrapU","_cachedWrapV","TEXTURE_WRAP_R","_cachedWrapR","internalTexture","generateStencil","bilinearFiltering","comparisonFunction","_comparisonFunction","samplingParameters","TEXTURE_COMPARE_FUNC","TEXTURE_COMPARE_MODE","COMPARE_REF_TO_TEXTURE","lod","compressedTexImage2D","imageData","babylonInternalFormat","useTextureWidthAndHeight","_unpackFlipY","lodMaxWidth","round","LOG2E","lodMaxHeight","max","xOffset","yOffset","targetForBinding","texSubImage2D","bindTarget","_uploadDataToTextureDirectly","processFunction","_this6","getCaps","needPOTTextures","GetExponentOfTwo","_prepareWebGLTextureContinuation","generateStencilBuffer","generateDepthBuffer","_createRenderBuffer","DEPTH_STENCIL","depthFormat","DEPTH_COMPONENT16","DEPTH_COMPONENT32F","STENCIL_INDEX8","STENCIL_ATTACHMENT","msInternalFormat","unbindBuffer","renderBuffer","createRenderbuffer","_updateRenderBuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","framebufferRenderbuffer","_deleteTexture","unbindAllTextures","_lodTextureHigh","dispose","_lodTextureMid","_lodTextureLow","_irradianceTexture","deleteTexture","useProgram","_setProgram","getSamplers","getUniform","activeTexture","TEXTURE0","forTextureDataUpdate","wasPreviouslyBound","isTextureForRendering","_associatedChannel","currentTextureBound","_activateCurrentTexture","bindTexture","_bindSamplerUniformToChannel","channel","_setTexture","sourceSlot","_currentState","REPEAT","MIRRORED_REPEAT","isPartOfTextureArray","video","update","delayLoadState","delayLoad","getInternalTexture","emptyCubeTexture","emptyTexture3D","emptyTexture2DArray","emptyTexture","needToBind","_cachedCoordinatesMode","coordinatesMode","textureWrapMode","_setAnisotropicLevel","anisotropicFilteringLevel","textures","_textureUnits","Int32Array","anisotropicFilterExtension","_cachedAnisotropicFilteringLevel","_setTextureParameterFloat","TEXTURE_MAX_ANISOTROPY_EXT","parameter","texParameterf","_i2","stopRenderLoop","deleteFramebuffer","releaseEffects","releaseComputeEffects","removeEventListener","_step8","_iterator8","abort","_canRenderToFramebuffer","successful","fb","createFramebuffer","status","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","readFormat","readType","readPixels","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","BYTE","SHORT","HALF_FLOAT","UNSIGNED_INT_2_10_10_10_REV","UNSIGNED_INT_10F_11F_11F_REV","UNSIGNED_INT_5_9_9_9_REV","FLOAT_32_UNSIGNED_INT_24_8_REV","ALPHA","LUMINANCE","LUMINANCE_ALPHA","RED","RG","RED_INTEGER","RG_INTEGER","RGB_INTEGER","RGBA_INTEGER","R8_SNORM","RG8_SNORM","RGB8_SNORM","R8I","RG8I","RGB8I","RGBA8I","RGBA8_SNORM","R8","RG8","RGB8","RGBA8","R8UI","RG8UI","RGB8UI","RGBA8UI","R16I","RG16I","RGB16I","RGBA16I","R16UI","RG16UI","RGB16UI","RGBA16UI","R32I","RG32I","RGB32I","RGBA32I","R32UI","RG32UI","RGB32UI","RGBA32UI","R32F","RG32F","RGB32F","R16F","RG16F","RGB16F","RGB565","R11F_G11F_B10F","RGB9_E5","RGBA4","RGB5_A1","RGB10_A2","RGB10_A2UI","onSuccess","onProgress","useArrayBuffer","_this7","_FileToolsLoadFile","onCompleteObservable","hasAlpha","flushRenderer","numChannels","Promise","resolve","OffscreenCanvas","input","imageBitmapOptions","isSupported","_HasMajorPerformanceCaveat","_IsSupported","tempcanvas","WebGLRenderingContext","failIfMajorPerformanceCaveat","c","CeilingPOT","FloorPOT","pot","NearestPOT","func","_ref2","requestPostAnimationFrame","_requestAnimationFrame","requestAnimationFrame","CollisionsEpsilon"],"sourceRoot":""}